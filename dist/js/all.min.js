/*!
 * Lightbox v2.8.2
 * by Lokesh Dhakar
 *
 * More info:
 * http://lokeshdhakar.com/projects/lightbox2/
 *
 * Copyright 2007, 2015 Lokesh Dhakar
 * Released under the MIT license
 * https://github.com/lokesh/lightbox2/blob/master/LICENSE
 */
!function(a,b){"function"==typeof define&&define.amd?define(["jquery"],b):"object"==typeof exports?module.exports=b(require("jquery")):a.lightbox=b(a.jQuery)}(this,function(a){function b(b){this.album=[],this.currentImageIndex=void 0,this.init(),this.options=a.extend({},this.constructor.defaults),this.option(b)};window.Lightbox = b;return b.defaults={albumLabel:"Image %1 of %2",alwaysShowNavOnTouchDevices:!1,fadeDuration:500,fitImagesInViewport:!0,positionFromTop:50,resizeDuration:700,showImageNumberLabel:!0,wrapAround:!1,disableScrolling:!1},b.prototype.option=function(b){a.extend(this.options,b)},b.prototype.imageCountLabel=function(a,b){return this.options.albumLabel.replace(/%1/g,a).replace(/%2/g,b)},b.prototype.init=function(){this.enable(),this.build()},b.prototype.enable=function(){var b=this;a("body").on("click","a[rel^=lightbox], area[rel^=lightbox], a[data-lightbox], area[data-lightbox]",function(c){return b.start(a(c.currentTarget)),!1})},b.prototype.build=function(){var b=this;a('<div id="lightboxOverlay" class="lightboxOverlay"></div><div id="lightbox" class="lightbox"><div class="lb-outerContainer"><div class="lb-container"><img class="lb-image" src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" /><div class="lb-nav"><a class="lb-prev" href="" ></a><a class="lb-next" href="" ></a></div><div class="lb-loader"><a class="lb-cancel"></a></div></div></div><div class="lb-dataContainer"><div class="lb-data"><div class="lb-details"><span class="lb-caption"></span><span class="lb-number"></span></div><div class="lb-closeContainer"><a class="lb-close"></a></div></div></div></div>').appendTo(a("body")),this.$lightbox=a("#lightbox"),this.$overlay=a("#lightboxOverlay"),this.$outerContainer=this.$lightbox.find(".lb-outerContainer"),this.$container=this.$lightbox.find(".lb-container"),this.containerTopPadding=parseInt(this.$container.css("padding-top"),10),this.containerRightPadding=parseInt(this.$container.css("padding-right"),10),this.containerBottomPadding=parseInt(this.$container.css("padding-bottom"),10),this.containerLeftPadding=parseInt(this.$container.css("padding-left"),10),this.$overlay.hide().on("click",function(){return b.end(),!1}),this.$lightbox.hide().on("click",function(c){return"lightbox"===a(c.target).attr("id")&&b.end(),!1}),this.$outerContainer.on("click",function(c){return"lightbox"===a(c.target).attr("id")&&b.end(),!1}),this.$lightbox.find(".lb-prev").on("click",function(){return 0===b.currentImageIndex?b.changeImage(b.album.length-1):b.changeImage(b.currentImageIndex-1),!1}),this.$lightbox.find(".lb-next").on("click",function(){return b.currentImageIndex===b.album.length-1?b.changeImage(0):b.changeImage(b.currentImageIndex+1),!1}),this.$lightbox.find(".lb-loader, .lb-close").on("click",function(){return b.end(),!1})},b.prototype.start=function(b){function c(a){d.album.push({link:a.attr("href"),title:a.attr("data-title")||a.attr("title")})}var d=this,e=a(window);e.on("resize",a.proxy(this.sizeOverlay,this)),a("select, object, embed").css({visibility:"hidden"}),this.sizeOverlay(),this.album=[];var f,g=0,h=b.attr("data-lightbox");if(h){f=a(b.prop("tagName")+'[data-lightbox="'+h+'"]');for(var i=0;i<f.length;i=++i)c(a(f[i])),f[i]===b[0]&&(g=i)}else if("lightbox"===b.attr("rel"))c(b);else{f=a(b.prop("tagName")+'[rel="'+b.attr("rel")+'"]');for(var j=0;j<f.length;j=++j)c(a(f[j])),f[j]===b[0]&&(g=j)}var k=e.scrollTop()+this.options.positionFromTop,l=e.scrollLeft();this.$lightbox.css({top:k+"px",left:l+"px"}).fadeIn(this.options.fadeDuration),this.options.disableScrolling&&a("body").addClass("lb-disable-scrolling"),this.changeImage(g)},b.prototype.changeImage=function(b){var c=this;this.disableKeyboardNav();var d=this.$lightbox.find(".lb-image");this.$overlay.fadeIn(this.options.fadeDuration),a(".lb-loader").fadeIn("slow"),this.$lightbox.find(".lb-image, .lb-nav, .lb-prev, .lb-next, .lb-dataContainer, .lb-numbers, .lb-caption").hide(),this.$outerContainer.addClass("animating");var e=new Image;e.onload=function(){var f,g,h,i,j,k,l;d.attr("src",c.album[b].link),f=a(e),d.width(e.width),d.height(e.height),c.options.fitImagesInViewport&&(l=a(window).width(),k=a(window).height(),j=l-c.containerLeftPadding-c.containerRightPadding-20,i=k-c.containerTopPadding-c.containerBottomPadding-120,c.options.maxWidth&&c.options.maxWidth<j&&(j=c.options.maxWidth),c.options.maxHeight&&c.options.maxHeight<j&&(i=c.options.maxHeight),(e.width>j||e.height>i)&&(e.width/j>e.height/i?(h=j,g=parseInt(e.height/(e.width/h),10),d.width(h),d.height(g)):(g=i,h=parseInt(e.width/(e.height/g),10),d.width(h),d.height(g)))),c.sizeContainer(d.width(),d.height())},e.src=this.album[b].link,this.currentImageIndex=b},b.prototype.sizeOverlay=function(){this.$overlay.width(a(document).width()).height(a(document).height())},b.prototype.sizeContainer=function(a,b){function c(){d.$lightbox.find(".lb-dataContainer").width(g),d.$lightbox.find(".lb-prevLink").height(h),d.$lightbox.find(".lb-nextLink").height(h),d.showImage()}var d=this,e=this.$outerContainer.outerWidth(),f=this.$outerContainer.outerHeight(),g=a+this.containerLeftPadding+this.containerRightPadding,h=b+this.containerTopPadding+this.containerBottomPadding;e!==g||f!==h?this.$outerContainer.animate({width:g,height:h},this.options.resizeDuration,"swing",function(){c()}):c()},b.prototype.showImage=function(){this.$lightbox.find(".lb-loader").stop(!0).hide(),this.$lightbox.find(".lb-image").fadeIn("slow"),this.updateNav(),this.updateDetails(),this.preloadNeighboringImages(),this.enableKeyboardNav()},b.prototype.updateNav=function(){var a=!1;try{document.createEvent("TouchEvent"),a=this.options.alwaysShowNavOnTouchDevices?!0:!1}catch(b){}this.$lightbox.find(".lb-nav").show(),this.album.length>1&&(this.options.wrapAround?(a&&this.$lightbox.find(".lb-prev, .lb-next").css("opacity","1"),this.$lightbox.find(".lb-prev, .lb-next").show()):(this.currentImageIndex>0&&(this.$lightbox.find(".lb-prev").show(),a&&this.$lightbox.find(".lb-prev").css("opacity","1")),this.currentImageIndex<this.album.length-1&&(this.$lightbox.find(".lb-next").show(),a&&this.$lightbox.find(".lb-next").css("opacity","1"))))},b.prototype.updateDetails=function(){var b=this;if("undefined"!=typeof this.album[this.currentImageIndex].title&&""!==this.album[this.currentImageIndex].title&&this.$lightbox.find(".lb-caption").html(this.album[this.currentImageIndex].title).fadeIn("fast").find("a").on("click",function(b){void 0!==a(this).attr("target")?window.open(a(this).attr("href"),a(this).attr("target")):location.href=a(this).attr("href")}),this.album.length>1&&this.options.showImageNumberLabel){var c=this.imageCountLabel(this.currentImageIndex+1,this.album.length);this.$lightbox.find(".lb-number").text(c).fadeIn("fast")}else this.$lightbox.find(".lb-number").hide();this.$outerContainer.removeClass("animating"),this.$lightbox.find(".lb-dataContainer").fadeIn(this.options.resizeDuration,function(){return b.sizeOverlay()})},b.prototype.preloadNeighboringImages=function(){if(this.album.length>this.currentImageIndex+1){var a=new Image;a.src=this.album[this.currentImageIndex+1].link}if(this.currentImageIndex>0){var b=new Image;b.src=this.album[this.currentImageIndex-1].link}},b.prototype.enableKeyboardNav=function(){a(document).on("keyup.keyboard",a.proxy(this.keyboardAction,this))},b.prototype.disableKeyboardNav=function(){a(document).off(".keyboard")},b.prototype.keyboardAction=function(a){var b=27,c=37,d=39,e=a.keyCode,f=String.fromCharCode(e).toLowerCase();e===b||f.match(/x|o|c/)?this.end():"p"===f||e===c?0!==this.currentImageIndex?this.changeImage(this.currentImageIndex-1):this.options.wrapAround&&this.album.length>1&&this.changeImage(this.album.length-1):("n"===f||e===d)&&(this.currentImageIndex!==this.album.length-1?this.changeImage(this.currentImageIndex+1):this.options.wrapAround&&this.album.length>1&&this.changeImage(0))},b.prototype.end=function(){this.disableKeyboardNav(),a(window).off("resize",this.sizeOverlay),this.$lightbox.fadeOut(this.options.fadeDuration),this.$overlay.fadeOut(this.options.fadeDuration),a("select, object, embed").css({visibility:"visible"}),this.options.disableScrolling&&a("body").removeClass("lb-disable-scrolling")},new b});

// Patch Lightbox to add overflow hidden on open
(function(){var b={},c={start:function(){jQuery("body").css("overflow-y","hidden")},end:function(){jQuery("body").css("overflow-y","")}};["start","end"].forEach(function(a){b[a]=Lightbox.prototype[a];Lightbox.prototype[a]=function(){var d=b[a].apply(this,arguments);c[a](d)}})})();

(function(){function c(a){this.t=a}function l(a,b){for(var e=b.split(".");e.length;){if(!(e[0]in a))return!1;a=a[e.shift()]}return a}function d(a,b){return a.replace(h,function(e,a,i,f,c,h,k,m){var f=l(b,f),j="",g;if(!f)return"!"==i?d(c,b):k?d(m,b):"";if(!i)return d(h,b);if("@"==i){e=b._key;a=b._val;for(g in f)f.hasOwnProperty(g)&&(b._key=g,b._val=f[g],j+=d(c,b));b._key=e;b._val=a;return j}}).replace(k,function(a,c,d){return(a=l(b,d))||0===a?"%"==c?(new Option(a)).innerHTML.replace(/"/g,"&quot;"):
a:""})}var h=/\{\{(([@!]?)(.+?))\}\}(([\s\S]+?)(\{\{:\1\}\}([\s\S]+?))?)\{\{\/\1\}\}/g,k=/\{\{([=%])(.+?)\}\}/g;c.prototype.render=function(a){return d(this.t,a)};window.t=c})();
/*!
 * Socialite v2.0
 * http://socialitejs.com
 * Copyright (c) 2011 David Bushell
 * Dual-licensed under the BSD or MIT licenses: http://socialitejs.com/license.txt
 */
window.Socialite=(function(f,g,d){var e=0,a=[],i={},h={},b=/^($|loaded|complete)/,j=f.encodeURIComponent;var c={settings:{},trim:function(k){return k.trim?k.trim():k.replace(/^\s+|\s+$/g,"")},hasClass:function(k,l){return(" "+k.className+" ").indexOf(" "+l+" ")!==-1},addClass:function(k,l){if(!c.hasClass(k,l)){k.className=(k.className==="")?l:k.className+" "+l}},removeClass:function(k,l){k.className=c.trim(" "+k.className+" ".replace(" "+l+" "," "))},extendObject:function(o,n,k){for(var m in n){var l=o[m]!==d;if(l&&typeof n[m]==="object"){c.extendObject(o[m],n[m],k)}else{if(k||!l){o[m]=n[m]}}}},getElements:function(l,p){var k=0,o=[],n=!!l.getElementsByClassName,m=n?l.getElementsByClassName(p):l.getElementsByTagName("*");for(;k<m.length;k++){if(n||c.hasClass(m[k],p)){o.push(m[k])}}return o},getDataAttributes:function(l,s,k){var o=0,q="",n={},p=l.attributes;for(;o<p.length;o++){var r=p[o].name,m=p[o].value;if(m.length&&r.indexOf("data-")===0){if(s){r=r.substring(5)}if(k){n[r]=m}else{q+=j(r)+"="+j(m)+"&"}}}return k?n:q},copyDataAttributes:function(p,o,n,m){var k=c.getDataAttributes(p,n,true);for(var l in k){o.setAttribute(m?l.replace(/-/g,"_"):l,k[l])}},createIframe:function(m,k){var l=g.createElement("iframe");l.style.cssText="overflow: hidden; border: none;";c.extendObject(l,{src:m,allowtransparency:"true",frameborder:"0",scrolling:"no"},true);if(k){l.onload=l.onreadystatechange=function(){if(b.test(l.readyState||"")){l.onload=l.onreadystatechange=null;c.activateInstance(k)}}}return l},networkReady:function(k){return i[k]?i[k].loaded:d},appendNetwork:function(k){if(!k||k.appended){return}if(typeof k.append==="function"&&k.append(k)===false){k.appended=k.loaded=true;c.activateAll(k);return}if(k.script){k.el=g.createElement("script");c.extendObject(k.el,k.script,true);k.el.async=true;k.el.onload=k.el.onreadystatechange=function(){if(b.test(k.el.readyState||"")){k.el.onload=k.el.onreadystatechange=null;k.loaded=true;if(typeof k.onload==="function"&&k.onload(k)===false){return}c.activateAll(k)}};g.body.appendChild(k.el)}k.appended=true},removeNetwork:function(k){if(!c.networkReady(k.name)){return false}if(k.el.parentNode){k.el.parentNode.removeChild(k.el)}return !(k.appended=k.loaded=false)},reloadNetwork:function(k){var l=i[k];if(l&&c.removeNetwork(l)){c.appendNetwork(l)}},createInstance:function(l,n){var m=true,k={el:l,uid:e++,widget:n};a.push(k);if(n.process!==d){m=(typeof n.process==="function")?n.process(k):false}if(m){c.processInstance(k)}k.el.setAttribute("data-socialite",k.uid);k.el.className="socialite "+n.name+" socialite-instance";return k},processInstance:function(k){var m=k.el;k.el=g.createElement("div");k.el.className=m.className;c.copyDataAttributes(m,k.el);if(m.nodeName.toLowerCase()==="a"&&!m.getAttribute("data-default-href")){k.el.setAttribute("data-default-href",m.getAttribute("href"))}var l=m.parentNode;l.insertBefore(k.el,m);l.removeChild(m)},activateInstance:function(k){if(k&&!k.loaded){k.loaded=true;if(typeof k.widget.activate==="function"){k.widget.activate(k)}c.addClass(k.el,"socialite-loaded");return k.onload?k.onload(k.el):null}},activateAll:function(m){if(typeof m==="string"){m=i[m]}for(var l=0;l<a.length;l++){var k=a[l];if(k.init&&k.widget.network===m){c.activateInstance(k)}}},load:function(m,n,s,p,l){m=(m&&typeof m==="object"&&m.nodeType===1)?m:g;if(!n||typeof n!=="object"){c.load(m,c.getElements(m,"socialite"),s,p,l);return}var q;if(/Array/.test(Object.prototype.toString.call(n))){for(q=0;q<n.length;q++){c.load(m,n[q],s,p,l)}return}if(n.nodeType!==1){return}if(!s||!h[s]){s=null;var o=n.className.split(" ");for(q=0;q<o.length;q++){if(h[o[q]]){s=o[q];break}}if(!s){return}}var u,r=h[s],k=parseInt(n.getAttribute("data-socialite"),10);if(!isNaN(k)){for(q=0;q<a.length;q++){if(a[q].uid===k){u=a[q];break}}}else{u=c.createInstance(n,r)}if(l||!u){return}if(!u.init){u.init=true;u.onload=(typeof p==="function")?p:null;r.init(u)}if(!r.network.appended){c.appendNetwork(r.network)}else{if(c.networkReady(r.network.name)){c.activateInstance(u)}}},activate:function(l,k,m){f.Socialite.load(null,l,k,m)},process:function(l,m,k){f.Socialite.load(l,m,k,null,true)},network:function(l,k){i[l]={name:l,el:null,appended:false,loaded:false,widgets:{}};if(k){c.extendObject(i[l],k)}},widget:function(m,k,l){l.name=m+"-"+k;if(!i[m]||h[l.name]){return}l.network=i[m];i[m].widgets[k]=h[l.name]=l},setup:function(k){c.extendObject(c.settings,k,true)}};return c})(window,window.document);(function(g,h,d,c){d.setup({facebook:{lang:"en_GB",appId:null},twitter:{lang:"en"},googleplus:{lang:"en-GB"}});d.network("facebook",{script:{src:"//connect.facebook.net/{{language}}/all.js",id:"facebook-jssdk"},append:function(o){var n=h.createElement("div"),m=d.settings.facebook,l={onlike:"edge.create",onunlike:"edge.remove",onsend:"message.send"};n.id="fb-root";h.body.appendChild(n);o.script.src=o.script.src.replace("{{language}}",m.lang);g.fbAsyncInit=function(){g.FB.init({appId:m.appId,xfbml:true});for(var p in l){if(typeof m[p]==="function"){g.FB.Event.subscribe(l[p],m[p])}}}}});var j=function(l){var m=h.createElement("div");m.className=l.widget.fbtype;d.copyDataAttributes(l.el,m);l.el.appendChild(m);if(g.FB&&g.FB.XFBML){g.FB.XFBML.parse(l.el)}};d.widget("facebook","like",{init:j,fbtype:"fb-like"});d.widget("facebook","share",{init:j,fbtype:"fb-share-button"});d.network("twitter",{script:{src:"//platform.twitter.com/widgets.js",id:"twitter-wjs",charset:"utf-8"},append:function(){var n=(typeof g.twttr!=="object"),m=d.settings.twitter,l=["click","tweet","retweet","favorite","follow"];if(n){g.twttr=(t={_e:[],ready:function(o){t._e.push(o)}})}g.twttr.ready(function(o){for(var p=0;p<l.length;p++){var q=l[p];if(typeof m["on"+q]==="function"){o.events.bind(q,m["on"+q])}}d.activateAll("twitter")});return n}});var f=function(l){var m=h.createElement("a");m.className=l.widget.name+"-button";d.copyDataAttributes(l.el,m);m.setAttribute("href",l.el.getAttribute("data-default-href"));m.setAttribute("data-lang",l.el.getAttribute("data-lang")||d.settings.twitter.lang);l.el.appendChild(m)};var a=function(l){if(g.twttr&&typeof g.twttr.widgets==="object"&&typeof g.twttr.widgets.load==="function"){g.twttr.widgets.load()}};d.widget("twitter","share",{init:f,activate:a});d.widget("twitter","follow",{init:f,activate:a});d.widget("twitter","hashtag",{init:f,activate:a});d.widget("twitter","mention",{init:f,activate:a});d.widget("twitter","embed",{process:function(l){l.innerEl=l.el;if(!l.innerEl.getAttribute("data-lang")){l.innerEl.setAttribute("data-lang",d.settings.twitter.lang)}l.el=h.createElement("div");l.el.className=l.innerEl.className;l.innerEl.className="";l.innerEl.parentNode.insertBefore(l.el,l.innerEl);l.el.appendChild(l.innerEl)},init:function(l){l.innerEl.className="twitter-tweet"},activate:a});d.network("googleplus",{script:{src:"//apis.google.com/js/plusone.js"},append:function(l){if(g.gapi){return false}g.___gcfg={lang:d.settings.googleplus.lang,parsetags:"explicit"}}});var e=function(l){var m=h.createElement("div");m.className="g-"+l.widget.gtype;d.copyDataAttributes(l.el,m);l.el.appendChild(m);l.gplusEl=m};var k=function(l,m){return(typeof m!=="function")?null:function(n){m(l.el,n)}};var b=function(l){var p=l.widget.gtype;if(g.gapi&&g.gapi[p]){var o=d.settings.googleplus,q=d.getDataAttributes(l.el,true,true),n=["onstartinteraction","onendinteraction","callback"];for(var m=0;m<n.length;m++){q[n[m]]=k(l,o[n[m]])}g.gapi[p].render(l.gplusEl,q)}};d.widget("googleplus","one",{init:e,activate:b,gtype:"plusone"});d.widget("googleplus","share",{init:e,activate:b,gtype:"plus"});d.widget("googleplus","badge",{init:e,activate:b,gtype:"plus"});d.network("linkedin",{script:{src:"//platform.linkedin.com/in.js"}});var i=function(l){var m=h.createElement("script");m.type="IN/"+l.widget.intype;d.copyDataAttributes(l.el,m);l.el.appendChild(m);if(typeof g.IN==="object"&&typeof g.IN.parse==="function"){g.IN.parse(l.el);d.activateInstance(l)}};d.widget("linkedin","share",{init:i,intype:"Share"});d.widget("linkedin","recommend",{init:i,intype:"RecommendProduct"});d.widget("linkedin","follow",{init:i,intype:"FollowCompany"})})(window,window.document,window.Socialite);(function(){var c=window._socialite;if(/Array/.test(Object.prototype.toString.call(c))){for(var b=0,a=c.length;b<a;b++){if(typeof c[b]==="function"){c[b]()}}}})();


/*!
 * Socialite v2.0 - Facebook extension
 * http://socialitejs.com
 * Copyright (c) 2011 David Bushell
 * Dual-licensed under the BSD or MIT licenses: http://socialitejs.com/license.txt
 */
(function(b,f,d,h){d.setup({facebook:{lang:"en_GB",appId:null}});d.network("facebook",{script:{src:"//connect.facebook.net/{{language}}/all.js",id:"facebook-jssdk"},append:function(a){var c=f.createElement("div"),e=d.settings.facebook,g={onlike:"edge.create",onunlike:"edge.remove",onsend:"message.send",oncomment:"comment.create",onuncomment:"comment.remove"};c.id="fb-root";f.body.appendChild(c);a.script.src=a.script.src.replace("{{language}}",e.lang);b.fbAsyncInit=function(){b.FB.init({appId:e.appId,
xfbml:!0});for(var a in g)"function"===typeof e[a]&&b.FB.Event.subscribe(g[a],e[a])}}});d.widget("facebook","like",{init:function(a){var c=f.createElement("div");c.className="fb-like";d.copyDataAttributes(a.el,c);a.el.appendChild(c);b.FB&&b.FB.XFBML&&b.FB.XFBML.parse(a.el)}})})(window,window.document,window.Socialite);

/*!
 * Socialite v2.0 - Twitter extension
 * http://socialitejs.com
 * Copyright (c) 2011 David Bushell
 * Dual-licensed under the BSD or MIT licenses: http://socialitejs.com/license.txt
 */
(function(b,f,c,e){c.setup({twitter:{lang:"en"}});c.network("twitter",{script:{src:"//platform.twitter.com/widgets.js",id:"twitter-wjs",charset:"utf-8"},append:function(){var a="object"!==typeof b.twttr,g=c.settings.twitter,e=["click","tweet","retweet","favorite","follow"];a&&(b.twttr=t={_e:[],ready:function(a){t._e.push(a)}});b.twttr.ready(function(a){for(var b=0;b<e.length;b++){var d=e[b];"function"===typeof g["on"+d]&&a.events.bind(d,g["on"+d])}c.activateAll("twitter")});return a}});e=function(a){var b=
f.createElement("a");b.className=a.widget.name+"-button";c.copyDataAttributes(a.el,b);b.setAttribute("href",a.el.getAttribute("data-default-href"));b.setAttribute("data-lang",a.el.getAttribute("data-lang")||c.settings.twitter.lang);a.el.appendChild(b)};var d=function(a){b.twttr&&"object"===typeof b.twttr.widgets&&"function"===typeof b.twttr.widgets.load&&b.twttr.widgets.load()};c.widget("twitter","share",{init:e,activate:d});c.widget("twitter","follow",{init:e,activate:d});c.widget("twitter","hashtag",
{init:e,activate:d});c.widget("twitter","mention",{init:e,activate:d});c.widget("twitter","timeline",{init:e,activate:d});c.widget("twitter","embed",{process:function(a){a.innerEl=a.el;a.innerEl.getAttribute("data-lang")||a.innerEl.setAttribute("data-lang",c.settings.twitter.lang);a.el=f.createElement("div");a.el.className=a.innerEl.className;a.innerEl.className="";a.innerEl.parentNode.insertBefore(a.el,a.innerEl);a.el.appendChild(a.innerEl)},init:function(a){a.innerEl.className="twitter-tweet"},
activate:d})})(window,window.document,window.Socialite);
!function(){"use strict";function e(e){if(!e)throw"You must provide an URL to scrape (YQL).";this.url=e}function r(e){if(!e)throw"You must provide an URL to request (JSONP).";this.url=encodeURIComponent(e)}function a(e){this.attrs=e}function n(){return navigator.vendor&&navigator.vendor.indexOf("Apple")>-1&&navigator.userAgent&&!navigator.userAgent.match("CriOS")}e.prototype={select:function(e){return this.httpGet(this.buildQuery(e))},buildQuery:function(e){var t="where url='"+this.url+"'";for(var r in e)e[r]&&(t+=" and "+r+" = '"+e[r]+"'");return"select * from html "+t},httpGet:function(e){var t=jQuery.Deferred();return jQuery.ajax({url:"https://query.yahooapis.com/v1/public/yql",data:{q:e,format:"json",jsonCompat:"new"},dataType:"jsonp"}).done(function(e){e.query&&e.query.count?t.resolve(e.query.results):t.reject("No results found")}).error(t.reject),t.promise()}},r.prototype={select:function(e){var t=jQuery.Deferred(),r=e.xpath;return jQuery.ajax({url:"https://jsonp.afeld.me/?callback=?&url="+this.url,dataType:"jsonp"}).done(function(e){e&&e.data?t.resolve(jQuery(e.data).find(r)):t.reject("No results found")}).error(t.reject),t.promise()}};var o={t:t,render:function(e,t){var r=new o.t(document.getElementById("js-"+e+"-template").innerHTML);return r.render(t)}},i={_loading:!1,load:function(e,t){if(i._loading)return void setTimeout(i.load.bind(i,e,t),1e3);i._loading=!0;var r=jQuery("<iframe>",{src:e.src,width:e.width,height:e.height}).css("display","none"),a=jQuery(t).find(".placeholder.loading");a.children().replaceWith(r),r.load(function(){a.removeClass("placeholder loading"),r.slideDown(),i._loading=!1})}},s=function(e){this.type=e,this.id="js-"+this.type+"-items",this.el=document.getElementById(this.id)};s.prototype={appendImages:function(e){e.forEach(this.appendImage.bind(this))},appendImage:function(e){var t=document.createElement("img");t.src=e.src,t.className="img-responsive";var r=jQuery("<a>",{href:e.src,"data-lightbox":this.type}).append(t),a=jQuery("<div>",{"class":"col-xs-12 col-sm-6 col-md-4","data-toggle":"tooltip","data-placement":"top",title:e.title});a.append(r).appendTo(this.el),t.onerror=function(){a.remove()}},placeholder:function(e){jQuery("<div>",{"class":"col-xs-12 placeholder"}).append(e).appendTo(this.el)},iframe:function(e){i.load(e,this.el)},loading:function(){jQuery(this.el).find(".placeholder").addClass("loading")}},a.prototype={render:function(){return jQuery("#js-main").append(o.render("supermarket",this.attrs)),this.load()},load:function(){return this.select().done(this.appendFromResults.bind(this)).fail(this.appendFallbackIframe.bind(this))},select:function(){var t=this.attrs.jsonp?r:e;if(this.attrs.links){var a=this.attrs.links.map(function(e){return new t(e).select({xpath:this.attrs.select})},this);return jQuery.when.apply(jQuery,a)}return new t(this.attrs.link).select({xpath:this.attrs.select})},appendFromResults:function(e){var t=this.attrs.extractOffers(1===arguments.length?e:Array.prototype.slice.call(arguments));new s(this.attrs.key).appendImages(t)},appendFallbackIframe:function(e){var t=this.attrs.link,r=new s(this.attrs.key),a=o.render("notice",{link:t});if(n())return void r.placeholder(a);var i=jQuery("<span>",{"class":"js-iframe-notice",html:a+" o "});jQuery("<a>",{href:t,text:"cargarlo aquí"}).on("click",function(){return r.loading(),r.iframe({src:t,width:"100%",height:"1000"}),!1}).appendTo(i);r.placeholder(i)}};var c=[{key:"carrefour",name:"Carrefour",link:"http://www.carrefour.com.ar/promociones",select:'//div[contains(@class, "promo-landing-content-principal-image")]/img',extractOffers:function(e){return e.img.length?e.img:[e.img]}},{key:"coto",name:"Coto",link:"http://www.coto.com.ar/ofertas/revista-de-ofertas/ie.html",select:'//div[contains(@class, "list_images")]/img',extractOffers:function(e){return e.img.map(function(e){return{src:"http://www.coto.com.ar/ofertas/revista-de-ofertas/"+e.src}})}},{key:"dia",name:"Dia",link:"https://www.supermercadosdia.com.ar/ofertas/",links:["https://www.supermercadosdia.com.ar/category/dia-market","https://www.supermercadosdia.com.ar/category/dia-mini","https://www.supermercadosdia.com.ar/category/dia-plus"],select:'//ul[contains(@class, "slides")]/li/img',extractOffers:function(e){var t=["Dia Market","Dia Mini","Dia Plus"],r=[];return e.forEach(function(e,a){var n=t[a];e.img.length||(e.img=[e.img]),e.img.forEach(function(e){r.push({src:e.src,title:n})})}),r}},{key:"diaahorrames",name:"Dia (ahorrames)",link:"https://www.supermercadosdia.com.ar/ahorramesdia/",select:'//img[contains(@class, "aligncenter")]',extractOffers:function(e){return[{src:e.img.src}]}},{key:"jumbo",name:"Jumbo",link:"https://www.jumbo.com.ar/Comprar/Home.aspx#_atCategory=true&_atGrilla=false&_id=5",select:'//div[@class="owl-item"]/img[@class="desktop"]',extractOffers:function(e){return e.img}},{key:"disco",name:"Disco",link:"https://www.disco.com.ar/Comprar/Home.aspx#_atCategory=true&_atGrilla=false&_id=75",select:'//div[@class="owl-item"]/img[@class="desktop"]',extractOffers:function(e){return e.img}}],l=c.map(function(e){return new a(e).render()});jQuery.when.apply(jQuery,l).always(function(){window.scrollTo(0,0),jQuery("body").scrollspy({target:"#navbar-supermarkets",offset:60}),imagesLoaded(document.getElementById("js-main"),function(){setTimeout(function(){jQuery("#js-social-buttons").trigger("mouseover")},1e3),jQuery("#js-loading").fadeOut("fast"),jQuery("#js-footer").removeClass("hidden"),jQuery('[data-toggle="tooltip"]').tooltip()})}),jQuery(".js-supermarket-nav").on("click",function(e){var t=this.hash;e.preventDefault(),jQuery("html, body").animate({scrollTop:jQuery(t).offset().top},300,function(){window.location.hash=t})}),jQuery("#js-main").on("click",".js-supermarket-hide",function(e){var t=jQuery(this).data("selector");this.innerText={"Ocultar ↑":"Mostrar ↓","Mostrar ↓":"Ocultar ↑"}[this.innerText],jQuery(t).toggleClass("collapse"),e.preventDefault()}).on("click",".js-caption-link",function(e){var t=jQuery(this).data("selector");jQuery(t).click(),e.preventDefault()}),jQuery("#js-social-buttons").one("mouseover",function(){Socialite.setup({facebook:{lang:"es_LA"},twitter:{lang:"es_LA"}}),Socialite.load()}),lightbox.option({albumLabel:"%1 / %2"})}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiWVFMIiwidXJsIiwidGhpcyIsIkpTT05QIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwiU3VwZXJtYXJrZXQiLCJhdHRycyIsImlzU2FmYXJpIiwibmF2aWdhdG9yIiwidmVuZG9yIiwiaW5kZXhPZiIsInVzZXJBZ2VudCIsIm1hdGNoIiwicHJvdG90eXBlIiwic2VsZWN0Iiwid2hlcmVDbGF1c2UiLCJodHRwR2V0IiwiYnVpbGRRdWVyeSIsIndoZXJlIiwicHJvcCIsInF1ZXJ5IiwiZGVmZXJyZWQiLCJqUXVlcnkiLCJEZWZlcnJlZCIsImFqYXgiLCJkYXRhIiwicSIsImZvcm1hdCIsImpzb25Db21wYXQiLCJkYXRhVHlwZSIsImRvbmUiLCJjb250ZW50IiwiY291bnQiLCJyZXNvbHZlIiwicmVzdWx0cyIsInJlamVjdCIsImVycm9yIiwicHJvbWlzZSIsInNlbGVjdG9yIiwieHBhdGgiLCJmaW5kIiwidGVtcGxhdGUiLCJ0IiwicmVuZGVyIiwibmFtZSIsImh0bWxUZW1wbGF0ZSIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJpbm5lckhUTUwiLCJpZnJhbWUiLCJfbG9hZGluZyIsImxvYWQiLCJwYXJlbnQiLCJzZXRUaW1lb3V0IiwiYmluZCIsIiRpZnJhbWUiLCJzcmMiLCJ3aWR0aCIsImhlaWdodCIsImNzcyIsIiRwbGFjZWhvbGRlciIsImNoaWxkcmVuIiwicmVwbGFjZVdpdGgiLCJyZW1vdmVDbGFzcyIsInNsaWRlRG93biIsIkh0bWxDb250YWluZXIiLCJ0eXBlIiwiaWQiLCJlbCIsImFwcGVuZEltYWdlcyIsImltYWdlcyIsImZvckVhY2giLCJhcHBlbmRJbWFnZSIsImltZyIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc05hbWUiLCIkYSIsImhyZWYiLCJkYXRhLWxpZ2h0Ym94IiwiYXBwZW5kIiwiJGNvbCIsImNsYXNzIiwiZGF0YS10b2dnbGUiLCJkYXRhLXBsYWNlbWVudCIsInRpdGxlIiwiYXBwZW5kVG8iLCJvbmVycm9yIiwicmVtb3ZlIiwicGxhY2Vob2xkZXIiLCJjaGlsZCIsImxvYWRpbmciLCJhZGRDbGFzcyIsImFwcGVuZEZyb21SZXN1bHRzIiwiZmFpbCIsImFwcGVuZEZhbGxiYWNrSWZyYW1lIiwiQ2xpZW50IiwianNvbnAiLCJsaW5rcyIsInByb21pc2VzIiwibWFwIiwibGluayIsIndoZW4iLCJhcHBseSIsImV4dHJhY3RPZmZlcnMiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJBcnJheSIsInNsaWNlIiwiY2FsbCIsImtleSIsImNvbnRhaW5lciIsIm5vdGljZUhUTUwiLCJwbGFjZWhvbGRlckNoaWxkIiwiaHRtbCIsInRleHQiLCJvbiIsIlNVUEVSTUFSS0VUUyIsInJlc3VsdHNBcnJheSIsInN1cGVybWFya2V0cyIsInJlc3VsdCIsInJlc3BvbnNlIiwiaW5kZXgiLCJwdXNoIiwiYXR0cmlidXRlcyIsImFsd2F5cyIsIndpbmRvdyIsInNjcm9sbFRvIiwic2Nyb2xsc3B5IiwidGFyZ2V0Iiwib2Zmc2V0IiwiaW1hZ2VzTG9hZGVkIiwidHJpZ2dlciIsImZhZGVPdXQiLCJ0b29sdGlwIiwiZXZlbnQiLCJoYXNoIiwicHJldmVudERlZmF1bHQiLCJhbmltYXRlIiwic2Nyb2xsVG9wIiwidG9wIiwibG9jYXRpb24iLCJpbm5lclRleHQiLCJPY3VsdGFyIOKGkSIsIk1vc3RyYXIg4oaTIiwidG9nZ2xlQ2xhc3MiLCJjbGljayIsIm9uZSIsIlNvY2lhbGl0ZSIsInNldHVwIiwiZmFjZWJvb2siLCJsYW5nIiwidHdpdHRlciIsImxpZ2h0Ym94Iiwib3B0aW9uIiwiYWxidW1MYWJlbCJdLCJtYXBwaW5ncyI6IkNBQUEsV0FDRSxZQUtBLFNBQVNBLEdBQUlDLEdBQ1gsSUFBS0EsRUFBSyxLQUFNLDBDQUNoQkMsTUFBS0QsSUFBTUEsRUEyQ2IsUUFBU0UsR0FBTUYsR0FDYixJQUFLQSxFQUFLLEtBQU0sNkNBQ2hCQyxNQUFLRCxJQUFNRyxtQkFBbUJILEdBOEhoQyxRQUFTSSxHQUFZQyxHQUNuQkosS0FB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RixHQUFHLFFBQVMsdUJBQXdCLFNBQVNtQixHQUM1QyxHQUFJaEcsR0FBV2hCLE9BQU9wQixNQUFNdUIsS0FBSyxXQUVqQ3ZCLE1BQUsySSxXQUNIQyxZQUFhLFlBQ2JDLFlBQWEsYUFDYjdJLEtBQUsySSxXQUVQdkgsT0FBT2dCLEdBQVUwRyxZQUFZLFlBQzdCVixFQUFNRSxtQkFFUHJCLEdBQUcsUUFBUyxtQkFBb0IsU0FBU21CLEdBQ3hDLEdBQUloRyxHQUFXaEIsT0FBT3BCLE1BQU11QixLQUFLLFdBQ2pDSCxRQUFPZ0IsR0FBVTJHLFFBQ2pCWCxFQUFNRSxtQkFNVmxILE9BQU8sc0JBQXNCNEgsSUFBSSxZQUFhLFdBQzVDQyxVQUFVQyxPQUNSQyxVQUFZQyxLQUFNLFNBQ2xCQyxTQUFZRCxLQUFNLFdBRXBCSCxVQUFVaEcsU0FNWnFHLFNBQVNDLFFBQVNDLFdBQVkiLCJmaWxlIjoiYWxsLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpIHtcbiAgJ3VzZSBzdHJpY3QnXG5cbiAgLy9cbiAgLy8gUmVxdWVzdHMgdG8gdGhlIHdlYi4gVXNpbmcgWVFMIG9mIEpTT05QXG5cbiAgZnVuY3Rpb24gWVFMKHVybCkge1xuICAgIGlmICghdXJsKSB0aHJvdyBcIllvdSBtdXN0IHByb3ZpZGUgYW4gVVJMIHRvIHNjcmFwZSAoWVFMKS5cIlxuICAgIHRoaXMudXJsID0gdXJsXG4gIH1cblxuICBZUUwucHJvdG90eXBlID0ge1xuICAgIHNlbGVjdDogZnVuY3Rpb24gKHdoZXJlQ2xhdXNlKSB7XG4gICAgICByZXR1cm4gdGhpcy5odHRwR2V0KFxuICAgICAgICB0aGlzLmJ1aWxkUXVlcnkod2hlcmVDbGF1c2UpXG4gICAgICApXG4gICAgfSxcblxuICAgIGJ1aWxkUXVlcnk6IGZ1bmN0aW9uICh3aGVyZUNsYXVzZSkge1xuICAgICAgdmFyIHdoZXJlID0gXCJ3aGVyZSB1cmw9J1wiICsgdGhpcy51cmwgKyBcIidcIlxuICAgICAgZm9yKHZhciBwcm9wIGluIHdoZXJlQ2xhdXNlKSB7XG4gICAgICAgIGlmICh3aGVyZUNsYXVzZVtwcm9wXSkge1xuICAgICAgICAgIHdoZXJlICs9IFwiIGFuZCBcIiArIHByb3AgKyBcIiA9ICdcIiArIHdoZXJlQ2xhdXNlW3Byb3BdICsgXCInXCJcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIFwic2VsZWN0ICogZnJvbSBodG1sIFwiICsgd2hlcmVcbiAgICB9LFxuXG4gICAgaHR0cEdldDogZnVuY3Rpb24gKHF1ZXJ5KSB7XG4gICAgICB2YXIgZGVmZXJyZWQgPSBqUXVlcnkuRGVmZXJyZWQoKVxuXG4gICAgICBqUXVlcnkuYWpheCh7XG4gICAgICAgIHVybDogJ2h0dHBzOi8vcXVlcnkueWFob29hcGlzLmNvbS92MS9wdWJsaWMveXFsJyxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIHE6IHF1ZXJ5LFxuICAgICAgICAgIGZvcm1hdDogJ2pzb24nLFxuICAgICAgICAgIGpzb25Db21wYXQ6ICduZXcnLFxuICAgICAgICB9LFxuICAgICAgICBkYXRhVHlwZTogJ2pzb25wJ1xuICAgICAgfSkuZG9uZShmdW5jdGlvbiAoY29udGVudCkge1xuICAgICAgICBpZiAoY29udGVudC5xdWVyeSAmJiBjb250ZW50LnF1ZXJ5LmNvdW50KSB7XG4gICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShjb250ZW50LnF1ZXJ5LnJlc3VsdHMpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGVmZXJyZWQucmVqZWN0KCdObyByZXN1bHRzIGZvdW5kJylcbiAgICAgICAgfVxuICAgICAgfSkuZXJyb3IoZGVmZXJyZWQucmVqZWN0KVxuXG4gICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZSgpXG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gSlNPTlAodXJsKSB7XG4gICAgaWYgKCF1cmwpIHRocm93IFwiWW91IG11c3QgcHJvdmlkZSBhbiBVUkwgdG8gcmVxdWVzdCAoSlNPTlApLlwiXG4gICAgdGhpcy51cmwgPSBlbmNvZGVVUklDb21wb25lbnQodXJsKVxuICB9XG5cbiAgSlNPTlAucHJvdG90eXBlID0ge1xuICAgIHNlbGVjdDogZnVuY3Rpb24gKHdoZXJlQ2xhdXNlKSB7XG4gICAgICB2YXIgZGVmZXJyZWQgPSBqUXVlcnkuRGVmZXJyZWQoKVxuICAgICAgdmFyIHNlbGVjdG9yID0gd2hlcmVDbGF1c2UueHBhdGhcblxuICAgICAgalF1ZXJ5LmFqYXgoe1xuICAgICAgICB1cmw6ICdodHRwczovL2pzb25wLmFmZWxkLm1lLz9jYWxsYmFjaz0/JnVybD0nICsgdGhpcy51cmwsXG4gICAgICAgIGRhdGFUeXBlOiAnanNvbnAnXG4gICAgICB9KS5kb25lKGZ1bmN0aW9uIChjb250ZW50KSB7XG4gICAgICAgIGlmIChjb250ZW50ICYmIGNvbnRlbnQuZGF0YSkge1xuICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoXG4gICAgICAgICAgICBqUXVlcnkoY29udGVudC5kYXRhKS5maW5kKHNlbGVjdG9yKVxuICAgICAgICAgIClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkZWZlcnJlZC5yZWplY3QoJ05vIHJlc3VsdHMgZm91bmQnKVxuICAgICAgICB9XG4gICAgICB9KS5lcnJvcihkZWZlcnJlZC5yZWplY3QpXG5cbiAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlKClcbiAgICB9XG4gIH1cblxuICAvL1xuICAvLyBUZW1wbGF0ZSBzaW5nbGV0b25cblxuICB2YXIgdGVtcGxhdGUgPSB7XG4gICAgLy8gQXZvaWQgZXh0ZXJuYWwgc2NyaXB0cyBmcm9tIG92ZXJyaWRpbmcgdGhlIGdsb2JhbCB0ZW1wbGF0ZSBvYmplY3RcbiAgICB0OiB0LFxuICAgIHJlbmRlcjogZnVuY3Rpb24gKG5hbWUsIGRhdGEpIHtcbiAgICAgIHZhciBodG1sVGVtcGxhdGUgPSBuZXcgdGVtcGxhdGUudChcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2pzLScgKyBuYW1lICsgJy10ZW1wbGF0ZScpLmlubmVySFRNTFxuICAgICAgKVxuICAgICAgcmV0dXJuIGh0bWxUZW1wbGF0ZS5yZW5kZXIoZGF0YSlcbiAgICB9XG4gIH1cblxuICAvL1xuICAvLyBJZnJhbWUgc2luZ2xldG9uXG5cbiAgdmFyIGlmcmFtZSA9IHtcbiAgICBfbG9hZGluZzogZmFsc2UsXG4gICAgbG9hZDogZnVuY3Rpb24gKGF0dHJzLCBwYXJlbnQpIHtcbiAgICAgIGlmIChpZnJhbWUuX2xvYWRpbmcpIHtcbiAgICAgICAgc2V0VGltZW91dChpZnJhbWUubG9hZC5iaW5kKGlmcmFtZSwgYXR0cnMsIHBhcmVudCksIDEwMDApXG4gICAgICAgIHJldHVyblxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWZyYW1lLl9sb2FkaW5nID0gdHJ1ZVxuICAgICAgfVxuXG4gICAgICB2YXIgJGlmcmFtZSA9IGpRdWVyeSgnPGlmcmFtZT4nLCB7XG4gICAgICAgIHNyYyAgIDogYXR0cnMuc3JjLFxuICAgICAgICB3aWR0aCA6IGF0dHJzLndpZHRoLFxuICAgICAgICBoZWlnaHQ6IGF0dHJzLmhlaWdodFxuICAgICAgfSlcbiAgICAgIC5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpXG5cbiAgICAgIHZhciAkcGxhY2Vob2xkZXIgPSBqUXVlcnkocGFyZW50KS5maW5kKCcucGxhY2Vob2xkZXIubG9hZGluZycpXG5cbiAgICAgICRwbGFjZWhvbGRlci5jaGlsZHJlbigpLnJlcGxhY2VXaXRoKCRpZnJhbWUpXG5cbiAgICAgICRpZnJhbWUubG9hZChmdW5jdGlvbiAoKSB7XG4gICAgICAgICRwbGFjZWhvbGRlci5yZW1vdmVDbGFzcygncGxhY2Vob2xkZXIgbG9hZGluZycpXG4gICAgICAgICRpZnJhbWUuc2xpZGVEb3duKClcbiAgICAgICAgaWZyYW1lLl9sb2FkaW5nID0gZmFsc2VcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cblxuICAvL1xuICAvLyBIZWxwcyBidWlsZGluZyB0aGUgZWxlbWVudCB0aGF0IGNvbnRhaW5zIHRoZSBkYXRhXG5cbiAgdmFyIEh0bWxDb250YWluZXIgPSBmdW5jdGlvbiAodHlwZSkge1xuICAgIHRoaXMudHlwZSA9IHR5cGVcbiAgICB0aGlzLmlkID0gJ2pzLScgKyB0aGlzLnR5cGUgKyAnLWl0ZW1zJ1xuICAgIHRoaXMuZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmlkKVxuICB9XG5cbiAgSHRtbENvbnRhaW5lci5wcm90b3R5cGUgPSB7XG4gICAgYXBwZW5kSW1hZ2VzOiBmdW5jdGlvbihpbWFnZXMpIHtcbiAgICAgIGltYWdlcy5mb3JFYWNoKHRoaXMuYXBwZW5kSW1hZ2UuYmluZCh0aGlzKSlcbiAgICB9LFxuXG4gICAgYXBwZW5kSW1hZ2U6IGZ1bmN0aW9uKGF0dHJzKSB7XG4gICAgICB2YXIgaW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJylcbiAgICAgIGltZy5zcmMgPSBhdHRycy5zcmNcbiAgICAgIGltZy5jbGFzc05hbWUgPSAnaW1nLXJlc3BvbnNpdmUnXG5cbiAgICAgIHZhciAkYSA9IGpRdWVyeSgnPGE+Jywge1xuICAgICAgICAnaHJlZic6IGF0dHJzLnNyYyxcbiAgICAgICAgJ2RhdGEtbGlnaHRib3gnOiB0aGlzLnR5cGVcbiAgICAgIH0pLmFwcGVuZChpbWcpXG5cbiAgICAgIHZhciAkY29sID0galF1ZXJ5KCc8ZGl2PicsIHtcbiAgICAgICAgJ2NsYXNzJyAgICAgICAgIDogJ2NvbC14cy0xMiBjb2wtc20tNiBjb2wtbWQtNCcsXG4gICAgICAgICdkYXRhLXRvZ2dsZScgICA6ICd0b29sdGlwJyxcbiAgICAgICAgJ2RhdGEtcGxhY2VtZW50JzogJ3RvcCcsXG4gICAgICAgICd0aXRsZScgICAgICAgICA6IGF0dHJzLnRpdGxlXG4gICAgICB9KVxuICAgICAgXG4gICAgICAkY29sLmFwcGVuZCgkYSkuYXBwZW5kVG8odGhpcy5lbClcblxuICAgICAgaW1nLm9uZXJyb3IgPSBmdW5jdGlvbigpIHsgJGNvbC5yZW1vdmUoKSB9XG4gICAgfSxcblxuICAgIHBsYWNlaG9sZGVyOiBmdW5jdGlvbiAoY2hpbGQpIHtcbiAgICAgIGpRdWVyeSgnPGRpdj4nLCB7ICdjbGFzcyc6ICdjb2wteHMtMTIgcGxhY2Vob2xkZXInIH0pXG4gICAgICAgIC5hcHBlbmQoY2hpbGQpXG4gICAgICAgIC5hcHBlbmRUbyh0aGlzLmVsKVxuICAgIH0sXG5cbiAgICBpZnJhbWU6IGZ1bmN0aW9uIChhdHRycykge1xuICAgICAgaWZyYW1lLmxvYWQoYXR0cnMsIHRoaXMuZWwpXG4gICAgfSxcblxuICAgIGxvYWRpbmc6IGZ1bmN0aW9uICgpIHtcbiAgICAgIGpRdWVyeSh0aGlzLmVsKS5maW5kKCcucGxhY2Vob2xkZXInKS5hZGRDbGFzcygnbG9hZGluZycpXG4gICAgfVxuICB9XG5cbiAgLy9cbiAgLy8gVXNlcyB0aGUgb3RoZXIgb2JqZWN0cyB0byBzaG93IHN1cGVybWFya2V0IGRhdGEgb24gdGhlIERPTVxuXG4gIGZ1bmN0aW9uIFN1cGVybWFya2V0KGF0dHJzKSB7XG4gICAgdGhpcy5hdHRycyAgPSBhdHRyc1xuICB9XG5cbiAgU3VwZXJtYXJrZXQucHJvdG90eXBlID0ge1xuICAgIHJlbmRlcjogZnVuY3Rpb24gKCkge1xuICAgICAgalF1ZXJ5KCcjanMtbWFpbicpLmFwcGVuZChcbiAgICAgICAgdGVtcGxhdGUucmVuZGVyKCdzdXBlcm1hcmtldCcsIHRoaXMuYXR0cnMpXG4gICAgICApXG4gICAgICByZXR1cm4gdGhpcy5sb2FkKClcbiAgICB9LFxuXG4gICAgbG9hZDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuc2VsZWN0KClcbiAgICAgICAgLmRvbmUodGhpcy5hcHBlbmRGcm9tUmVzdWx0cy5iaW5kKHRoaXMpKVxuICAgICAgICAuZmFpbCh0aGlzLmFwcGVuZEZhbGxiYWNrSWZyYW1lLmJpbmQodGhpcykpXG4gICAgfSxcblxuICAgIHNlbGVjdDogZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIENsaWVudCA9IHRoaXMuYXR0cnMuanNvbnAgPyBKU09OUCA6IFlRTFxuXG4gICAgICBpZiAodGhpcy5hdHRycy5saW5rcykge1xuICAgICAgICB2YXIgcHJvbWlzZXMgPSB0aGlzLmF0dHJzLmxpbmtzLm1hcChmdW5jdGlvbihsaW5rKSB7XG4gICAgICAgICAgcmV0dXJuIG5ldyBDbGllbnQobGluaykuc2VsZWN0KHsgeHBhdGg6IHRoaXMuYXR0cnMuc2VsZWN0IH0pXG4gICAgICAgIH0sIHRoaXMpXG5cbiAgICAgICAgcmV0dXJuIGpRdWVyeS53aGVuLmFwcGx5KGpRdWVyeSwgcHJvbWlzZXMpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gbmV3IENsaWVudCh0aGlzLmF0dHJzLmxpbmspLnNlbGVjdCh7IHhwYXRoOiB0aGlzLmF0dHJzLnNlbGVjdCB9KVxuICAgICAgfVxuICAgIH0sXG5cbiAgICBhcHBlbmRGcm9tUmVzdWx0czogZnVuY3Rpb24gKHJlc3VsdHMpIHtcbiAgICAgIHZhciBpbWFnZXMgPSB0aGlzLmF0dHJzLmV4dHJhY3RPZmZlcnMoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSA/IHJlc3VsdHMgOiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpKVxuICAgICAgbmV3IEh0bWxDb250YWluZXIodGhpcy5hdHRycy5rZXkpLmFwcGVuZEltYWdlcyhpbWFnZXMpXG4gICAgfSxcblxuICAgIGFwcGVuZEZhbGxiYWNrSWZyYW1lOiBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgIHZhciBsaW5rID0gdGhpcy5hdHRycy5saW5rXG4gICAgICB2YXIgY29udGFpbmVyID0gbmV3IEh0bWxDb250YWluZXIodGhpcy5hdHRycy5rZXkpXG4gICAgICB2YXIgbm90aWNlSFRNTCA9IHRlbXBsYXRlLnJlbmRlcignbm90aWNlJywgeyBsaW5rOiBsaW5rIH0pXG4gICAgICBcbiAgICAgIGlmIChpc1NhZmFyaSgpKSB7XG4gICAgICAgIGNvbnRhaW5lci5wbGFjZWhvbGRlcihub3RpY2VIVE1MKVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgdmFyIHBsYWNlaG9sZGVyQ2hpbGQgPSBqUXVlcnkoJzxzcGFuPicsIHtcbiAgICAgICAgXCJjbGFzc1wiOiAnanMtaWZyYW1lLW5vdGljZScsXG4gICAgICAgIFwiaHRtbFwiOiBub3RpY2VIVE1MICsgJyBvICdcbiAgICAgIH0pXG5cbiAgICAgIHZhciBsb2FkSWZyYW1lTGluayA9IGpRdWVyeSgnPGE+Jywge1xuICAgICAgICAgIGhyZWY6IGxpbmssXG4gICAgICAgICAgdGV4dDogJ2NhcmdhcmxvIGFxdcOtJ1xuICAgICAgICB9KS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgY29udGFpbmVyLmxvYWRpbmcoKVxuICAgICAgICAgIGNvbnRhaW5lci5pZnJhbWUoe1xuICAgICAgICAgICAgc3JjICAgOiBsaW5rLFxuICAgICAgICAgICAgd2lkdGggOiAnMTAwJScsXG4gICAgICAgICAgICBoZWlnaHQ6ICcxMDAwJ1xuICAgICAgICAgIH0pXG4gICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgIH0pXG4gICAgICAgIC5hcHBlbmRUbyhwbGFjZWhvbGRlckNoaWxkKVxuXG4gICAgICBjb250YWluZXIucGxhY2Vob2xkZXIocGxhY2Vob2xkZXJDaGlsZClcbiAgICB9XG4gIH1cblxuICAvL1xuICAvLyBGZXRjaCBhbmQgcmVuZGVyXG5cbiAgdmFyIFNVUEVSTUFSS0VUUyA9IFtcbiAgICB7XG4gICAgICBrZXkgICA6ICdjYXJyZWZvdXInLFxuICAgICAgbmFtZSAgOiAnQ2FycmVmb3VyJyxcbiAgICAgIGxpbmsgIDogJ2h0dHA6Ly93d3cuY2FycmVmb3VyLmNvbS5hci9wcm9tb2Npb25lcycsXG4gICAgICBzZWxlY3Q6ICcvL2Rpdltjb250YWlucyhAY2xhc3MsIFwicHJvbW8tbGFuZGluZy1jb250ZW50LXByaW5jaXBhbC1pbWFnZVwiKV0vaW1nJyxcbiAgICAgIGV4dHJhY3RPZmZlcnM6IGZ1bmN0aW9uIChyZXN1bHRzKSB7IHJldHVybiByZXN1bHRzLmltZy5sZW5ndGggPyByZXN1bHRzLmltZyA6IFtyZXN1bHRzLmltZ10gfVxuICAgIH0sXG4gICAge1xuICAgICAga2V5ICAgOiAnY290bycsXG4gICAgICBuYW1lICA6ICdDb3RvJyxcbiAgICAgIGxpbmsgIDogJ2h0dHA6Ly93d3cuY290by5jb20uYXIvb2ZlcnRhcy9yZXZpc3RhLWRlLW9mZXJ0YXMvaWUuaHRtbCcsXG4gICAgICBzZWxlY3Q6ICcvL2Rpdltjb250YWlucyhAY2xhc3MsIFwibGlzdF9pbWFnZXNcIildL2ltZycsXG4gICAgICBleHRyYWN0T2ZmZXJzOiBmdW5jdGlvbiAocmVzdWx0cykge1xuICAgICAgICByZXR1cm4gcmVzdWx0cy5pbWcubWFwKGZ1bmN0aW9uIChpbWcpIHtcbiAgICAgICAgICByZXR1cm4geyBzcmM6ICdodHRwOi8vd3d3LmNvdG8uY29tLmFyL29mZXJ0YXMvcmV2aXN0YS1kZS1vZmVydGFzLycgKyBpbWcuc3JjIH1cbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgIGtleSAgIDogJ2RpYScsXG4gICAgICBuYW1lICA6ICdEaWEnLFxuICAgICAgbGluayAgOiAnaHR0cHM6Ly93d3cuc3VwZXJtZXJjYWRvc2RpYS5jb20uYXIvb2ZlcnRhcy8nLFxuICAgICAgbGlua3MgOiBbXG4gICAgICAgICdodHRwczovL3d3dy5zdXBlcm1lcmNhZG9zZGlhLmNvbS5hci9jYXRlZ29yeS9kaWEtbWFya2V0JyxcbiAgICAgICAgJ2h0dHBzOi8vd3d3LnN1cGVybWVyY2Fkb3NkaWEuY29tLmFyL2NhdGVnb3J5L2RpYS1taW5pJyxcbiAgICAgICAgJ2h0dHBzOi8vd3d3LnN1cGVybWVyY2Fkb3NkaWEuY29tLmFyL2NhdGVnb3J5L2RpYS1wbHVzJ1xuICAgICAgXSxcbiAgICAgIHNlbGVjdDogJy8vdWxbY29udGFpbnMoQGNsYXNzLCBcInNsaWRlc1wiKV0vbGkvaW1nJyxcbiAgICAgIGV4dHJhY3RPZmZlcnM6IGZ1bmN0aW9uIChyZXN1bHRzQXJyYXkpIHtcbiAgICAgICAgdmFyIHN1cGVybWFya2V0cyA9IFsnRGlhIE1hcmtldCcsICdEaWEgTWluaScsICdEaWEgUGx1cyddXG4gICAgICAgIHZhciByZXN1bHQgPSBbXVxuXG4gICAgICAgIHJlc3VsdHNBcnJheS5mb3JFYWNoKGZ1bmN0aW9uIChyZXNwb25zZSwgaW5kZXgpIHtcbiAgICAgICAgICB2YXIgdGl0bGUgPSBzdXBlcm1hcmtldHNbaW5kZXhdXG5cbiAgICAgICAgICBpZiAoISByZXNwb25zZS5pbWcubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXNwb25zZS5pbWcgPSBbcmVzcG9uc2UuaW1nXVxuICAgICAgICAgIH1cblxuICAgICAgICAgIHJlc3BvbnNlLmltZy5mb3JFYWNoKGZ1bmN0aW9uIChpbWcpIHtcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKHsgc3JjOiBpbWcuc3JjLCB0aXRsZTogdGl0bGUgfSlcbiAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxuICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAga2V5ICAgOiAnZGlhYWhvcnJhbWVzJyxcbiAgICAgIG5hbWUgIDogJ0RpYSAoYWhvcnJhbWVzKScsXG4gICAgICBsaW5rICA6ICdodHRwczovL3d3dy5zdXBlcm1lcmNhZG9zZGlhLmNvbS5hci9haG9ycmFtZXNkaWEvJyxcbiAgICAgIHNlbGVjdDogJy8vaW1nW2NvbnRhaW5zKEBjbGFzcywgXCJhbGlnbmNlbnRlclwiKV0nLFxuICAgICAgZXh0cmFjdE9mZmVyczogZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICByZXR1cm4gW3sgc3JjOiByZXN1bHQuaW1nLnNyYyB9XVxuICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAga2V5ICAgOiAnanVtYm8nLFxuICAgICAgbmFtZSAgOiAnSnVtYm8nLFxuICAgICAgbGluayAgOiAnaHR0cHM6Ly93d3cuanVtYm8uY29tLmFyL0NvbXByYXIvSG9tZS5hc3B4I19hdENhdGVnb3J5PXRydWUmX2F0R3JpbGxhPWZhbHNlJl9pZD01JyxcbiAgICAgIHNlbGVjdDogJy8vZGl2W0BjbGFzcz1cIm93bC1pdGVtXCJdL2ltZ1tAY2xhc3M9XCJkZXNrdG9wXCJdJyxcbiAgICAgIGV4dHJhY3RPZmZlcnM6IGZ1bmN0aW9uIChyZXN1bHRzKSB7IHJldHVybiByZXN1bHRzLmltZyB9XG4gICAgfSxcbiAgICB7XG4gICAgICBrZXkgICA6ICdkaXNjbycsXG4gICAgICBuYW1lICA6ICdEaXNjbycsXG4gICAgICBsaW5rICA6ICdodHRwczovL3d3dy5kaXNjby5jb20uYXIvQ29tcHJhci9Ib21lLmFzcHgjX2F0Q2F0ZWdvcnk9dHJ1ZSZfYXRHcmlsbGE9ZmFsc2UmX2lkPTc1JyxcbiAgICAgIHNlbGVjdDogJy8vZGl2W0BjbGFzcz1cIm93bC1pdGVtXCJdL2ltZ1tAY2xhc3M9XCJkZXNrdG9wXCJdJyxcbiAgICAgIGV4dHJhY3RPZmZlcnM6IGZ1bmN0aW9uIChyZXN1bHRzKSB7IHJldHVybiByZXN1bHRzLmltZyB9XG4gICAgfSxcbiAgXVxuXG4gIC8vXG4gIC8vIExvYWQgc3VwZXJtYXJrZXQgb2ZmZXJzXG5cbiAgdmFyIHByb21pc2VzID0gU1VQRVJNQVJLRVRTLm1hcChmdW5jdGlvbiAoYXR0cmlidXRlcykge1xuICAgIHJldHVybiBuZXcgU3VwZXJtYXJrZXQoYXR0cmlidXRlcykucmVuZGVyKClcbiAgfSlcblxuICBqUXVlcnkud2hlbi5hcHBseShqUXVlcnksIHByb21pc2VzKS5hbHdheXMoZnVuY3Rpb24gKCkge1xuICAgIHdpbmRvdy5zY3JvbGxUbygwLCAwKVxuICAgIGpRdWVyeSgnYm9keScpLnNjcm9sbHNweSh7IHRhcmdldDogJyNuYXZiYXItc3VwZXJtYXJrZXRzJywgb2Zmc2V0OiA2MCB9KVxuXG4gICAgaW1hZ2VzTG9hZGVkKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwianMtbWFpblwiKSwgZnVuY3Rpb24gKCkge1xuICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGpRdWVyeShcIiNqcy1zb2NpYWwtYnV0dG9uc1wiKS50cmlnZ2VyKCdtb3VzZW92ZXInKVxuICAgICAgfSwgMTAwMClcblxuICAgICAgalF1ZXJ5KCcjanMtbG9hZGluZycpLmZhZGVPdXQoJ2Zhc3QnKVxuICAgICAgalF1ZXJ5KCcjanMtZm9vdGVyJykucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpXG5cbiAgICAgIGpRdWVyeSgnW2RhdGEtdG9nZ2xlPVwidG9vbHRpcFwiXScpLnRvb2x0aXAoKVxuICAgIH0pXG4gIH0pXG5cbiAgLy9cbiAgLy8gQW5pbWF0ZSBzY3JvbGwgbmF2aWdhdGlvblxuXG4gIGpRdWVyeShcIi5qcy1zdXBlcm1hcmtldC1uYXZcIikub24oJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgIHZhciBoYXNoID0gdGhpcy5oYXNoXG4gICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgICBqUXVlcnkoJ2h0bWwsIGJvZHknKS5hbmltYXRlKHtcbiAgICAgIHNjcm9sbFRvcDogalF1ZXJ5KGhhc2gpLm9mZnNldCgpLnRvcFxuICAgIH0sIDMwMCwgZnVuY3Rpb24oKXtcbiAgICAgICB3aW5kb3cubG9jYXRpb24uaGFzaCA9IGhhc2hcbiAgICB9KVxuICB9KVxuXG4gIC8vXG4gIC8vIEFjdGlvbnMgdG8gdGhlIHJpZ2h0LCBzaG93L2hpZGUgY29udGVudFxuXG4gIGpRdWVyeShcIiNqcy1tYWluXCIpXG4gICAgLm9uKCdjbGljaycsICcuanMtc3VwZXJtYXJrZXQtaGlkZScsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICB2YXIgc2VsZWN0b3IgPSBqUXVlcnkodGhpcykuZGF0YSgnc2VsZWN0b3InKVxuXG4gICAgICB0aGlzLmlubmVyVGV4dCA9IHtcbiAgICAgICAgJ09jdWx0YXIg4oaRJzogJ01vc3RyYXIg4oaTJyxcbiAgICAgICAgJ01vc3RyYXIg4oaTJzogJ09jdWx0YXIg4oaRJ1xuICAgICAgfVt0aGlzLmlubmVyVGV4dF1cblxuICAgICAgalF1ZXJ5KHNlbGVjdG9yKS50b2dnbGVDbGFzcygnY29sbGFwc2UnKVxuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIH0pXG4gICAgLm9uKCdjbGljaycsICcuanMtY2FwdGlvbi1saW5rJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgIHZhciBzZWxlY3RvciA9IGpRdWVyeSh0aGlzKS5kYXRhKCdzZWxlY3RvcicpXG4gICAgICBqUXVlcnkoc2VsZWN0b3IpLmNsaWNrKClcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICB9KVxuXG4gIC8vXG4gIC8vIFNoYXJlIG9uIFRXVC9GQlxuXG4gIGpRdWVyeShcIiNqcy1zb2NpYWwtYnV0dG9uc1wiKS5vbmUoJ21vdXNlb3ZlcicsIGZ1bmN0aW9uKCkge1xuICAgIFNvY2lhbGl0ZS5zZXR1cCh7XG4gICAgICBmYWNlYm9vazogeyBsYW5nOiAnZXNfTEEnIH0sXG4gICAgICB0d2l0dGVyIDogeyBsYW5nOiAnZXNfTEEnIH1cbiAgICB9KVxuICAgIFNvY2lhbGl0ZS5sb2FkKClcbiAgfSlcblxuICAvL1xuICAvLyBMaWdodGJveFxuXG4gIGxpZ2h0Ym94Lm9wdGlvbih7IGFsYnVtTGFiZWw6ICclMSAvICUyJyB9KVxuXG4gIC8vXG4gIC8vIFV0aWxzXG5cbiAgZnVuY3Rpb24gaXNFbGVtZW50SW5WaWV3cG9ydChlbCkge1xuICAgIHZhciByZWN0ID0gZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcblxuICAgIHJldHVybiAoXG4gICAgICByZWN0LnRvcCA+PSAwICYmXG4gICAgICByZWN0LmxlZnQgPj0gMCAmJlxuICAgICAgcmVjdC5ib3R0b20gPD0gKHdpbmRvdy5pbm5lckhlaWdodCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0KSAmJlxuICAgICAgcmVjdC5yaWdodCA8PSAod2luZG93LmlubmVyV2lkdGggfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoKVxuICAgIClcbiAgfVxuXG4gIGZ1bmN0aW9uIGlzU2FmYXJpKCkge1xuICAgIC8vIFRoaXMgaXMgcmVhbGx5IGF3ZnVsLlxuICAgIC8vIFNhZmFyaSBjYW4ndCBsb2FkIHNvbWUgaWZyYW1lcyBwcm9wZXJseSBiZWNhdXNlIG9mIHRoZSB3YXkgdGhleSBoYW5kbGUgcmVkaXJlY3Rpb24gdG8gc2V0IGNvb2tpZXNcbiAgICAvLyBJbnN0ZWFkIG9mIGp1c3QgcmVtb3ZpbmcgdGhlIGlmcmFtZXMgZm9yIGFsbCBicm93c2VycywgdHJ5IHRvIGRldGVjdCBTYWZhcmkgYW5kIGJyZWFrIGVhcmx5XG4gICAgcmV0dXJuIG5hdmlnYXRvci52ZW5kb3IgJiYgbmF2aWdhdG9yLnZlbmRvci5pbmRleE9mKCdBcHBsZScpID4gLTEgJiZcbiAgICAgICAgICAgbmF2aWdhdG9yLnVzZXJBZ2VudCAmJiAhbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgnQ3JpT1MnKVxuICB9XG59KSgpXG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
