/*!
 * Lightbox v2.8.2
 * by Lokesh Dhakar
 *
 * More info:
 * http://lokeshdhakar.com/projects/lightbox2/
 *
 * Copyright 2007, 2015 Lokesh Dhakar
 * Released under the MIT license
 * https://github.com/lokesh/lightbox2/blob/master/LICENSE
 */
!function(a,b){"function"==typeof define&&define.amd?define(["jquery"],b):"object"==typeof exports?module.exports=b(require("jquery")):a.lightbox=b(a.jQuery)}(this,function(a){function b(b){this.album=[],this.currentImageIndex=void 0,this.init(),this.options=a.extend({},this.constructor.defaults),this.option(b)};window.Lightbox = b;return b.defaults={albumLabel:"Image %1 of %2",alwaysShowNavOnTouchDevices:!1,fadeDuration:500,fitImagesInViewport:!0,positionFromTop:50,resizeDuration:700,showImageNumberLabel:!0,wrapAround:!1,disableScrolling:!1},b.prototype.option=function(b){a.extend(this.options,b)},b.prototype.imageCountLabel=function(a,b){return this.options.albumLabel.replace(/%1/g,a).replace(/%2/g,b)},b.prototype.init=function(){this.enable(),this.build()},b.prototype.enable=function(){var b=this;a("body").on("click","a[rel^=lightbox], area[rel^=lightbox], a[data-lightbox], area[data-lightbox]",function(c){return b.start(a(c.currentTarget)),!1})},b.prototype.build=function(){var b=this;a('<div id="lightboxOverlay" class="lightboxOverlay"></div><div id="lightbox" class="lightbox"><div class="lb-outerContainer"><div class="lb-container"><img class="lb-image" src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" /><div class="lb-nav"><a class="lb-prev" href="" ></a><a class="lb-next" href="" ></a></div><div class="lb-loader"><a class="lb-cancel"></a></div></div></div><div class="lb-dataContainer"><div class="lb-data"><div class="lb-details"><span class="lb-caption"></span><span class="lb-number"></span></div><div class="lb-closeContainer"><a class="lb-close"></a></div></div></div></div>').appendTo(a("body")),this.$lightbox=a("#lightbox"),this.$overlay=a("#lightboxOverlay"),this.$outerContainer=this.$lightbox.find(".lb-outerContainer"),this.$container=this.$lightbox.find(".lb-container"),this.containerTopPadding=parseInt(this.$container.css("padding-top"),10),this.containerRightPadding=parseInt(this.$container.css("padding-right"),10),this.containerBottomPadding=parseInt(this.$container.css("padding-bottom"),10),this.containerLeftPadding=parseInt(this.$container.css("padding-left"),10),this.$overlay.hide().on("click",function(){return b.end(),!1}),this.$lightbox.hide().on("click",function(c){return"lightbox"===a(c.target).attr("id")&&b.end(),!1}),this.$outerContainer.on("click",function(c){return"lightbox"===a(c.target).attr("id")&&b.end(),!1}),this.$lightbox.find(".lb-prev").on("click",function(){return 0===b.currentImageIndex?b.changeImage(b.album.length-1):b.changeImage(b.currentImageIndex-1),!1}),this.$lightbox.find(".lb-next").on("click",function(){return b.currentImageIndex===b.album.length-1?b.changeImage(0):b.changeImage(b.currentImageIndex+1),!1}),this.$lightbox.find(".lb-loader, .lb-close").on("click",function(){return b.end(),!1})},b.prototype.start=function(b){function c(a){d.album.push({link:a.attr("href"),title:a.attr("data-title")||a.attr("title")})}var d=this,e=a(window);e.on("resize",a.proxy(this.sizeOverlay,this)),a("select, object, embed").css({visibility:"hidden"}),this.sizeOverlay(),this.album=[];var f,g=0,h=b.attr("data-lightbox");if(h){f=a(b.prop("tagName")+'[data-lightbox="'+h+'"]');for(var i=0;i<f.length;i=++i)c(a(f[i])),f[i]===b[0]&&(g=i)}else if("lightbox"===b.attr("rel"))c(b);else{f=a(b.prop("tagName")+'[rel="'+b.attr("rel")+'"]');for(var j=0;j<f.length;j=++j)c(a(f[j])),f[j]===b[0]&&(g=j)}var k=e.scrollTop()+this.options.positionFromTop,l=e.scrollLeft();this.$lightbox.css({top:k+"px",left:l+"px"}).fadeIn(this.options.fadeDuration),this.options.disableScrolling&&a("body").addClass("lb-disable-scrolling"),this.changeImage(g)},b.prototype.changeImage=function(b){var c=this;this.disableKeyboardNav();var d=this.$lightbox.find(".lb-image");this.$overlay.fadeIn(this.options.fadeDuration),a(".lb-loader").fadeIn("slow"),this.$lightbox.find(".lb-image, .lb-nav, .lb-prev, .lb-next, .lb-dataContainer, .lb-numbers, .lb-caption").hide(),this.$outerContainer.addClass("animating");var e=new Image;e.onload=function(){var f,g,h,i,j,k,l;d.attr("src",c.album[b].link),f=a(e),d.width(e.width),d.height(e.height),c.options.fitImagesInViewport&&(l=a(window).width(),k=a(window).height(),j=l-c.containerLeftPadding-c.containerRightPadding-20,i=k-c.containerTopPadding-c.containerBottomPadding-120,c.options.maxWidth&&c.options.maxWidth<j&&(j=c.options.maxWidth),c.options.maxHeight&&c.options.maxHeight<j&&(i=c.options.maxHeight),(e.width>j||e.height>i)&&(e.width/j>e.height/i?(h=j,g=parseInt(e.height/(e.width/h),10),d.width(h),d.height(g)):(g=i,h=parseInt(e.width/(e.height/g),10),d.width(h),d.height(g)))),c.sizeContainer(d.width(),d.height())},e.src=this.album[b].link,this.currentImageIndex=b},b.prototype.sizeOverlay=function(){this.$overlay.width(a(document).width()).height(a(document).height())},b.prototype.sizeContainer=function(a,b){function c(){d.$lightbox.find(".lb-dataContainer").width(g),d.$lightbox.find(".lb-prevLink").height(h),d.$lightbox.find(".lb-nextLink").height(h),d.showImage()}var d=this,e=this.$outerContainer.outerWidth(),f=this.$outerContainer.outerHeight(),g=a+this.containerLeftPadding+this.containerRightPadding,h=b+this.containerTopPadding+this.containerBottomPadding;e!==g||f!==h?this.$outerContainer.animate({width:g,height:h},this.options.resizeDuration,"swing",function(){c()}):c()},b.prototype.showImage=function(){this.$lightbox.find(".lb-loader").stop(!0).hide(),this.$lightbox.find(".lb-image").fadeIn("slow"),this.updateNav(),this.updateDetails(),this.preloadNeighboringImages(),this.enableKeyboardNav()},b.prototype.updateNav=function(){var a=!1;try{document.createEvent("TouchEvent"),a=this.options.alwaysShowNavOnTouchDevices?!0:!1}catch(b){}this.$lightbox.find(".lb-nav").show(),this.album.length>1&&(this.options.wrapAround?(a&&this.$lightbox.find(".lb-prev, .lb-next").css("opacity","1"),this.$lightbox.find(".lb-prev, .lb-next").show()):(this.currentImageIndex>0&&(this.$lightbox.find(".lb-prev").show(),a&&this.$lightbox.find(".lb-prev").css("opacity","1")),this.currentImageIndex<this.album.length-1&&(this.$lightbox.find(".lb-next").show(),a&&this.$lightbox.find(".lb-next").css("opacity","1"))))},b.prototype.updateDetails=function(){var b=this;if("undefined"!=typeof this.album[this.currentImageIndex].title&&""!==this.album[this.currentImageIndex].title&&this.$lightbox.find(".lb-caption").html(this.album[this.currentImageIndex].title).fadeIn("fast").find("a").on("click",function(b){void 0!==a(this).attr("target")?window.open(a(this).attr("href"),a(this).attr("target")):location.href=a(this).attr("href")}),this.album.length>1&&this.options.showImageNumberLabel){var c=this.imageCountLabel(this.currentImageIndex+1,this.album.length);this.$lightbox.find(".lb-number").text(c).fadeIn("fast")}else this.$lightbox.find(".lb-number").hide();this.$outerContainer.removeClass("animating"),this.$lightbox.find(".lb-dataContainer").fadeIn(this.options.resizeDuration,function(){return b.sizeOverlay()})},b.prototype.preloadNeighboringImages=function(){if(this.album.length>this.currentImageIndex+1){var a=new Image;a.src=this.album[this.currentImageIndex+1].link}if(this.currentImageIndex>0){var b=new Image;b.src=this.album[this.currentImageIndex-1].link}},b.prototype.enableKeyboardNav=function(){a(document).on("keyup.keyboard",a.proxy(this.keyboardAction,this))},b.prototype.disableKeyboardNav=function(){a(document).off(".keyboard")},b.prototype.keyboardAction=function(a){var b=27,c=37,d=39,e=a.keyCode,f=String.fromCharCode(e).toLowerCase();e===b||f.match(/x|o|c/)?this.end():"p"===f||e===c?0!==this.currentImageIndex?this.changeImage(this.currentImageIndex-1):this.options.wrapAround&&this.album.length>1&&this.changeImage(this.album.length-1):("n"===f||e===d)&&(this.currentImageIndex!==this.album.length-1?this.changeImage(this.currentImageIndex+1):this.options.wrapAround&&this.album.length>1&&this.changeImage(0))},b.prototype.end=function(){this.disableKeyboardNav(),a(window).off("resize",this.sizeOverlay),this.$lightbox.fadeOut(this.options.fadeDuration),this.$overlay.fadeOut(this.options.fadeDuration),a("select, object, embed").css({visibility:"visible"}),this.options.disableScrolling&&a("body").removeClass("lb-disable-scrolling")},new b});

// Patch Lightbox to add overflow hidden on open
(function(){var b={},c={start:function(){jQuery("body").css("overflow-y","hidden")},end:function(){jQuery("body").css("overflow-y","")}};["start","end"].forEach(function(a){b[a]=Lightbox.prototype[a];Lightbox.prototype[a]=function(){var d=b[a].apply(this,arguments);c[a](d)}})})();

(function(){function c(a){this.t=a}function l(a,b){for(var e=b.split(".");e.length;){if(!(e[0]in a))return!1;a=a[e.shift()]}return a}function d(a,b){return a.replace(h,function(e,a,i,f,c,h,k,m){var f=l(b,f),j="",g;if(!f)return"!"==i?d(c,b):k?d(m,b):"";if(!i)return d(h,b);if("@"==i){e=b._key;a=b._val;for(g in f)f.hasOwnProperty(g)&&(b._key=g,b._val=f[g],j+=d(c,b));b._key=e;b._val=a;return j}}).replace(k,function(a,c,d){return(a=l(b,d))||0===a?"%"==c?(new Option(a)).innerHTML.replace(/"/g,"&quot;"):
a:""})}var h=/\{\{(([@!]?)(.+?))\}\}(([\s\S]+?)(\{\{:\1\}\}([\s\S]+?))?)\{\{\/\1\}\}/g,k=/\{\{([=%])(.+?)\}\}/g;c.prototype.render=function(a){return d(this.t,a)};window.t=c})();
/*!
 * Socialite v2.0
 * http://socialitejs.com
 * Copyright (c) 2011 David Bushell
 * Dual-licensed under the BSD or MIT licenses: http://socialitejs.com/license.txt
 */
window.Socialite=(function(f,g,d){var e=0,a=[],i={},h={},b=/^($|loaded|complete)/,j=f.encodeURIComponent;var c={settings:{},trim:function(k){return k.trim?k.trim():k.replace(/^\s+|\s+$/g,"")},hasClass:function(k,l){return(" "+k.className+" ").indexOf(" "+l+" ")!==-1},addClass:function(k,l){if(!c.hasClass(k,l)){k.className=(k.className==="")?l:k.className+" "+l}},removeClass:function(k,l){k.className=c.trim(" "+k.className+" ".replace(" "+l+" "," "))},extendObject:function(o,n,k){for(var m in n){var l=o[m]!==d;if(l&&typeof n[m]==="object"){c.extendObject(o[m],n[m],k)}else{if(k||!l){o[m]=n[m]}}}},getElements:function(l,p){var k=0,o=[],n=!!l.getElementsByClassName,m=n?l.getElementsByClassName(p):l.getElementsByTagName("*");for(;k<m.length;k++){if(n||c.hasClass(m[k],p)){o.push(m[k])}}return o},getDataAttributes:function(l,s,k){var o=0,q="",n={},p=l.attributes;for(;o<p.length;o++){var r=p[o].name,m=p[o].value;if(m.length&&r.indexOf("data-")===0){if(s){r=r.substring(5)}if(k){n[r]=m}else{q+=j(r)+"="+j(m)+"&"}}}return k?n:q},copyDataAttributes:function(p,o,n,m){var k=c.getDataAttributes(p,n,true);for(var l in k){o.setAttribute(m?l.replace(/-/g,"_"):l,k[l])}},createIframe:function(m,k){var l=g.createElement("iframe");l.style.cssText="overflow: hidden; border: none;";c.extendObject(l,{src:m,allowtransparency:"true",frameborder:"0",scrolling:"no"},true);if(k){l.onload=l.onreadystatechange=function(){if(b.test(l.readyState||"")){l.onload=l.onreadystatechange=null;c.activateInstance(k)}}}return l},networkReady:function(k){return i[k]?i[k].loaded:d},appendNetwork:function(k){if(!k||k.appended){return}if(typeof k.append==="function"&&k.append(k)===false){k.appended=k.loaded=true;c.activateAll(k);return}if(k.script){k.el=g.createElement("script");c.extendObject(k.el,k.script,true);k.el.async=true;k.el.onload=k.el.onreadystatechange=function(){if(b.test(k.el.readyState||"")){k.el.onload=k.el.onreadystatechange=null;k.loaded=true;if(typeof k.onload==="function"&&k.onload(k)===false){return}c.activateAll(k)}};g.body.appendChild(k.el)}k.appended=true},removeNetwork:function(k){if(!c.networkReady(k.name)){return false}if(k.el.parentNode){k.el.parentNode.removeChild(k.el)}return !(k.appended=k.loaded=false)},reloadNetwork:function(k){var l=i[k];if(l&&c.removeNetwork(l)){c.appendNetwork(l)}},createInstance:function(l,n){var m=true,k={el:l,uid:e++,widget:n};a.push(k);if(n.process!==d){m=(typeof n.process==="function")?n.process(k):false}if(m){c.processInstance(k)}k.el.setAttribute("data-socialite",k.uid);k.el.className="socialite "+n.name+" socialite-instance";return k},processInstance:function(k){var m=k.el;k.el=g.createElement("div");k.el.className=m.className;c.copyDataAttributes(m,k.el);if(m.nodeName.toLowerCase()==="a"&&!m.getAttribute("data-default-href")){k.el.setAttribute("data-default-href",m.getAttribute("href"))}var l=m.parentNode;l.insertBefore(k.el,m);l.removeChild(m)},activateInstance:function(k){if(k&&!k.loaded){k.loaded=true;if(typeof k.widget.activate==="function"){k.widget.activate(k)}c.addClass(k.el,"socialite-loaded");return k.onload?k.onload(k.el):null}},activateAll:function(m){if(typeof m==="string"){m=i[m]}for(var l=0;l<a.length;l++){var k=a[l];if(k.init&&k.widget.network===m){c.activateInstance(k)}}},load:function(m,n,s,p,l){m=(m&&typeof m==="object"&&m.nodeType===1)?m:g;if(!n||typeof n!=="object"){c.load(m,c.getElements(m,"socialite"),s,p,l);return}var q;if(/Array/.test(Object.prototype.toString.call(n))){for(q=0;q<n.length;q++){c.load(m,n[q],s,p,l)}return}if(n.nodeType!==1){return}if(!s||!h[s]){s=null;var o=n.className.split(" ");for(q=0;q<o.length;q++){if(h[o[q]]){s=o[q];break}}if(!s){return}}var u,r=h[s],k=parseInt(n.getAttribute("data-socialite"),10);if(!isNaN(k)){for(q=0;q<a.length;q++){if(a[q].uid===k){u=a[q];break}}}else{u=c.createInstance(n,r)}if(l||!u){return}if(!u.init){u.init=true;u.onload=(typeof p==="function")?p:null;r.init(u)}if(!r.network.appended){c.appendNetwork(r.network)}else{if(c.networkReady(r.network.name)){c.activateInstance(u)}}},activate:function(l,k,m){f.Socialite.load(null,l,k,m)},process:function(l,m,k){f.Socialite.load(l,m,k,null,true)},network:function(l,k){i[l]={name:l,el:null,appended:false,loaded:false,widgets:{}};if(k){c.extendObject(i[l],k)}},widget:function(m,k,l){l.name=m+"-"+k;if(!i[m]||h[l.name]){return}l.network=i[m];i[m].widgets[k]=h[l.name]=l},setup:function(k){c.extendObject(c.settings,k,true)}};return c})(window,window.document);(function(g,h,d,c){d.setup({facebook:{lang:"en_GB",appId:null},twitter:{lang:"en"},googleplus:{lang:"en-GB"}});d.network("facebook",{script:{src:"//connect.facebook.net/{{language}}/all.js",id:"facebook-jssdk"},append:function(o){var n=h.createElement("div"),m=d.settings.facebook,l={onlike:"edge.create",onunlike:"edge.remove",onsend:"message.send"};n.id="fb-root";h.body.appendChild(n);o.script.src=o.script.src.replace("{{language}}",m.lang);g.fbAsyncInit=function(){g.FB.init({appId:m.appId,xfbml:true});for(var p in l){if(typeof m[p]==="function"){g.FB.Event.subscribe(l[p],m[p])}}}}});var j=function(l){var m=h.createElement("div");m.className=l.widget.fbtype;d.copyDataAttributes(l.el,m);l.el.appendChild(m);if(g.FB&&g.FB.XFBML){g.FB.XFBML.parse(l.el)}};d.widget("facebook","like",{init:j,fbtype:"fb-like"});d.widget("facebook","share",{init:j,fbtype:"fb-share-button"});d.network("twitter",{script:{src:"//platform.twitter.com/widgets.js",id:"twitter-wjs",charset:"utf-8"},append:function(){var n=(typeof g.twttr!=="object"),m=d.settings.twitter,l=["click","tweet","retweet","favorite","follow"];if(n){g.twttr=(t={_e:[],ready:function(o){t._e.push(o)}})}g.twttr.ready(function(o){for(var p=0;p<l.length;p++){var q=l[p];if(typeof m["on"+q]==="function"){o.events.bind(q,m["on"+q])}}d.activateAll("twitter")});return n}});var f=function(l){var m=h.createElement("a");m.className=l.widget.name+"-button";d.copyDataAttributes(l.el,m);m.setAttribute("href",l.el.getAttribute("data-default-href"));m.setAttribute("data-lang",l.el.getAttribute("data-lang")||d.settings.twitter.lang);l.el.appendChild(m)};var a=function(l){if(g.twttr&&typeof g.twttr.widgets==="object"&&typeof g.twttr.widgets.load==="function"){g.twttr.widgets.load()}};d.widget("twitter","share",{init:f,activate:a});d.widget("twitter","follow",{init:f,activate:a});d.widget("twitter","hashtag",{init:f,activate:a});d.widget("twitter","mention",{init:f,activate:a});d.widget("twitter","embed",{process:function(l){l.innerEl=l.el;if(!l.innerEl.getAttribute("data-lang")){l.innerEl.setAttribute("data-lang",d.settings.twitter.lang)}l.el=h.createElement("div");l.el.className=l.innerEl.className;l.innerEl.className="";l.innerEl.parentNode.insertBefore(l.el,l.innerEl);l.el.appendChild(l.innerEl)},init:function(l){l.innerEl.className="twitter-tweet"},activate:a});d.network("googleplus",{script:{src:"//apis.google.com/js/plusone.js"},append:function(l){if(g.gapi){return false}g.___gcfg={lang:d.settings.googleplus.lang,parsetags:"explicit"}}});var e=function(l){var m=h.createElement("div");m.className="g-"+l.widget.gtype;d.copyDataAttributes(l.el,m);l.el.appendChild(m);l.gplusEl=m};var k=function(l,m){return(typeof m!=="function")?null:function(n){m(l.el,n)}};var b=function(l){var p=l.widget.gtype;if(g.gapi&&g.gapi[p]){var o=d.settings.googleplus,q=d.getDataAttributes(l.el,true,true),n=["onstartinteraction","onendinteraction","callback"];for(var m=0;m<n.length;m++){q[n[m]]=k(l,o[n[m]])}g.gapi[p].render(l.gplusEl,q)}};d.widget("googleplus","one",{init:e,activate:b,gtype:"plusone"});d.widget("googleplus","share",{init:e,activate:b,gtype:"plus"});d.widget("googleplus","badge",{init:e,activate:b,gtype:"plus"});d.network("linkedin",{script:{src:"//platform.linkedin.com/in.js"}});var i=function(l){var m=h.createElement("script");m.type="IN/"+l.widget.intype;d.copyDataAttributes(l.el,m);l.el.appendChild(m);if(typeof g.IN==="object"&&typeof g.IN.parse==="function"){g.IN.parse(l.el);d.activateInstance(l)}};d.widget("linkedin","share",{init:i,intype:"Share"});d.widget("linkedin","recommend",{init:i,intype:"RecommendProduct"});d.widget("linkedin","follow",{init:i,intype:"FollowCompany"})})(window,window.document,window.Socialite);(function(){var c=window._socialite;if(/Array/.test(Object.prototype.toString.call(c))){for(var b=0,a=c.length;b<a;b++){if(typeof c[b]==="function"){c[b]()}}}})();


/*!
 * Socialite v2.0 - Facebook extension
 * http://socialitejs.com
 * Copyright (c) 2011 David Bushell
 * Dual-licensed under the BSD or MIT licenses: http://socialitejs.com/license.txt
 */
(function(b,f,d,h){d.setup({facebook:{lang:"en_GB",appId:null}});d.network("facebook",{script:{src:"//connect.facebook.net/{{language}}/all.js",id:"facebook-jssdk"},append:function(a){var c=f.createElement("div"),e=d.settings.facebook,g={onlike:"edge.create",onunlike:"edge.remove",onsend:"message.send",oncomment:"comment.create",onuncomment:"comment.remove"};c.id="fb-root";f.body.appendChild(c);a.script.src=a.script.src.replace("{{language}}",e.lang);b.fbAsyncInit=function(){b.FB.init({appId:e.appId,
xfbml:!0});for(var a in g)"function"===typeof e[a]&&b.FB.Event.subscribe(g[a],e[a])}}});d.widget("facebook","like",{init:function(a){var c=f.createElement("div");c.className="fb-like";d.copyDataAttributes(a.el,c);a.el.appendChild(c);b.FB&&b.FB.XFBML&&b.FB.XFBML.parse(a.el)}})})(window,window.document,window.Socialite);

/*!
 * Socialite v2.0 - Twitter extension
 * http://socialitejs.com
 * Copyright (c) 2011 David Bushell
 * Dual-licensed under the BSD or MIT licenses: http://socialitejs.com/license.txt
 */
(function(b,f,c,e){c.setup({twitter:{lang:"en"}});c.network("twitter",{script:{src:"//platform.twitter.com/widgets.js",id:"twitter-wjs",charset:"utf-8"},append:function(){var a="object"!==typeof b.twttr,g=c.settings.twitter,e=["click","tweet","retweet","favorite","follow"];a&&(b.twttr=t={_e:[],ready:function(a){t._e.push(a)}});b.twttr.ready(function(a){for(var b=0;b<e.length;b++){var d=e[b];"function"===typeof g["on"+d]&&a.events.bind(d,g["on"+d])}c.activateAll("twitter")});return a}});e=function(a){var b=
f.createElement("a");b.className=a.widget.name+"-button";c.copyDataAttributes(a.el,b);b.setAttribute("href",a.el.getAttribute("data-default-href"));b.setAttribute("data-lang",a.el.getAttribute("data-lang")||c.settings.twitter.lang);a.el.appendChild(b)};var d=function(a){b.twttr&&"object"===typeof b.twttr.widgets&&"function"===typeof b.twttr.widgets.load&&b.twttr.widgets.load()};c.widget("twitter","share",{init:e,activate:d});c.widget("twitter","follow",{init:e,activate:d});c.widget("twitter","hashtag",
{init:e,activate:d});c.widget("twitter","mention",{init:e,activate:d});c.widget("twitter","timeline",{init:e,activate:d});c.widget("twitter","embed",{process:function(a){a.innerEl=a.el;a.innerEl.getAttribute("data-lang")||a.innerEl.setAttribute("data-lang",c.settings.twitter.lang);a.el=f.createElement("div");a.el.className=a.innerEl.className;a.innerEl.className="";a.innerEl.parentNode.insertBefore(a.el,a.innerEl);a.el.appendChild(a.innerEl)},init:function(a){a.innerEl.className="twitter-tweet"},
activate:d})})(window,window.document,window.Socialite);
!function(){"use strict";function e(e){if(!e)throw"You must provide an URL to scrape (YQL).";this.url=e}function r(e){if(!e)throw"You must provide an URL to request (JSONP).";this.url=encodeURIComponent(e)}function a(e){this.attrs=e}function n(){return navigator.vendor&&navigator.vendor.indexOf("Apple")>-1&&navigator.userAgent&&!navigator.userAgent.match("CriOS")}e.prototype={select:function(e){return this.httpGet(this.buildQuery(e))},buildQuery:function(e){var t="where url='"+this.url+"'";for(var r in e)e[r]&&(t+=" and "+r+" = '"+e[r]+"'");return"select * from html "+t},httpGet:function(e){var t=jQuery.Deferred();return jQuery.ajax({url:"https://query.yahooapis.com/v1/public/yql",data:{q:e,format:"json",jsonCompat:"new"},dataType:"jsonp"}).done(function(e){e.query&&e.query.count?t.resolve(e.query.results):t.reject("No results found")}).error(t.reject),t.promise()}},r.prototype={select:function(e){var t=jQuery.Deferred(),r=e.xpath;return jQuery.ajax({url:"https://jsonp.afeld.me/?callback=?&url="+this.url,dataType:"jsonp"}).done(function(e){e&&e.data?t.resolve(jQuery(e.data).find(r)):t.reject("No results found")}).error(t.reject),t.promise()}};var o={t:t,render:function(e,t){var r=new o.t(document.getElementById("js-"+e+"-template").innerHTML);return r.render(t)}},i={_loading:!1,load:function(e,t){if(i._loading)return void setTimeout(i.load.bind(i,e,t),1e3);i._loading=!0;var r=jQuery("<iframe>",{src:e.src,width:e.width,height:e.height}).css("display","none"),a=jQuery(t).find(".placeholder.loading");a.children().replaceWith(r),r.load(function(){a.removeClass("placeholder loading"),r.slideDown(),i._loading=!1})}},s=function(e){this.type=e,this.id="js-"+this.type+"-items",this.el=document.getElementById(this.id)};s.prototype={appendImages:function(e){e.forEach(this.appendImage.bind(this))},appendImage:function(e){var t=document.createElement("img");t.src=e.src,t.className="img-responsive";var r=jQuery("<a>",{href:e.src,"data-lightbox":this.type}).append(t);jQuery("<div>",{"class":"col-xs-12 col-sm-6 col-md-4","data-toggle":"tooltip","data-placement":"top",title:e.title}).append(r).appendTo(this.el)},placeholder:function(e){jQuery("<div>",{"class":"col-xs-12 placeholder"}).append(e).appendTo(this.el)},iframe:function(e){i.load(e,this.el)},loading:function(){jQuery(this.el).find(".placeholder").addClass("loading")}},a.prototype={render:function(){return jQuery("#js-main").append(o.render("supermarket",this.attrs)),this.load()},load:function(){return this.select().done(this.appendFromResults.bind(this)).fail(this.appendFallbackIframe.bind(this))},select:function(){var t=this.attrs.jsonp?r:e;if(this.attrs.links){var a=this.attrs.links.map(function(e){return new t(e).select({xpath:this.attrs.select})},this);return jQuery.when.apply(jQuery,a)}return new t(this.attrs.link).select({xpath:this.attrs.select})},appendFromResults:function(e){var t=this.attrs.extractOffers(1===arguments.length?e:Array.prototype.slice.call(arguments));new s(this.attrs.key).appendImages(t)},appendFallbackIframe:function(e){var t=this.attrs.link,r=new s(this.attrs.key),a=o.render("notice",{link:t});if(n())return void r.placeholder(a);var i=jQuery("<span>",{"class":"js-iframe-notice",html:a+" o "});jQuery("<a>",{href:t,text:"cargarlo aquí"}).on("click",function(){return r.loading(),r.iframe({src:t,width:"100%",height:"1000"}),!1}).appendTo(i);r.placeholder(i)}};var c=[{key:"carrefour",name:"Carrefour",link:"http://www.carrefour.com.ar/promociones",select:'//div[contains(@class, "promo-landing-content-principal-image")]/img',extractOffers:function(e){return e.img.length?e.img:[e.img]}},{key:"coto",name:"Coto",link:"http://www.coto.com.ar/ofertas/revista-de-ofertas/ie.html",select:'//div[contains(@class, "list_images")]/img',extractOffers:function(e){return e.img.map(function(e){return{src:"http://www.coto.com.ar/ofertas/revista-de-ofertas/"+e.src}})}},{key:"dia",name:"Dia",link:"https://www.supermercadosdia.com.ar/ofertas/",links:["https://www.supermercadosdia.com.ar/category/dia-market","https://www.supermercadosdia.com.ar/category/dia-mini","https://www.supermercadosdia.com.ar/category/dia-plus"],select:'//ul[contains(@class, "slides")]/li/img',extractOffers:function(e){var t=["Dia Market","Dia Mini","Dia Plus"],r=[];return e.forEach(function(e,a){var n=t[a];e.img.forEach(function(e){r.push({src:e.src,title:n})})}),r}},{key:"diaahorrames",name:"Dia (ahorrames)",link:"https://www.supermercadosdia.com.ar/ahorramesdia/",select:'//img[contains(@class, "aligncenter")]',extractOffers:function(e){return[{src:e.img.src}]}},{key:"jumbo",name:"Jumbo",link:"https://www.jumbo.com.ar/Comprar/Home.aspx#_atCategory=true&_atGrilla=false&_id=5",select:'//div[@class="owl-item"]/img[@class="desktop"]',extractOffers:function(e){return e.img}},{key:"disco",name:"Disco",link:"https://www.disco.com.ar/Comprar/Home.aspx#_atCategory=true&_atGrilla=false&_id=75",select:'//div[@class="owl-item"]/img[@class="desktop"]',extractOffers:function(e){return e.img}}],l=c.map(function(e){return new a(e).render()});jQuery.when.apply(jQuery,l).always(function(){window.scrollTo(0,0),jQuery("body").scrollspy({target:"#navbar-supermarkets",offset:60}),imagesLoaded(document.getElementById("js-main"),function(){setTimeout(function(){jQuery("#js-social-buttons").trigger("mouseover")},1e3),jQuery("#js-loading").fadeOut("fast"),jQuery("#js-footer").removeClass("hidden"),jQuery('[data-toggle="tooltip"]').tooltip()})}),jQuery(".js-supermarket-nav").on("click",function(e){var t=this.hash;e.preventDefault(),jQuery("html, body").animate({scrollTop:jQuery(t).offset().top},300,function(){window.location.hash=t})}),jQuery("#js-main").on("click",".js-supermarket-hide",function(e){var t=jQuery(this).data("selector");this.innerText={"Ocultar ↑":"Mostrar ↓","Mostrar ↓":"Ocultar ↑"}[this.innerText],jQuery(t).toggleClass("collapse"),e.preventDefault()}).on("click",".js-caption-link",function(e){var t=jQuery(this).data("selector");jQuery(t).click(),e.preventDefault()}),jQuery("#js-social-buttons").one("mouseover",function(){Socialite.setup({facebook:{lang:"es_LA"},twitter:{lang:"es_LA"}}),Socialite.load()}),lightbox.option({albumLabel:"%1 / %2"})}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiWVFMIiwidXJsIiwidGhpcyIsIkpTT05QIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwiU3VwZXJtYXJrZXQiLCJhdHRycyIsImlzU2FmYXJpIiwibmF2aWdhdG9yIiwidmVuZG9yIiwiaW5kZXhPZiIsInVzZXJBZ2VudCIsIm1hdGNoIiwicHJvdG90eXBlIiwic2VsZWN0Iiwid2hlcmVDbGF1c2UiLCJodHRwR2V0IiwiYnVpbGRRdWVyeSIsIndoZXJlIiwicHJvcCIsInF1ZXJ5IiwiZGVmZXJyZWQiLCJqUXVlcnkiLCJEZWZlcnJlZCIsImFqYXgiLCJkYXRhIiwicSIsImZvcm1hdCIsImpzb25Db21wYXQiLCJkYXRhVHlwZSIsImRvbmUiLCJjb250ZW50IiwiY291bnQiLCJyZXNvbHZlIiwicmVzdWx0cyIsInJlamVjdCIsImVycm9yIiwicHJvbWlzZSIsInNlbGVjdG9yIiwieHBhdGgiLCJmaW5kIiwidGVtcGxhdGUiLCJ0IiwicmVuZGVyIiwibmFtZSIsImh0bWxUZW1wbGF0ZSIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJpbm5lckhUTUwiLCJpZnJhbWUiLCJfbG9hZGluZyIsImxvYWQiLCJwYXJlbnQiLCJzZXRUaW1lb3V0IiwiYmluZCIsIiRpZnJhbWUiLCJzcmMiLCJ3aWR0aCIsImhlaWdodCIsImNzcyIsIiRwbGFjZWhvbGRlciIsImNoaWxkcmVuIiwicmVwbGFjZVdpdGgiLCJyZW1vdmVDbGFzcyIsInNsaWRlRG93biIsIkh0bWxDb250YWluZXIiLCJ0eXBlIiwiaWQiLCJlbCIsImFwcGVuZEltYWdlcyIsImltYWdlcyIsImZvckVhY2giLCJhcHBlbmRJbWFnZSIsImltZyIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc05hbWUiLCIkYSIsImhyZWYiLCJkYXRhLWxpZ2h0Ym94IiwiYXBwZW5kIiwiY2xhc3MiLCJkYXRhLXRvZ2dsZSIsImRhdGEtcGxhY2VtZW50IiwidGl0bGUiLCJhcHBlbmRUbyIsInBsYWNlaG9sZGVyIiwiY2hpbGQiLCJsb2FkaW5nIiwiYWRkQ2xhc3MiLCJhcHBlbmRGcm9tUmVzdWx0cyIsImZhaWwiLCJhcHBlbmRGYWxsYmFja0lmcmFtZSIsIkNsaWVudCIsImpzb25wIiwibGlua3MiLCJwcm9taXNlcyIsIm1hcCIsImxpbmsiLCJ3aGVuIiwiYXBwbHkiLCJleHRyYWN0T2ZmZXJzIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwiQXJyYXkiLCJzbGljZSIsImNhbGwiLCJrZXkiLCJjb250YWluZXIiLCJub3RpY2VIVE1MIiwicGxhY2Vob2xkZXJDaGlsZCIsImh0bWwiLCJ0ZXh0Iiwib24iLCJTVVBFUk1BUktFVFMiLCJyZXN1bHRzQXJyYXkiLCJzdXBlcm1hcmtldHMiLCJyZXN1bHQiLCJyZXNwb25zZSIsImluZGV4IiwicHVzaCIsImF0dHJpYnV0ZXMiLCJhbHdheXMiLCJ3aW5kb3ciLCJzY3JvbGxUbyIsInNjcm9sbHNweSIsInRhcmdldCIsIm9mZnNldCIsImltYWdlc0xvYWRlZCIsInRyaWdnZXIiLCJmYWRlT3V0IiwidG9vbHRpcCIsImV2ZW50IiwiaGFzaCIsInByZXZlbnREZWZhdWx0IiwiYW5pbWF0ZSIsInNjcm9sbFRvcCIsInRvcCIsImxvY2F0aW9uIiwiaW5uZXJUZXh0IiwiT2N1bHRhciDihpEiLCJNb3N0cmFyIOKGkyIsInRvZ2dsZUNsYXNzIiwiY2xpY2siLCJvbmUiLCJTb2NpYWxpdGUiLCJzZXR1cCIsImZhY2Vib29rIiwibGFuZyIsInR3aXR0ZXIiLCJsaWdodGJveCIsIm9wdGlvbiIsImFsYnVtTGFiZWwiXSwibWFwcGluZ3MiOiJDQUFBLFdBQ0UsWUFLQSxTQUFTQSxHQUFJQyxHQUNYLElBQUtBLEVBQUssS0FBTSwwQ0FDaEJDLE1BQUtELElBQU1BLEVBMkNiLFFBQVNFLEdBQU1GLEdBQ2IsSUFBS0EsRUFBSyxLQUFNLDZDQUNoQkMsTUFBS0QsSUFBTUcsbUJBQW1CSCxHQTRIaEMsUUFBU0ksR0FBWUMsR0FDbkJKLEtBQUtJLE1BQVNBLEVBcU9oQixRQUFTQyxLQUlQ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RVBwSCxPQUFPZ0IsR0FBVXVHLFlBQVksWUFDN0JWLEVBQU1FLG1CQUVQckIsR0FBRyxRQUFTLG1CQUFvQixTQUFTbUIsR0FDeEMsR0FBSTdGLEdBQVdoQixPQUFPcEIsTUFBTXVCLEtBQUssV0FDakNILFFBQU9nQixHQUFVd0csUUFDakJYLEVBQU1FLG1CQU1WL0csT0FBTyxzQkFBc0J5SCxJQUFJLFlBQWEsV0FDNUNDLFVBQVVDLE9BQ1JDLFVBQVlDLEtBQU0sU0FDbEJDLFNBQVlELEtBQU0sV0FFcEJILFVBQVU3RixTQU1aa0csU0FBU0MsUUFBU0MsV0FBWSIsImZpbGUiOiJhbGwubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCkge1xuICAndXNlIHN0cmljdCdcblxuICAvL1xuICAvLyBSZXF1ZXN0cyB0byB0aGUgd2ViLiBVc2luZyBZUUwgb2YgSlNPTlBcblxuICBmdW5jdGlvbiBZUUwodXJsKSB7XG4gICAgaWYgKCF1cmwpIHRocm93IFwiWW91IG11c3QgcHJvdmlkZSBhbiBVUkwgdG8gc2NyYXBlIChZUUwpLlwiXG4gICAgdGhpcy51cmwgPSB1cmxcbiAgfVxuXG4gIFlRTC5wcm90b3R5cGUgPSB7XG4gICAgc2VsZWN0OiBmdW5jdGlvbiAod2hlcmVDbGF1c2UpIHtcbiAgICAgIHJldHVybiB0aGlzLmh0dHBHZXQoXG4gICAgICAgIHRoaXMuYnVpbGRRdWVyeSh3aGVyZUNsYXVzZSlcbiAgICAgIClcbiAgICB9LFxuXG4gICAgYnVpbGRRdWVyeTogZnVuY3Rpb24gKHdoZXJlQ2xhdXNlKSB7XG4gICAgICB2YXIgd2hlcmUgPSBcIndoZXJlIHVybD0nXCIgKyB0aGlzLnVybCArIFwiJ1wiXG4gICAgICBmb3IodmFyIHByb3AgaW4gd2hlcmVDbGF1c2UpIHtcbiAgICAgICAgaWYgKHdoZXJlQ2xhdXNlW3Byb3BdKSB7XG4gICAgICAgICAgd2hlcmUgKz0gXCIgYW5kIFwiICsgcHJvcCArIFwiID0gJ1wiICsgd2hlcmVDbGF1c2VbcHJvcF0gKyBcIidcIlxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gXCJzZWxlY3QgKiBmcm9tIGh0bWwgXCIgKyB3aGVyZVxuICAgIH0sXG5cbiAgICBodHRwR2V0OiBmdW5jdGlvbiAocXVlcnkpIHtcbiAgICAgIHZhciBkZWZlcnJlZCA9IGpRdWVyeS5EZWZlcnJlZCgpXG5cbiAgICAgIGpRdWVyeS5hamF4KHtcbiAgICAgICAgdXJsOiAnaHR0cHM6Ly9xdWVyeS55YWhvb2FwaXMuY29tL3YxL3B1YmxpYy95cWwnLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgcTogcXVlcnksXG4gICAgICAgICAgZm9ybWF0OiAnanNvbicsXG4gICAgICAgICAganNvbkNvbXBhdDogJ25ldycsXG4gICAgICAgIH0sXG4gICAgICAgIGRhdGFUeXBlOiAnanNvbnAnXG4gICAgICB9KS5kb25lKGZ1bmN0aW9uIChjb250ZW50KSB7XG4gICAgICAgIGlmIChjb250ZW50LnF1ZXJ5ICYmIGNvbnRlbnQucXVlcnkuY291bnQpIHtcbiAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKGNvbnRlbnQucXVlcnkucmVzdWx0cylcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkZWZlcnJlZC5yZWplY3QoJ05vIHJlc3VsdHMgZm91bmQnKVxuICAgICAgICB9XG4gICAgICB9KS5lcnJvcihkZWZlcnJlZC5yZWplY3QpXG5cbiAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlKClcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBKU09OUCh1cmwpIHtcbiAgICBpZiAoIXVybCkgdGhyb3cgXCJZb3UgbXVzdCBwcm92aWRlIGFuIFVSTCB0byByZXF1ZXN0IChKU09OUCkuXCJcbiAgICB0aGlzLnVybCA9IGVuY29kZVVSSUNvbXBvbmVudCh1cmwpXG4gIH1cblxuICBKU09OUC5wcm90b3R5cGUgPSB7XG4gICAgc2VsZWN0OiBmdW5jdGlvbiAod2hlcmVDbGF1c2UpIHtcbiAgICAgIHZhciBkZWZlcnJlZCA9IGpRdWVyeS5EZWZlcnJlZCgpXG4gICAgICB2YXIgc2VsZWN0b3IgPSB3aGVyZUNsYXVzZS54cGF0aFxuXG4gICAgICBqUXVlcnkuYWpheCh7XG4gICAgICAgIHVybDogJ2h0dHBzOi8vanNvbnAuYWZlbGQubWUvP2NhbGxiYWNrPT8mdXJsPScgKyB0aGlzLnVybCxcbiAgICAgICAgZGF0YVR5cGU6ICdqc29ucCdcbiAgICAgIH0pLmRvbmUoZnVuY3Rpb24gKGNvbnRlbnQpIHtcbiAgICAgICAgaWYgKGNvbnRlbnQgJiYgY29udGVudC5kYXRhKSB7XG4gICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShcbiAgICAgICAgICAgIGpRdWVyeShjb250ZW50LmRhdGEpLmZpbmQoc2VsZWN0b3IpXG4gICAgICAgICAgKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRlZmVycmVkLnJlamVjdCgnTm8gcmVzdWx0cyBmb3VuZCcpXG4gICAgICAgIH1cbiAgICAgIH0pLmVycm9yKGRlZmVycmVkLnJlamVjdClcblxuICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2UoKVxuICAgIH1cbiAgfVxuXG4gIC8vXG4gIC8vIFRlbXBsYXRlIHNpbmdsZXRvblxuXG4gIHZhciB0ZW1wbGF0ZSA9IHtcbiAgICAvLyBBdm9pZCBleHRlcm5hbCBzY3JpcHRzIGZyb20gb3ZlcnJpZGluZyB0aGUgZ2xvYmFsIHRlbXBsYXRlIG9iamVjdFxuICAgIHQ6IHQsXG4gICAgcmVuZGVyOiBmdW5jdGlvbiAobmFtZSwgZGF0YSkge1xuICAgICAgdmFyIGh0bWxUZW1wbGF0ZSA9IG5ldyB0ZW1wbGF0ZS50KFxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnanMtJyArIG5hbWUgKyAnLXRlbXBsYXRlJykuaW5uZXJIVE1MXG4gICAgICApXG4gICAgICByZXR1cm4gaHRtbFRlbXBsYXRlLnJlbmRlcihkYXRhKVxuICAgIH1cbiAgfVxuXG4gIC8vXG4gIC8vIElmcmFtZSBzaW5nbGV0b25cblxuICB2YXIgaWZyYW1lID0ge1xuICAgIF9sb2FkaW5nOiBmYWxzZSxcbiAgICBsb2FkOiBmdW5jdGlvbiAoYXR0cnMsIHBhcmVudCkge1xuICAgICAgaWYgKGlmcmFtZS5fbG9hZGluZykge1xuICAgICAgICBzZXRUaW1lb3V0KGlmcmFtZS5sb2FkLmJpbmQoaWZyYW1lLCBhdHRycywgcGFyZW50KSwgMTAwMClcbiAgICAgICAgcmV0dXJuXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZnJhbWUuX2xvYWRpbmcgPSB0cnVlXG4gICAgICB9XG5cbiAgICAgIHZhciAkaWZyYW1lID0galF1ZXJ5KCc8aWZyYW1lPicsIHtcbiAgICAgICAgc3JjICAgOiBhdHRycy5zcmMsXG4gICAgICAgIHdpZHRoIDogYXR0cnMud2lkdGgsXG4gICAgICAgIGhlaWdodDogYXR0cnMuaGVpZ2h0XG4gICAgICB9KVxuICAgICAgLmNzcygnZGlzcGxheScsICdub25lJylcblxuICAgICAgdmFyICRwbGFjZWhvbGRlciA9IGpRdWVyeShwYXJlbnQpLmZpbmQoJy5wbGFjZWhvbGRlci5sb2FkaW5nJylcblxuICAgICAgJHBsYWNlaG9sZGVyLmNoaWxkcmVuKCkucmVwbGFjZVdpdGgoJGlmcmFtZSlcblxuICAgICAgJGlmcmFtZS5sb2FkKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJHBsYWNlaG9sZGVyLnJlbW92ZUNsYXNzKCdwbGFjZWhvbGRlciBsb2FkaW5nJylcbiAgICAgICAgJGlmcmFtZS5zbGlkZURvd24oKVxuICAgICAgICBpZnJhbWUuX2xvYWRpbmcgPSBmYWxzZVxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuXG4gIC8vXG4gIC8vIEhlbHBzIGJ1aWxkaW5nIHRoZSBlbGVtZW50IHRoYXQgY29udGFpbnMgdGhlIGRhdGFcblxuICB2YXIgSHRtbENvbnRhaW5lciA9IGZ1bmN0aW9uICh0eXBlKSB7XG4gICAgdGhpcy50eXBlID0gdHlwZVxuICAgIHRoaXMuaWQgPSAnanMtJyArIHRoaXMudHlwZSArICctaXRlbXMnXG4gICAgdGhpcy5lbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuaWQpXG4gIH1cblxuICBIdG1sQ29udGFpbmVyLnByb3RvdHlwZSA9IHtcbiAgICBhcHBlbmRJbWFnZXM6IGZ1bmN0aW9uKGltYWdlcykge1xuICAgICAgaW1hZ2VzLmZvckVhY2godGhpcy5hcHBlbmRJbWFnZS5iaW5kKHRoaXMpKVxuICAgIH0sXG5cbiAgICBhcHBlbmRJbWFnZTogZnVuY3Rpb24oYXR0cnMpIHtcbiAgICAgIHZhciBpbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKVxuICAgICAgaW1nLnNyYyA9IGF0dHJzLnNyY1xuICAgICAgaW1nLmNsYXNzTmFtZSA9ICdpbWctcmVzcG9uc2l2ZSdcblxuICAgICAgdmFyICRhID0galF1ZXJ5KCc8YT4nLCB7XG4gICAgICAgICdocmVmJzogYXR0cnMuc3JjLFxuICAgICAgICAnZGF0YS1saWdodGJveCc6IHRoaXMudHlwZVxuICAgICAgfSkuYXBwZW5kKGltZylcblxuICAgICAgalF1ZXJ5KCc8ZGl2PicsIHtcbiAgICAgICAgJ2NsYXNzJyAgICAgICAgIDogJ2NvbC14cy0xMiBjb2wtc20tNiBjb2wtbWQtNCcsXG4gICAgICAgICdkYXRhLXRvZ2dsZScgICA6ICd0b29sdGlwJyxcbiAgICAgICAgJ2RhdGEtcGxhY2VtZW50JzogJ3RvcCcsXG4gICAgICAgICd0aXRsZScgICAgICAgICA6IGF0dHJzLnRpdGxlXG4gICAgICB9KVxuICAgICAgLmFwcGVuZCgkYSlcbiAgICAgIC5hcHBlbmRUbyh0aGlzLmVsKVxuICAgIH0sXG5cbiAgICBwbGFjZWhvbGRlcjogZnVuY3Rpb24gKGNoaWxkKSB7XG4gICAgICBqUXVlcnkoJzxkaXY+JywgeyAnY2xhc3MnOiAnY29sLXhzLTEyIHBsYWNlaG9sZGVyJyB9KVxuICAgICAgICAuYXBwZW5kKGNoaWxkKVxuICAgICAgICAuYXBwZW5kVG8odGhpcy5lbClcbiAgICB9LFxuXG4gICAgaWZyYW1lOiBmdW5jdGlvbiAoYXR0cnMpIHtcbiAgICAgIGlmcmFtZS5sb2FkKGF0dHJzLCB0aGlzLmVsKVxuICAgIH0sXG5cbiAgICBsb2FkaW5nOiBmdW5jdGlvbiAoKSB7XG4gICAgICBqUXVlcnkodGhpcy5lbCkuZmluZCgnLnBsYWNlaG9sZGVyJykuYWRkQ2xhc3MoJ2xvYWRpbmcnKVxuICAgIH1cbiAgfVxuXG4gIC8vXG4gIC8vIFVzZXMgdGhlIG90aGVyIG9iamVjdHMgdG8gc2hvdyBzdXBlcm1hcmtldCBkYXRhIG9uIHRoZSBET01cblxuICBmdW5jdGlvbiBTdXBlcm1hcmtldChhdHRycykge1xuICAgIHRoaXMuYXR0cnMgID0gYXR0cnNcbiAgfVxuXG4gIFN1cGVybWFya2V0LnByb3RvdHlwZSA9IHtcbiAgICByZW5kZXI6IGZ1bmN0aW9uICgpIHtcbiAgICAgIGpRdWVyeSgnI2pzLW1haW4nKS5hcHBlbmQoXG4gICAgICAgIHRlbXBsYXRlLnJlbmRlcignc3VwZXJtYXJrZXQnLCB0aGlzLmF0dHJzKVxuICAgICAgKVxuICAgICAgcmV0dXJuIHRoaXMubG9hZCgpXG4gICAgfSxcblxuICAgIGxvYWQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLnNlbGVjdCgpXG4gICAgICAgIC5kb25lKHRoaXMuYXBwZW5kRnJvbVJlc3VsdHMuYmluZCh0aGlzKSlcbiAgICAgICAgLmZhaWwodGhpcy5hcHBlbmRGYWxsYmFja0lmcmFtZS5iaW5kKHRoaXMpKVxuICAgIH0sXG5cbiAgICBzZWxlY3Q6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBDbGllbnQgPSB0aGlzLmF0dHJzLmpzb25wID8gSlNPTlAgOiBZUUxcblxuICAgICAgaWYgKHRoaXMuYXR0cnMubGlua3MpIHtcbiAgICAgICAgdmFyIHByb21pc2VzID0gdGhpcy5hdHRycy5saW5rcy5tYXAoZnVuY3Rpb24obGluaykge1xuICAgICAgICAgIHJldHVybiBuZXcgQ2xpZW50KGxpbmspLnNlbGVjdCh7IHhwYXRoOiB0aGlzLmF0dHJzLnNlbGVjdCB9KVxuICAgICAgICB9LCB0aGlzKVxuXG4gICAgICAgIHJldHVybiBqUXVlcnkud2hlbi5hcHBseShqUXVlcnksIHByb21pc2VzKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIG5ldyBDbGllbnQodGhpcy5hdHRycy5saW5rKS5zZWxlY3QoeyB4cGF0aDogdGhpcy5hdHRycy5zZWxlY3QgfSlcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgYXBwZW5kRnJvbVJlc3VsdHM6IGZ1bmN0aW9uIChyZXN1bHRzKSB7XG4gICAgICB2YXIgaW1hZ2VzID0gdGhpcy5hdHRycy5leHRyYWN0T2ZmZXJzKGFyZ3VtZW50cy5sZW5ndGggPT09IDEgPyByZXN1bHRzIDogQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKSlcbiAgICAgIG5ldyBIdG1sQ29udGFpbmVyKHRoaXMuYXR0cnMua2V5KS5hcHBlbmRJbWFnZXMoaW1hZ2VzKVxuICAgIH0sXG5cbiAgICBhcHBlbmRGYWxsYmFja0lmcmFtZTogZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICB2YXIgbGluayA9IHRoaXMuYXR0cnMubGlua1xuICAgICAgdmFyIGNvbnRhaW5lciA9IG5ldyBIdG1sQ29udGFpbmVyKHRoaXMuYXR0cnMua2V5KVxuICAgICAgdmFyIG5vdGljZUhUTUwgPSB0ZW1wbGF0ZS5yZW5kZXIoJ25vdGljZScsIHsgbGluazogbGluayB9KVxuICAgICAgXG4gICAgICBpZiAoaXNTYWZhcmkoKSkge1xuICAgICAgICBjb250YWluZXIucGxhY2Vob2xkZXIobm90aWNlSFRNTClcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIHZhciBwbGFjZWhvbGRlckNoaWxkID0galF1ZXJ5KCc8c3Bhbj4nLCB7XG4gICAgICAgIFwiY2xhc3NcIjogJ2pzLWlmcmFtZS1ub3RpY2UnLFxuICAgICAgICBcImh0bWxcIjogbm90aWNlSFRNTCArICcgbyAnXG4gICAgICB9KVxuXG4gICAgICB2YXIgbG9hZElmcmFtZUxpbmsgPSBqUXVlcnkoJzxhPicsIHtcbiAgICAgICAgICBocmVmOiBsaW5rLFxuICAgICAgICAgIHRleHQ6ICdjYXJnYXJsbyBhcXXDrSdcbiAgICAgICAgfSkub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGNvbnRhaW5lci5sb2FkaW5nKClcbiAgICAgICAgICBjb250YWluZXIuaWZyYW1lKHtcbiAgICAgICAgICAgIHNyYyAgIDogbGluayxcbiAgICAgICAgICAgIHdpZHRoIDogJzEwMCUnLFxuICAgICAgICAgICAgaGVpZ2h0OiAnMTAwMCdcbiAgICAgICAgICB9KVxuICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICB9KVxuICAgICAgICAuYXBwZW5kVG8ocGxhY2Vob2xkZXJDaGlsZClcblxuICAgICAgY29udGFpbmVyLnBsYWNlaG9sZGVyKHBsYWNlaG9sZGVyQ2hpbGQpXG4gICAgfVxuICB9XG5cbiAgLy9cbiAgLy8gRmV0Y2ggYW5kIHJlbmRlclxuXG4gIHZhciBTVVBFUk1BUktFVFMgPSBbXG4gICAge1xuICAgICAga2V5ICAgOiAnY2FycmVmb3VyJyxcbiAgICAgIG5hbWUgIDogJ0NhcnJlZm91cicsXG4gICAgICBsaW5rICA6ICdodHRwOi8vd3d3LmNhcnJlZm91ci5jb20uYXIvcHJvbW9jaW9uZXMnLFxuICAgICAgc2VsZWN0OiAnLy9kaXZbY29udGFpbnMoQGNsYXNzLCBcInByb21vLWxhbmRpbmctY29udGVudC1wcmluY2lwYWwtaW1hZ2VcIildL2ltZycsXG4gICAgICBleHRyYWN0T2ZmZXJzOiBmdW5jdGlvbiAocmVzdWx0cykgeyByZXR1cm4gcmVzdWx0cy5pbWcubGVuZ3RoID8gcmVzdWx0cy5pbWcgOiBbcmVzdWx0cy5pbWddIH1cbiAgICB9LFxuICAgIHtcbiAgICAgIGtleSAgIDogJ2NvdG8nLFxuICAgICAgbmFtZSAgOiAnQ290bycsXG4gICAgICBsaW5rICA6ICdodHRwOi8vd3d3LmNvdG8uY29tLmFyL29mZXJ0YXMvcmV2aXN0YS1kZS1vZmVydGFzL2llLmh0bWwnLFxuICAgICAgc2VsZWN0OiAnLy9kaXZbY29udGFpbnMoQGNsYXNzLCBcImxpc3RfaW1hZ2VzXCIpXS9pbWcnLFxuICAgICAgZXh0cmFjdE9mZmVyczogZnVuY3Rpb24gKHJlc3VsdHMpIHtcbiAgICAgICAgcmV0dXJuIHJlc3VsdHMuaW1nLm1hcChmdW5jdGlvbiAoaW1nKSB7XG4gICAgICAgICAgcmV0dXJuIHsgc3JjOiAnaHR0cDovL3d3dy5jb3RvLmNvbS5hci9vZmVydGFzL3JldmlzdGEtZGUtb2ZlcnRhcy8nICsgaW1nLnNyYyB9XG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICBrZXkgICA6ICdkaWEnLFxuICAgICAgbmFtZSAgOiAnRGlhJyxcbiAgICAgIGxpbmsgIDogJ2h0dHBzOi8vd3d3LnN1cGVybWVyY2Fkb3NkaWEuY29tLmFyL29mZXJ0YXMvJyxcbiAgICAgIGxpbmtzIDogW1xuICAgICAgICAnaHR0cHM6Ly93d3cuc3VwZXJtZXJjYWRvc2RpYS5jb20uYXIvY2F0ZWdvcnkvZGlhLW1hcmtldCcsXG4gICAgICAgICdodHRwczovL3d3dy5zdXBlcm1lcmNhZG9zZGlhLmNvbS5hci9jYXRlZ29yeS9kaWEtbWluaScsXG4gICAgICAgICdodHRwczovL3d3dy5zdXBlcm1lcmNhZG9zZGlhLmNvbS5hci9jYXRlZ29yeS9kaWEtcGx1cydcbiAgICAgIF0sXG4gICAgICBzZWxlY3Q6ICcvL3VsW2NvbnRhaW5zKEBjbGFzcywgXCJzbGlkZXNcIildL2xpL2ltZycsXG4gICAgICBleHRyYWN0T2ZmZXJzOiBmdW5jdGlvbiAocmVzdWx0c0FycmF5KSB7XG4gICAgICAgIHZhciBzdXBlcm1hcmtldHMgPSBbJ0RpYSBNYXJrZXQnLCAnRGlhIE1pbmknLCAnRGlhIFBsdXMnXVxuICAgICAgICB2YXIgcmVzdWx0ID0gW11cblxuICAgICAgICByZXN1bHRzQXJyYXkuZm9yRWFjaChmdW5jdGlvbiAocmVzcG9uc2UsIGluZGV4KSB7XG4gICAgICAgICAgdmFyIHRpdGxlID0gc3VwZXJtYXJrZXRzW2luZGV4XVxuXG4gICAgICAgICAgcmVzcG9uc2UuaW1nLmZvckVhY2goZnVuY3Rpb24gKGltZykge1xuICAgICAgICAgICAgcmVzdWx0LnB1c2goeyBzcmM6IGltZy5zcmMsIHRpdGxlOiB0aXRsZSB9KVxuICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgICAgIFxuICAgICAgICByZXR1cm4gcmVzdWx0XG4gICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICBrZXkgICA6ICdkaWFhaG9ycmFtZXMnLFxuICAgICAgbmFtZSAgOiAnRGlhIChhaG9ycmFtZXMpJyxcbiAgICAgIGxpbmsgIDogJ2h0dHBzOi8vd3d3LnN1cGVybWVyY2Fkb3NkaWEuY29tLmFyL2Fob3JyYW1lc2RpYS8nLFxuICAgICAgc2VsZWN0OiAnLy9pbWdbY29udGFpbnMoQGNsYXNzLCBcImFsaWduY2VudGVyXCIpXScsXG4gICAgICBleHRyYWN0T2ZmZXJzOiBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgIHJldHVybiBbeyBzcmM6IHJlc3VsdC5pbWcuc3JjIH1dXG4gICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICBrZXkgICA6ICdqdW1ibycsXG4gICAgICBuYW1lICA6ICdKdW1ibycsXG4gICAgICBsaW5rICA6ICdodHRwczovL3d3dy5qdW1iby5jb20uYXIvQ29tcHJhci9Ib21lLmFzcHgjX2F0Q2F0ZWdvcnk9dHJ1ZSZfYXRHcmlsbGE9ZmFsc2UmX2lkPTUnLFxuICAgICAgc2VsZWN0OiAnLy9kaXZbQGNsYXNzPVwib3dsLWl0ZW1cIl0vaW1nW0BjbGFzcz1cImRlc2t0b3BcIl0nLFxuICAgICAgZXh0cmFjdE9mZmVyczogZnVuY3Rpb24gKHJlc3VsdHMpIHsgcmV0dXJuIHJlc3VsdHMuaW1nIH1cbiAgICB9LFxuICAgIHtcbiAgICAgIGtleSAgIDogJ2Rpc2NvJyxcbiAgICAgIG5hbWUgIDogJ0Rpc2NvJyxcbiAgICAgIGxpbmsgIDogJ2h0dHBzOi8vd3d3LmRpc2NvLmNvbS5hci9Db21wcmFyL0hvbWUuYXNweCNfYXRDYXRlZ29yeT10cnVlJl9hdEdyaWxsYT1mYWxzZSZfaWQ9NzUnLFxuICAgICAgc2VsZWN0OiAnLy9kaXZbQGNsYXNzPVwib3dsLWl0ZW1cIl0vaW1nW0BjbGFzcz1cImRlc2t0b3BcIl0nLFxuICAgICAgZXh0cmFjdE9mZmVyczogZnVuY3Rpb24gKHJlc3VsdHMpIHsgcmV0dXJuIHJlc3VsdHMuaW1nIH1cbiAgICB9LFxuICBdXG5cbiAgLy9cbiAgLy8gTG9hZCBzdXBlcm1hcmtldCBvZmZlcnNcblxuICB2YXIgcHJvbWlzZXMgPSBTVVBFUk1BUktFVFMubWFwKGZ1bmN0aW9uIChhdHRyaWJ1dGVzKSB7XG4gICAgcmV0dXJuIG5ldyBTdXBlcm1hcmtldChhdHRyaWJ1dGVzKS5yZW5kZXIoKVxuICB9KVxuXG4gIGpRdWVyeS53aGVuLmFwcGx5KGpRdWVyeSwgcHJvbWlzZXMpLmFsd2F5cyhmdW5jdGlvbiAoKSB7XG4gICAgd2luZG93LnNjcm9sbFRvKDAsIDApXG4gICAgalF1ZXJ5KCdib2R5Jykuc2Nyb2xsc3B5KHsgdGFyZ2V0OiAnI25hdmJhci1zdXBlcm1hcmtldHMnLCBvZmZzZXQ6IDYwIH0pXG5cbiAgICBpbWFnZXNMb2FkZWQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJqcy1tYWluXCIpLCBmdW5jdGlvbiAoKSB7XG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgalF1ZXJ5KFwiI2pzLXNvY2lhbC1idXR0b25zXCIpLnRyaWdnZXIoJ21vdXNlb3ZlcicpXG4gICAgICB9LCAxMDAwKVxuXG4gICAgICBqUXVlcnkoJyNqcy1sb2FkaW5nJykuZmFkZU91dCgnZmFzdCcpXG4gICAgICBqUXVlcnkoJyNqcy1mb290ZXInKS5yZW1vdmVDbGFzcygnaGlkZGVuJylcblxuICAgICAgalF1ZXJ5KCdbZGF0YS10b2dnbGU9XCJ0b29sdGlwXCJdJykudG9vbHRpcCgpXG4gICAgfSlcbiAgfSlcblxuICAvL1xuICAvLyBBbmltYXRlIHNjcm9sbCBuYXZpZ2F0aW9uXG5cbiAgalF1ZXJ5KFwiLmpzLXN1cGVybWFya2V0LW5hdlwiKS5vbignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgdmFyIGhhc2ggPSB0aGlzLmhhc2hcbiAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcblxuICAgIGpRdWVyeSgnaHRtbCwgYm9keScpLmFuaW1hdGUoe1xuICAgICAgc2Nyb2xsVG9wOiBqUXVlcnkoaGFzaCkub2Zmc2V0KCkudG9wXG4gICAgfSwgMzAwLCBmdW5jdGlvbigpe1xuICAgICAgIHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gaGFzaFxuICAgIH0pXG4gIH0pXG5cbiAgLy9cbiAgLy8gQWN0aW9ucyB0byB0aGUgcmlnaHQsIHNob3cvaGlkZSBjb250ZW50XG5cbiAgalF1ZXJ5KFwiI2pzLW1haW5cIilcbiAgICAub24oJ2NsaWNrJywgJy5qcy1zdXBlcm1hcmtldC1oaWRlJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgIHZhciBzZWxlY3RvciA9IGpRdWVyeSh0aGlzKS5kYXRhKCdzZWxlY3RvcicpXG5cbiAgICAgIHRoaXMuaW5uZXJUZXh0ID0ge1xuICAgICAgICAnT2N1bHRhciDihpEnOiAnTW9zdHJhciDihpMnLFxuICAgICAgICAnTW9zdHJhciDihpMnOiAnT2N1bHRhciDihpEnXG4gICAgICB9W3RoaXMuaW5uZXJUZXh0XVxuXG4gICAgICBqUXVlcnkoc2VsZWN0b3IpLnRvZ2dsZUNsYXNzKCdjb2xsYXBzZScpXG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgfSlcbiAgICAub24oJ2NsaWNrJywgJy5qcy1jYXB0aW9uLWxpbmsnLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgdmFyIHNlbGVjdG9yID0galF1ZXJ5KHRoaXMpLmRhdGEoJ3NlbGVjdG9yJylcbiAgICAgIGpRdWVyeShzZWxlY3RvcikuY2xpY2soKVxuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIH0pXG5cbiAgLy9cbiAgLy8gU2hhcmUgb24gVFdUL0ZCXG5cbiAgalF1ZXJ5KFwiI2pzLXNvY2lhbC1idXR0b25zXCIpLm9uZSgnbW91c2VvdmVyJywgZnVuY3Rpb24oKSB7XG4gICAgU29jaWFsaXRlLnNldHVwKHtcbiAgICAgIGZhY2Vib29rOiB7IGxhbmc6ICdlc19MQScgfSxcbiAgICAgIHR3aXR0ZXIgOiB7IGxhbmc6ICdlc19MQScgfVxuICAgIH0pXG4gICAgU29jaWFsaXRlLmxvYWQoKVxuICB9KVxuXG4gIC8vXG4gIC8vIExpZ2h0Ym94XG5cbiAgbGlnaHRib3gub3B0aW9uKHsgYWxidW1MYWJlbDogJyUxIC8gJTInIH0pXG5cbiAgLy9cbiAgLy8gVXRpbHNcblxuICBmdW5jdGlvbiBpc0VsZW1lbnRJblZpZXdwb3J0KGVsKSB7XG4gICAgdmFyIHJlY3QgPSBlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuXG4gICAgcmV0dXJuIChcbiAgICAgIHJlY3QudG9wID49IDAgJiZcbiAgICAgIHJlY3QubGVmdCA+PSAwICYmXG4gICAgICByZWN0LmJvdHRvbSA8PSAod2luZG93LmlubmVySGVpZ2h0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQpICYmXG4gICAgICByZWN0LnJpZ2h0IDw9ICh3aW5kb3cuaW5uZXJXaWR0aCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGgpXG4gICAgKVxuICB9XG5cbiAgZnVuY3Rpb24gaXNTYWZhcmkoKSB7XG4gICAgLy8gVGhpcyBpcyByZWFsbHkgYXdmdWwuXG4gICAgLy8gU2FmYXJpIGNhbid0IGxvYWQgc29tZSBpZnJhbWVzIHByb3Blcmx5IGJlY2F1c2Ugb2YgdGhlIHdheSB0aGV5IGhhbmRsZSByZWRpcmVjdGlvbiB0byBzZXQgY29va2llc1xuICAgIC8vIEluc3RlYWQgb2YganVzdCByZW1vdmluZyB0aGUgaWZyYW1lcyBmb3IgYWxsIGJyb3dzZXJzLCB0cnkgdG8gZGV0ZWN0IFNhZmFyaSBhbmQgYnJlYWsgZWFybHlcbiAgICByZXR1cm4gbmF2aWdhdG9yLnZlbmRvciAmJiBuYXZpZ2F0b3IudmVuZG9yLmluZGV4T2YoJ0FwcGxlJykgPiAtMSAmJlxuICAgICAgICAgICBuYXZpZ2F0b3IudXNlckFnZW50ICYmICFuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKCdDcmlPUycpXG4gIH1cbn0pKClcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
