/*!
 * Lightbox v2.8.2
 * by Lokesh Dhakar
 *
 * More info:
 * http://lokeshdhakar.com/projects/lightbox2/
 *
 * Copyright 2007, 2015 Lokesh Dhakar
 * Released under the MIT license
 * https://github.com/lokesh/lightbox2/blob/master/LICENSE
 */
!function(a,b){"function"==typeof define&&define.amd?define(["jquery"],b):"object"==typeof exports?module.exports=b(require("jquery")):a.lightbox=b(a.jQuery)}(this,function(a){function b(b){this.album=[],this.currentImageIndex=void 0,this.init(),this.options=a.extend({},this.constructor.defaults),this.option(b)};window.Lightbox = b;return b.defaults={albumLabel:"Image %1 of %2",alwaysShowNavOnTouchDevices:!1,fadeDuration:500,fitImagesInViewport:!0,positionFromTop:50,resizeDuration:700,showImageNumberLabel:!0,wrapAround:!1,disableScrolling:!1},b.prototype.option=function(b){a.extend(this.options,b)},b.prototype.imageCountLabel=function(a,b){return this.options.albumLabel.replace(/%1/g,a).replace(/%2/g,b)},b.prototype.init=function(){this.enable(),this.build()},b.prototype.enable=function(){var b=this;a("body").on("click","a[rel^=lightbox], area[rel^=lightbox], a[data-lightbox], area[data-lightbox]",function(c){return b.start(a(c.currentTarget)),!1})},b.prototype.build=function(){var b=this;a('<div id="lightboxOverlay" class="lightboxOverlay"></div><div id="lightbox" class="lightbox"><div class="lb-outerContainer"><div class="lb-container"><img class="lb-image" src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" /><div class="lb-nav"><a class="lb-prev" href="" ></a><a class="lb-next" href="" ></a></div><div class="lb-loader"><a class="lb-cancel"></a></div></div></div><div class="lb-dataContainer"><div class="lb-data"><div class="lb-details"><span class="lb-caption"></span><span class="lb-number"></span></div><div class="lb-closeContainer"><a class="lb-close"></a></div></div></div></div>').appendTo(a("body")),this.$lightbox=a("#lightbox"),this.$overlay=a("#lightboxOverlay"),this.$outerContainer=this.$lightbox.find(".lb-outerContainer"),this.$container=this.$lightbox.find(".lb-container"),this.containerTopPadding=parseInt(this.$container.css("padding-top"),10),this.containerRightPadding=parseInt(this.$container.css("padding-right"),10),this.containerBottomPadding=parseInt(this.$container.css("padding-bottom"),10),this.containerLeftPadding=parseInt(this.$container.css("padding-left"),10),this.$overlay.hide().on("click",function(){return b.end(),!1}),this.$lightbox.hide().on("click",function(c){return"lightbox"===a(c.target).attr("id")&&b.end(),!1}),this.$outerContainer.on("click",function(c){return"lightbox"===a(c.target).attr("id")&&b.end(),!1}),this.$lightbox.find(".lb-prev").on("click",function(){return 0===b.currentImageIndex?b.changeImage(b.album.length-1):b.changeImage(b.currentImageIndex-1),!1}),this.$lightbox.find(".lb-next").on("click",function(){return b.currentImageIndex===b.album.length-1?b.changeImage(0):b.changeImage(b.currentImageIndex+1),!1}),this.$lightbox.find(".lb-loader, .lb-close").on("click",function(){return b.end(),!1})},b.prototype.start=function(b){function c(a){d.album.push({link:a.attr("href"),title:a.attr("data-title")||a.attr("title")})}var d=this,e=a(window);e.on("resize",a.proxy(this.sizeOverlay,this)),a("select, object, embed").css({visibility:"hidden"}),this.sizeOverlay(),this.album=[];var f,g=0,h=b.attr("data-lightbox");if(h){f=a(b.prop("tagName")+'[data-lightbox="'+h+'"]');for(var i=0;i<f.length;i=++i)c(a(f[i])),f[i]===b[0]&&(g=i)}else if("lightbox"===b.attr("rel"))c(b);else{f=a(b.prop("tagName")+'[rel="'+b.attr("rel")+'"]');for(var j=0;j<f.length;j=++j)c(a(f[j])),f[j]===b[0]&&(g=j)}var k=e.scrollTop()+this.options.positionFromTop,l=e.scrollLeft();this.$lightbox.css({top:k+"px",left:l+"px"}).fadeIn(this.options.fadeDuration),this.options.disableScrolling&&a("body").addClass("lb-disable-scrolling"),this.changeImage(g)},b.prototype.changeImage=function(b){var c=this;this.disableKeyboardNav();var d=this.$lightbox.find(".lb-image");this.$overlay.fadeIn(this.options.fadeDuration),a(".lb-loader").fadeIn("slow"),this.$lightbox.find(".lb-image, .lb-nav, .lb-prev, .lb-next, .lb-dataContainer, .lb-numbers, .lb-caption").hide(),this.$outerContainer.addClass("animating");var e=new Image;e.onload=function(){var f,g,h,i,j,k,l;d.attr("src",c.album[b].link),f=a(e),d.width(e.width),d.height(e.height),c.options.fitImagesInViewport&&(l=a(window).width(),k=a(window).height(),j=l-c.containerLeftPadding-c.containerRightPadding-20,i=k-c.containerTopPadding-c.containerBottomPadding-120,c.options.maxWidth&&c.options.maxWidth<j&&(j=c.options.maxWidth),c.options.maxHeight&&c.options.maxHeight<j&&(i=c.options.maxHeight),(e.width>j||e.height>i)&&(e.width/j>e.height/i?(h=j,g=parseInt(e.height/(e.width/h),10),d.width(h),d.height(g)):(g=i,h=parseInt(e.width/(e.height/g),10),d.width(h),d.height(g)))),c.sizeContainer(d.width(),d.height())},e.src=this.album[b].link,this.currentImageIndex=b},b.prototype.sizeOverlay=function(){this.$overlay.width(a(document).width()).height(a(document).height())},b.prototype.sizeContainer=function(a,b){function c(){d.$lightbox.find(".lb-dataContainer").width(g),d.$lightbox.find(".lb-prevLink").height(h),d.$lightbox.find(".lb-nextLink").height(h),d.showImage()}var d=this,e=this.$outerContainer.outerWidth(),f=this.$outerContainer.outerHeight(),g=a+this.containerLeftPadding+this.containerRightPadding,h=b+this.containerTopPadding+this.containerBottomPadding;e!==g||f!==h?this.$outerContainer.animate({width:g,height:h},this.options.resizeDuration,"swing",function(){c()}):c()},b.prototype.showImage=function(){this.$lightbox.find(".lb-loader").stop(!0).hide(),this.$lightbox.find(".lb-image").fadeIn("slow"),this.updateNav(),this.updateDetails(),this.preloadNeighboringImages(),this.enableKeyboardNav()},b.prototype.updateNav=function(){var a=!1;try{document.createEvent("TouchEvent"),a=this.options.alwaysShowNavOnTouchDevices?!0:!1}catch(b){}this.$lightbox.find(".lb-nav").show(),this.album.length>1&&(this.options.wrapAround?(a&&this.$lightbox.find(".lb-prev, .lb-next").css("opacity","1"),this.$lightbox.find(".lb-prev, .lb-next").show()):(this.currentImageIndex>0&&(this.$lightbox.find(".lb-prev").show(),a&&this.$lightbox.find(".lb-prev").css("opacity","1")),this.currentImageIndex<this.album.length-1&&(this.$lightbox.find(".lb-next").show(),a&&this.$lightbox.find(".lb-next").css("opacity","1"))))},b.prototype.updateDetails=function(){var b=this;if("undefined"!=typeof this.album[this.currentImageIndex].title&&""!==this.album[this.currentImageIndex].title&&this.$lightbox.find(".lb-caption").html(this.album[this.currentImageIndex].title).fadeIn("fast").find("a").on("click",function(b){void 0!==a(this).attr("target")?window.open(a(this).attr("href"),a(this).attr("target")):location.href=a(this).attr("href")}),this.album.length>1&&this.options.showImageNumberLabel){var c=this.imageCountLabel(this.currentImageIndex+1,this.album.length);this.$lightbox.find(".lb-number").text(c).fadeIn("fast")}else this.$lightbox.find(".lb-number").hide();this.$outerContainer.removeClass("animating"),this.$lightbox.find(".lb-dataContainer").fadeIn(this.options.resizeDuration,function(){return b.sizeOverlay()})},b.prototype.preloadNeighboringImages=function(){if(this.album.length>this.currentImageIndex+1){var a=new Image;a.src=this.album[this.currentImageIndex+1].link}if(this.currentImageIndex>0){var b=new Image;b.src=this.album[this.currentImageIndex-1].link}},b.prototype.enableKeyboardNav=function(){a(document).on("keyup.keyboard",a.proxy(this.keyboardAction,this))},b.prototype.disableKeyboardNav=function(){a(document).off(".keyboard")},b.prototype.keyboardAction=function(a){var b=27,c=37,d=39,e=a.keyCode,f=String.fromCharCode(e).toLowerCase();e===b||f.match(/x|o|c/)?this.end():"p"===f||e===c?0!==this.currentImageIndex?this.changeImage(this.currentImageIndex-1):this.options.wrapAround&&this.album.length>1&&this.changeImage(this.album.length-1):("n"===f||e===d)&&(this.currentImageIndex!==this.album.length-1?this.changeImage(this.currentImageIndex+1):this.options.wrapAround&&this.album.length>1&&this.changeImage(0))},b.prototype.end=function(){this.disableKeyboardNav(),a(window).off("resize",this.sizeOverlay),this.$lightbox.fadeOut(this.options.fadeDuration),this.$overlay.fadeOut(this.options.fadeDuration),a("select, object, embed").css({visibility:"visible"}),this.options.disableScrolling&&a("body").removeClass("lb-disable-scrolling")},new b});

// Patch Lightbox to add overflow hidden on open
(function(){var b={},c={start:function(){jQuery("body").css("overflow-y","hidden")},end:function(){jQuery("body").css("overflow-y","")}};["start","end"].forEach(function(a){b[a]=Lightbox.prototype[a];Lightbox.prototype[a]=function(){var d=b[a].apply(this,arguments);c[a](d)}})})();

(function(){function c(a){this.t=a}function l(a,b){for(var e=b.split(".");e.length;){if(!(e[0]in a))return!1;a=a[e.shift()]}return a}function d(a,b){return a.replace(h,function(e,a,i,f,c,h,k,m){var f=l(b,f),j="",g;if(!f)return"!"==i?d(c,b):k?d(m,b):"";if(!i)return d(h,b);if("@"==i){e=b._key;a=b._val;for(g in f)f.hasOwnProperty(g)&&(b._key=g,b._val=f[g],j+=d(c,b));b._key=e;b._val=a;return j}}).replace(k,function(a,c,d){return(a=l(b,d))||0===a?"%"==c?(new Option(a)).innerHTML.replace(/"/g,"&quot;"):
a:""})}var h=/\{\{(([@!]?)(.+?))\}\}(([\s\S]+?)(\{\{:\1\}\}([\s\S]+?))?)\{\{\/\1\}\}/g,k=/\{\{([=%])(.+?)\}\}/g;c.prototype.render=function(a){return d(this.t,a)};window.t=c})();
/*!
 * Socialite v2.0
 * http://socialitejs.com
 * Copyright (c) 2011 David Bushell
 * Dual-licensed under the BSD or MIT licenses: http://socialitejs.com/license.txt
 */
window.Socialite=(function(f,g,d){var e=0,a=[],i={},h={},b=/^($|loaded|complete)/,j=f.encodeURIComponent;var c={settings:{},trim:function(k){return k.trim?k.trim():k.replace(/^\s+|\s+$/g,"")},hasClass:function(k,l){return(" "+k.className+" ").indexOf(" "+l+" ")!==-1},addClass:function(k,l){if(!c.hasClass(k,l)){k.className=(k.className==="")?l:k.className+" "+l}},removeClass:function(k,l){k.className=c.trim(" "+k.className+" ".replace(" "+l+" "," "))},extendObject:function(o,n,k){for(var m in n){var l=o[m]!==d;if(l&&typeof n[m]==="object"){c.extendObject(o[m],n[m],k)}else{if(k||!l){o[m]=n[m]}}}},getElements:function(l,p){var k=0,o=[],n=!!l.getElementsByClassName,m=n?l.getElementsByClassName(p):l.getElementsByTagName("*");for(;k<m.length;k++){if(n||c.hasClass(m[k],p)){o.push(m[k])}}return o},getDataAttributes:function(l,s,k){var o=0,q="",n={},p=l.attributes;for(;o<p.length;o++){var r=p[o].name,m=p[o].value;if(m.length&&r.indexOf("data-")===0){if(s){r=r.substring(5)}if(k){n[r]=m}else{q+=j(r)+"="+j(m)+"&"}}}return k?n:q},copyDataAttributes:function(p,o,n,m){var k=c.getDataAttributes(p,n,true);for(var l in k){o.setAttribute(m?l.replace(/-/g,"_"):l,k[l])}},createIframe:function(m,k){var l=g.createElement("iframe");l.style.cssText="overflow: hidden; border: none;";c.extendObject(l,{src:m,allowtransparency:"true",frameborder:"0",scrolling:"no"},true);if(k){l.onload=l.onreadystatechange=function(){if(b.test(l.readyState||"")){l.onload=l.onreadystatechange=null;c.activateInstance(k)}}}return l},networkReady:function(k){return i[k]?i[k].loaded:d},appendNetwork:function(k){if(!k||k.appended){return}if(typeof k.append==="function"&&k.append(k)===false){k.appended=k.loaded=true;c.activateAll(k);return}if(k.script){k.el=g.createElement("script");c.extendObject(k.el,k.script,true);k.el.async=true;k.el.onload=k.el.onreadystatechange=function(){if(b.test(k.el.readyState||"")){k.el.onload=k.el.onreadystatechange=null;k.loaded=true;if(typeof k.onload==="function"&&k.onload(k)===false){return}c.activateAll(k)}};g.body.appendChild(k.el)}k.appended=true},removeNetwork:function(k){if(!c.networkReady(k.name)){return false}if(k.el.parentNode){k.el.parentNode.removeChild(k.el)}return !(k.appended=k.loaded=false)},reloadNetwork:function(k){var l=i[k];if(l&&c.removeNetwork(l)){c.appendNetwork(l)}},createInstance:function(l,n){var m=true,k={el:l,uid:e++,widget:n};a.push(k);if(n.process!==d){m=(typeof n.process==="function")?n.process(k):false}if(m){c.processInstance(k)}k.el.setAttribute("data-socialite",k.uid);k.el.className="socialite "+n.name+" socialite-instance";return k},processInstance:function(k){var m=k.el;k.el=g.createElement("div");k.el.className=m.className;c.copyDataAttributes(m,k.el);if(m.nodeName.toLowerCase()==="a"&&!m.getAttribute("data-default-href")){k.el.setAttribute("data-default-href",m.getAttribute("href"))}var l=m.parentNode;l.insertBefore(k.el,m);l.removeChild(m)},activateInstance:function(k){if(k&&!k.loaded){k.loaded=true;if(typeof k.widget.activate==="function"){k.widget.activate(k)}c.addClass(k.el,"socialite-loaded");return k.onload?k.onload(k.el):null}},activateAll:function(m){if(typeof m==="string"){m=i[m]}for(var l=0;l<a.length;l++){var k=a[l];if(k.init&&k.widget.network===m){c.activateInstance(k)}}},load:function(m,n,s,p,l){m=(m&&typeof m==="object"&&m.nodeType===1)?m:g;if(!n||typeof n!=="object"){c.load(m,c.getElements(m,"socialite"),s,p,l);return}var q;if(/Array/.test(Object.prototype.toString.call(n))){for(q=0;q<n.length;q++){c.load(m,n[q],s,p,l)}return}if(n.nodeType!==1){return}if(!s||!h[s]){s=null;var o=n.className.split(" ");for(q=0;q<o.length;q++){if(h[o[q]]){s=o[q];break}}if(!s){return}}var u,r=h[s],k=parseInt(n.getAttribute("data-socialite"),10);if(!isNaN(k)){for(q=0;q<a.length;q++){if(a[q].uid===k){u=a[q];break}}}else{u=c.createInstance(n,r)}if(l||!u){return}if(!u.init){u.init=true;u.onload=(typeof p==="function")?p:null;r.init(u)}if(!r.network.appended){c.appendNetwork(r.network)}else{if(c.networkReady(r.network.name)){c.activateInstance(u)}}},activate:function(l,k,m){f.Socialite.load(null,l,k,m)},process:function(l,m,k){f.Socialite.load(l,m,k,null,true)},network:function(l,k){i[l]={name:l,el:null,appended:false,loaded:false,widgets:{}};if(k){c.extendObject(i[l],k)}},widget:function(m,k,l){l.name=m+"-"+k;if(!i[m]||h[l.name]){return}l.network=i[m];i[m].widgets[k]=h[l.name]=l},setup:function(k){c.extendObject(c.settings,k,true)}};return c})(window,window.document);(function(g,h,d,c){d.setup({facebook:{lang:"en_GB",appId:null},twitter:{lang:"en"},googleplus:{lang:"en-GB"}});d.network("facebook",{script:{src:"//connect.facebook.net/{{language}}/all.js",id:"facebook-jssdk"},append:function(o){var n=h.createElement("div"),m=d.settings.facebook,l={onlike:"edge.create",onunlike:"edge.remove",onsend:"message.send"};n.id="fb-root";h.body.appendChild(n);o.script.src=o.script.src.replace("{{language}}",m.lang);g.fbAsyncInit=function(){g.FB.init({appId:m.appId,xfbml:true});for(var p in l){if(typeof m[p]==="function"){g.FB.Event.subscribe(l[p],m[p])}}}}});var j=function(l){var m=h.createElement("div");m.className=l.widget.fbtype;d.copyDataAttributes(l.el,m);l.el.appendChild(m);if(g.FB&&g.FB.XFBML){g.FB.XFBML.parse(l.el)}};d.widget("facebook","like",{init:j,fbtype:"fb-like"});d.widget("facebook","share",{init:j,fbtype:"fb-share-button"});d.network("twitter",{script:{src:"//platform.twitter.com/widgets.js",id:"twitter-wjs",charset:"utf-8"},append:function(){var n=(typeof g.twttr!=="object"),m=d.settings.twitter,l=["click","tweet","retweet","favorite","follow"];if(n){g.twttr=(t={_e:[],ready:function(o){t._e.push(o)}})}g.twttr.ready(function(o){for(var p=0;p<l.length;p++){var q=l[p];if(typeof m["on"+q]==="function"){o.events.bind(q,m["on"+q])}}d.activateAll("twitter")});return n}});var f=function(l){var m=h.createElement("a");m.className=l.widget.name+"-button";d.copyDataAttributes(l.el,m);m.setAttribute("href",l.el.getAttribute("data-default-href"));m.setAttribute("data-lang",l.el.getAttribute("data-lang")||d.settings.twitter.lang);l.el.appendChild(m)};var a=function(l){if(g.twttr&&typeof g.twttr.widgets==="object"&&typeof g.twttr.widgets.load==="function"){g.twttr.widgets.load()}};d.widget("twitter","share",{init:f,activate:a});d.widget("twitter","follow",{init:f,activate:a});d.widget("twitter","hashtag",{init:f,activate:a});d.widget("twitter","mention",{init:f,activate:a});d.widget("twitter","embed",{process:function(l){l.innerEl=l.el;if(!l.innerEl.getAttribute("data-lang")){l.innerEl.setAttribute("data-lang",d.settings.twitter.lang)}l.el=h.createElement("div");l.el.className=l.innerEl.className;l.innerEl.className="";l.innerEl.parentNode.insertBefore(l.el,l.innerEl);l.el.appendChild(l.innerEl)},init:function(l){l.innerEl.className="twitter-tweet"},activate:a});d.network("googleplus",{script:{src:"//apis.google.com/js/plusone.js"},append:function(l){if(g.gapi){return false}g.___gcfg={lang:d.settings.googleplus.lang,parsetags:"explicit"}}});var e=function(l){var m=h.createElement("div");m.className="g-"+l.widget.gtype;d.copyDataAttributes(l.el,m);l.el.appendChild(m);l.gplusEl=m};var k=function(l,m){return(typeof m!=="function")?null:function(n){m(l.el,n)}};var b=function(l){var p=l.widget.gtype;if(g.gapi&&g.gapi[p]){var o=d.settings.googleplus,q=d.getDataAttributes(l.el,true,true),n=["onstartinteraction","onendinteraction","callback"];for(var m=0;m<n.length;m++){q[n[m]]=k(l,o[n[m]])}g.gapi[p].render(l.gplusEl,q)}};d.widget("googleplus","one",{init:e,activate:b,gtype:"plusone"});d.widget("googleplus","share",{init:e,activate:b,gtype:"plus"});d.widget("googleplus","badge",{init:e,activate:b,gtype:"plus"});d.network("linkedin",{script:{src:"//platform.linkedin.com/in.js"}});var i=function(l){var m=h.createElement("script");m.type="IN/"+l.widget.intype;d.copyDataAttributes(l.el,m);l.el.appendChild(m);if(typeof g.IN==="object"&&typeof g.IN.parse==="function"){g.IN.parse(l.el);d.activateInstance(l)}};d.widget("linkedin","share",{init:i,intype:"Share"});d.widget("linkedin","recommend",{init:i,intype:"RecommendProduct"});d.widget("linkedin","follow",{init:i,intype:"FollowCompany"})})(window,window.document,window.Socialite);(function(){var c=window._socialite;if(/Array/.test(Object.prototype.toString.call(c))){for(var b=0,a=c.length;b<a;b++){if(typeof c[b]==="function"){c[b]()}}}})();


/*!
 * Socialite v2.0 - Facebook extension
 * http://socialitejs.com
 * Copyright (c) 2011 David Bushell
 * Dual-licensed under the BSD or MIT licenses: http://socialitejs.com/license.txt
 */
(function(b,f,d,h){d.setup({facebook:{lang:"en_GB",appId:null}});d.network("facebook",{script:{src:"//connect.facebook.net/{{language}}/all.js",id:"facebook-jssdk"},append:function(a){var c=f.createElement("div"),e=d.settings.facebook,g={onlike:"edge.create",onunlike:"edge.remove",onsend:"message.send",oncomment:"comment.create",onuncomment:"comment.remove"};c.id="fb-root";f.body.appendChild(c);a.script.src=a.script.src.replace("{{language}}",e.lang);b.fbAsyncInit=function(){b.FB.init({appId:e.appId,
xfbml:!0});for(var a in g)"function"===typeof e[a]&&b.FB.Event.subscribe(g[a],e[a])}}});d.widget("facebook","like",{init:function(a){var c=f.createElement("div");c.className="fb-like";d.copyDataAttributes(a.el,c);a.el.appendChild(c);b.FB&&b.FB.XFBML&&b.FB.XFBML.parse(a.el)}})})(window,window.document,window.Socialite);

/*!
 * Socialite v2.0 - Twitter extension
 * http://socialitejs.com
 * Copyright (c) 2011 David Bushell
 * Dual-licensed under the BSD or MIT licenses: http://socialitejs.com/license.txt
 */
(function(b,f,c,e){c.setup({twitter:{lang:"en"}});c.network("twitter",{script:{src:"//platform.twitter.com/widgets.js",id:"twitter-wjs",charset:"utf-8"},append:function(){var a="object"!==typeof b.twttr,g=c.settings.twitter,e=["click","tweet","retweet","favorite","follow"];a&&(b.twttr=t={_e:[],ready:function(a){t._e.push(a)}});b.twttr.ready(function(a){for(var b=0;b<e.length;b++){var d=e[b];"function"===typeof g["on"+d]&&a.events.bind(d,g["on"+d])}c.activateAll("twitter")});return a}});e=function(a){var b=
f.createElement("a");b.className=a.widget.name+"-button";c.copyDataAttributes(a.el,b);b.setAttribute("href",a.el.getAttribute("data-default-href"));b.setAttribute("data-lang",a.el.getAttribute("data-lang")||c.settings.twitter.lang);a.el.appendChild(b)};var d=function(a){b.twttr&&"object"===typeof b.twttr.widgets&&"function"===typeof b.twttr.widgets.load&&b.twttr.widgets.load()};c.widget("twitter","share",{init:e,activate:d});c.widget("twitter","follow",{init:e,activate:d});c.widget("twitter","hashtag",
{init:e,activate:d});c.widget("twitter","mention",{init:e,activate:d});c.widget("twitter","timeline",{init:e,activate:d});c.widget("twitter","embed",{process:function(a){a.innerEl=a.el;a.innerEl.getAttribute("data-lang")||a.innerEl.setAttribute("data-lang",c.settings.twitter.lang);a.el=f.createElement("div");a.el.className=a.innerEl.className;a.innerEl.className="";a.innerEl.parentNode.insertBefore(a.el,a.innerEl);a.el.appendChild(a.innerEl)},init:function(a){a.innerEl.className="twitter-tweet"},
activate:d})})(window,window.document,window.Socialite);
!function(){"use strict";function e(e){if(!e)throw"You must provide an URL to scrape (YQL).";this.url=e}function r(e){if(!e)throw"You must provide an URL to request (JSONP).";this.url=encodeURIComponent(e)}function a(t){var a=t.jsonp?r:e;this.attrs=t,this.client=new a(t.link)}function n(){return navigator.vendor&&navigator.vendor.indexOf("Apple")>-1&&navigator.userAgent&&!navigator.userAgent.match("CriOS")}e.prototype={select:function(e){return this.httpGet(this.buildQuery(e))},buildQuery:function(e){var t="where url='"+this.url+"'";for(var r in e)t+=" and "+r+" = '"+e[r]+"'";return"select * from html "+t},httpGet:function(e){var t=jQuery.Deferred();return jQuery.ajax({url:"//query.yahooapis.com/v1/public/yql",data:{q:e,format:"json"}}).done(function(e){e.query&&e.query.count?t.resolve(e.query.results):t.reject("No results found")}).error(t.reject),t.promise()}},r.prototype={select:function(e){var t=jQuery.Deferred(),r=e.xpath;return jQuery.ajax({url:"https://jsonp.afeld.me/?callback=?&url="+this.url,dataType:"jsonp"}).done(function(e){e&&e.data?t.resolve(jQuery(e.data).find(r)):t.reject("No results found")}).error(t.reject),t.promise()}};var o={render:function(e,r){var a=new t(document.getElementById("js-"+e+"-template").innerHTML);return a.render(r)}},i={_loading:!1,load:function(e,t){if(i._loading)return void setTimeout(i.load.bind(i,e,t),1e3);i._loading=!0;var r=jQuery("<iframe>",{src:e.src,width:e.width,height:e.height}).css("display","none"),a=jQuery(t).find(".placeholder.loading");a.children().replaceWith(r),r.load(function(){a.removeClass("placeholder loading"),r.slideDown(),i._loading=!1})}},s=function(e){this.type=e,this.id="js-"+this.type+"-items",this.el=document.getElementById(this.id)};s.prototype={appendImages:function(e){e.forEach(this.appendImage.bind(this))},appendImage:function(e){var t=document.createElement("img");t.src=e.src,t.className="img-responsive";var r=jQuery("<a>",{href:e.src,"data-lightbox":this.type}).append(t);jQuery("<div>",{"class":"col-xs-12 col-sm-6 col-md-4"}).append(r).appendTo(this.el)},placeholder:function(e){jQuery("<div>",{"class":"col-xs-12 placeholder"}).append(e).appendTo(this.el)},iframe:function(e){i.load(e,this.el)},loading:function(){jQuery(this.el).find(".placeholder").addClass("loading")}},a.prototype={render:function(){return jQuery("#js-main").append(o.render("supermarket",this.attrs)),this.load()},load:function(){return this.client.select({xpath:this.attrs.select}).done(this.appendFromResults.bind(this)).fail(this.appendFallbackIframe.bind(this))},appendFromResults:function(e){var t=this.attrs.extractOffers(e);new s(this.attrs.key).appendImages(t)},appendFallbackIframe:function(e){var t=this.attrs.link,r=new s(this.attrs.key),a=o.render("notice",{link:t});if(n())return void r.placeholder(a);var i=jQuery("<span>",{"class":"js-iframe-notice",html:a+" o "});jQuery("<a>",{href:t,text:"cargarlo aquí"}).on("click",function(){return r.loading(),r.iframe({src:t,width:"100%",height:"1000"}),!1}).appendTo(i);r.placeholder(i)}};var c=[{key:"carrefour",name:"Carrefour",link:"http://www.carrefour.com.ar/promociones",select:'//div[contains(@class, "promo-landing-content-principal-image")]/img',extractOffers:function(e){return e.img.length?e.img:[e.img]}},{key:"coto",name:"Coto",link:"http://www.coto.com.ar/ofertas/semanal/ie.html",select:'//div[contains(@class, "list_images")]/img',extractOffers:function(e){return e.img.map(function(e){return{src:"http://www.coto.com.ar/ofertas/semanal/"+e.src}})}},{key:"cotomarcalider",name:"Coto (Marca líder)",link:"http://www.coto.com.ar/ofertas/marca-lider/ie.html",select:'//div[contains(@class, "list_images")]/img',extractOffers:function(e){return e.img.map(function(e){return{src:"http://www.coto.com.ar/ofertas/marca-lider/"+e.src}})}},{key:"dia",name:"Dia",link:"https://www.supermercadosdia.com.ar/ahorramesdia/",select:"img.aligncenter",jsonp:!0,extractOffers:function(e){return e.map(function(e,t){return{src:t.src}}).toArray()}},{key:"jumbo",name:"Jumbo",link:"https://www.jumbo.com.ar/Comprar/Home.aspx#_atCategory=true&_atGrilla=false&_id=5",select:'//div[@class="owl-item"]/img[@class="desktop"]',extractOffers:function(e){return e.img}},{key:"disco",name:"Disco",link:"https://www.disco.com.ar/Comprar/Home.aspx#_atCategory=true&_atGrilla=false&_id=75",select:'//div[@class="owl-item"]/img[@class="desktop"]',extractOffers:function(e){return e.img}}],l=c.map(function(e){return new a(e).render()});jQuery.when.apply(jQuery,l).always(function(){window.scrollTo(0,0),jQuery("body").scrollspy({target:"#navbar-supermarkets",offset:60}),imagesLoaded(document.getElementById("js-main"),function(){setTimeout(function(){jQuery("#js-social-buttons").trigger("mouseover")},1e3),jQuery("#js-loading").fadeOut("fast"),jQuery("#js-footer").removeClass("hidden")})}),jQuery(".js-supermarket-nav").on("click",function(e){var t=this.hash;e.preventDefault(),jQuery("html, body").animate({scrollTop:jQuery(t).offset().top},300,function(){window.location.hash=t})}),jQuery("#js-main").on("click",".js-supermarket-hide",function(e){var t=jQuery(this).data("selector");this.innerText={"Ocultar ↑":"Mostrar ↓","Mostrar ↓":"Ocultar ↑"}[this.innerText],jQuery(t).toggleClass("collapse"),e.preventDefault()}).on("click",".js-caption-link",function(e){var t=jQuery(this).data("selector");jQuery(t).click(),e.preventDefault()}),jQuery("#js-social-buttons").one("mouseover",function(){Socialite.setup({facebook:{lang:"es_LA"},twitter:{lang:"es_LA"}}),Socialite.load()}),lightbox.option({albumLabel:"%1 / %2"})}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiWVFMIiwidXJsIiwidGhpcyIsIkpTT05QIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwiU3VwZXJtYXJrZXQiLCJhdHRycyIsIkNsaWVudCIsImpzb25wIiwiY2xpZW50IiwibGluayIsImlzU2FmYXJpIiwibmF2aWdhdG9yIiwidmVuZG9yIiwiaW5kZXhPZiIsInVzZXJBZ2VudCIsIm1hdGNoIiwicHJvdG90eXBlIiwic2VsZWN0Iiwid2hlcmVDbGF1c2UiLCJodHRwR2V0IiwiYnVpbGRRdWVyeSIsIndoZXJlIiwicHJvcCIsInF1ZXJ5IiwiZGVmZXJyZWQiLCJqUXVlcnkiLCJEZWZlcnJlZCIsImFqYXgiLCJkYXRhIiwicSIsImZvcm1hdCIsImRvbmUiLCJjb250ZW50IiwiY291bnQiLCJyZXNvbHZlIiwicmVzdWx0cyIsInJlamVjdCIsImVycm9yIiwicHJvbWlzZSIsInNlbGVjdG9yIiwieHBhdGgiLCJkYXRhVHlwZSIsImZpbmQiLCJ0ZW1wbGF0ZSIsInJlbmRlciIsIm5hbWUiLCJodG1sVGVtcGxhdGUiLCJ0IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImlubmVySFRNTCIsImlmcmFtZSIsIl9sb2FkaW5nIiwibG9hZCIsInBhcmVudCIsInNldFRpbWVvdXQiLCJiaW5kIiwiJGlmcmFtZSIsInNyYyIsIndpZHRoIiwiaGVpZ2h0IiwiY3NzIiwiJHBsYWNlaG9sZGVyIiwiY2hpbGRyZW4iLCJyZXBsYWNlV2l0aCIsInJlbW92ZUNsYXNzIiwic2xpZGVEb3duIiwiSHRtbENvbnRhaW5lciIsInR5cGUiLCJpZCIsImVsIiwiYXBwZW5kSW1hZ2VzIiwiaW1hZ2VzIiwiZm9yRWFjaCIsImFwcGVuZEltYWdlIiwiaW1nIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTmFtZSIsIiRhIiwiaHJlZiIsImRhdGEtbGlnaHRib3giLCJhcHBlbmQiLCJjbGFzcyIsImFwcGVuZFRvIiwicGxhY2Vob2xkZXIiLCJjaGlsZCIsImxvYWRpbmciLCJhZGRDbGFzcyIsImFwcGVuZEZyb21SZXN1bHRzIiwiZmFpbCIsImFwcGVuZEZhbGxiYWNrSWZyYW1lIiwiZXh0cmFjdE9mZmVycyIsImtleSIsImNvbnRhaW5lciIsIm5vdGljZUhUTUwiLCJwbGFjZWhvbGRlckNoaWxkIiwiaHRtbCIsInRleHQiLCJvbiIsIlNVUEVSTUFSS0VUUyIsImxlbmd0aCIsIm1hcCIsImluZGV4IiwidG9BcnJheSIsInByb21pc2VzIiwiYXR0cmlidXRlcyIsIndoZW4iLCJhcHBseSIsImFsd2F5cyIsIndpbmRvdyIsInNjcm9sbFRvIiwic2Nyb2xsc3B5IiwidGFyZ2V0Iiwib2Zmc2V0IiwiaW1hZ2VzTG9hZGVkIiwidHJpZ2dlciIsImZhZGVPdXQiLCJldmVudCIsImhhc2giLCJwcmV2ZW50RGVmYXVsdCIsImFuaW1hdGUiLCJzY3JvbGxUb3AiLCJ0b3AiLCJsb2NhdGlvbiIsImlubmVyVGV4dCIsIk9jdWx0YXIg4oaRIiwiTW9zdHJhciDihpMiLCJ0b2dnbGVDbGFzcyIsImNsaWNrIiwib25lIiwiU29jaWFsaXRlIiwic2V0dXAiLCJmYWNlYm9vayIsImxhbmciLCJ0d2l0dGVyIiwibGlnaHRib3giLCJvcHRpb24iLCJhbGJ1bUxhYmVsIl0sIm1hcHBpbmdzIjoiQ0FBQSxXQUNFLFlBS0EsU0FBU0EsR0FBSUMsR0FDWCxJQUFLQSxFQUFLLEtBQU0sMENBQ2hCQyxNQUFLRCxJQUFNQSxFQXVDYixRQUFTRSxHQUFNRixHQUNiLElBQUtBLEVBQUssS0FBTSw2Q0FDaEJDLE1BQUtELElBQU1HLG1CQUFtQkgsR0FxSGhDLFFBQVNJLEdBQVlDLEdBQ25CLEdBQUlDLEdBQVVELEVBQU1FLE1BQVFMLEVBQVFILENBQ3BDRSxNQUFLSSxNQUFTQSxFQUNkSixLQUFLTyxPQUFTLEdBQUlGLEdBQU9ELEVBQU1JLE1Bd01qQyxRQUFTQyxLQUlQLE1BQU9DLFdBQVVDLFFBQVVELFVBQVVDLE9BQU9DLFFBQVEsU0FBVyxJQUN4REYsVUFBVUcsWUFBY0gsVUFBVUcsVUFBVUMs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UyxTQUFTbUIsR0FDbEQsR0FBSUMsR0FBT3JILEtBQUtxSCxJQUNoQkQsR0FBTUUsaUJBRUw5RixPQUFPLGNBQWMrRixTQUNuQkMsVUFBV2hHLE9BQU82RixHQUFNTCxTQUFTUyxLQUNoQyxJQUFLLFdBQ0xiLE9BQU9jLFNBQVNMLEtBQU9BLE1BTzVCN0YsT0FBTyxZQUNKeUUsR0FBRyxRQUFTLHVCQUF3QixTQUFTbUIsR0FDNUMsR0FBSTlFLEdBQVdkLE9BQU94QixNQUFNMkIsS0FBSyxXQUVqQzNCLE1BQUsySCxXQUNIQyxZQUFhLFlBQ2JDLFlBQWEsYUFDYjdILEtBQUsySCxXQUVQbkcsT0FBT2MsR0FBVXdGLFlBQVksWUFDN0JWLEVBQU1FLG1CQUVQckIsR0FBRyxRQUFTLG1CQUFvQixTQUFTbUIsR0FDeEMsR0FBSTlFLEdBQVdkLE9BQU94QixNQUFNMkIsS0FBSyxXQUNqQ0gsUUFBT2MsR0FBVXlGLFFBQ2pCWCxFQUFNRSxtQkFNVjlGLE9BQU8sc0JBQXNCd0csSUFBSSxZQUFhLFdBQzVDQyxVQUFVQyxPQUNSQyxVQUFZQyxLQUFNLFNBQ2xCQyxTQUFZRCxLQUFNLFdBRXBCSCxVQUFVN0UsU0FNWmtGLFNBQVNDLFFBQVNDLFdBQVkiLCJmaWxlIjoiYWxsLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpIHtcbiAgJ3VzZSBzdHJpY3QnXG5cbiAgLy9cbiAgLy8gUmVxdWVzdHMgdG8gdGhlIHdlYi4gVXNpbmcgWVFMIG9mIEpTT05QXG5cbiAgZnVuY3Rpb24gWVFMKHVybCkge1xuICAgIGlmICghdXJsKSB0aHJvdyBcIllvdSBtdXN0IHByb3ZpZGUgYW4gVVJMIHRvIHNjcmFwZSAoWVFMKS5cIlxuICAgIHRoaXMudXJsID0gdXJsXG4gIH1cblxuICBZUUwucHJvdG90eXBlID0ge1xuICAgIHNlbGVjdDogZnVuY3Rpb24gKHdoZXJlQ2xhdXNlKSB7XG4gICAgICByZXR1cm4gdGhpcy5odHRwR2V0KFxuICAgICAgICB0aGlzLmJ1aWxkUXVlcnkod2hlcmVDbGF1c2UpXG4gICAgICApXG4gICAgfSxcblxuICAgIGJ1aWxkUXVlcnk6IGZ1bmN0aW9uICh3aGVyZUNsYXVzZSkge1xuICAgICAgdmFyIHdoZXJlID0gXCJ3aGVyZSB1cmw9J1wiICsgdGhpcy51cmwgKyBcIidcIlxuICAgICAgZm9yKHZhciBwcm9wIGluIHdoZXJlQ2xhdXNlKSB7XG4gICAgICAgIHdoZXJlICs9IFwiIGFuZCBcIiArIHByb3AgKyBcIiA9ICdcIiArIHdoZXJlQ2xhdXNlW3Byb3BdICsgXCInXCJcbiAgICAgIH1cbiAgICAgIHJldHVybiBcInNlbGVjdCAqIGZyb20gaHRtbCBcIiArIHdoZXJlXG4gICAgfSxcblxuICAgIGh0dHBHZXQ6IGZ1bmN0aW9uIChxdWVyeSkge1xuICAgICAgdmFyIGRlZmVycmVkID0galF1ZXJ5LkRlZmVycmVkKClcblxuICAgICAgalF1ZXJ5LmFqYXgoe1xuICAgICAgICB1cmw6ICcvL3F1ZXJ5LnlhaG9vYXBpcy5jb20vdjEvcHVibGljL3lxbCcsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBxOiBxdWVyeSxcbiAgICAgICAgICBmb3JtYXQ6ICdqc29uJ1xuICAgICAgICB9XG4gICAgICB9KS5kb25lKGZ1bmN0aW9uIChjb250ZW50KSB7XG4gICAgICAgIGlmIChjb250ZW50LnF1ZXJ5ICYmIGNvbnRlbnQucXVlcnkuY291bnQpIHtcbiAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKGNvbnRlbnQucXVlcnkucmVzdWx0cylcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkZWZlcnJlZC5yZWplY3QoJ05vIHJlc3VsdHMgZm91bmQnKVxuICAgICAgICB9XG4gICAgICB9KS5lcnJvcihkZWZlcnJlZC5yZWplY3QpXG5cbiAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlKClcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBKU09OUCh1cmwpIHtcbiAgICBpZiAoIXVybCkgdGhyb3cgXCJZb3UgbXVzdCBwcm92aWRlIGFuIFVSTCB0byByZXF1ZXN0IChKU09OUCkuXCJcbiAgICB0aGlzLnVybCA9IGVuY29kZVVSSUNvbXBvbmVudCh1cmwpXG4gIH1cblxuICBKU09OUC5wcm90b3R5cGUgPSB7XG4gICAgc2VsZWN0OiBmdW5jdGlvbiAod2hlcmVDbGF1c2UpIHtcbiAgICAgIHZhciBkZWZlcnJlZCA9IGpRdWVyeS5EZWZlcnJlZCgpXG4gICAgICB2YXIgc2VsZWN0b3IgPSB3aGVyZUNsYXVzZS54cGF0aFxuXG4gICAgICBqUXVlcnkuYWpheCh7XG4gICAgICAgIHVybDogJ2h0dHBzOi8vanNvbnAuYWZlbGQubWUvP2NhbGxiYWNrPT8mdXJsPScgKyB0aGlzLnVybCxcbiAgICAgICAgZGF0YVR5cGU6ICdqc29ucCdcbiAgICAgIH0pLmRvbmUoZnVuY3Rpb24gKGNvbnRlbnQpIHtcbiAgICAgICAgaWYgKGNvbnRlbnQgJiYgY29udGVudC5kYXRhKSB7XG4gICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShcbiAgICAgICAgICAgIGpRdWVyeShjb250ZW50LmRhdGEpLmZpbmQoc2VsZWN0b3IpXG4gICAgICAgICAgKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRlZmVycmVkLnJlamVjdCgnTm8gcmVzdWx0cyBmb3VuZCcpXG4gICAgICAgIH1cbiAgICAgIH0pLmVycm9yKGRlZmVycmVkLnJlamVjdClcblxuICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2UoKVxuICAgIH1cbiAgfVxuXG4gIC8vXG4gIC8vIFRlbXBsYXRlIHNpbmdsZXRvblxuXG4gIHZhciB0ZW1wbGF0ZSA9IHtcbiAgICByZW5kZXI6IGZ1bmN0aW9uIChuYW1lLCBkYXRhKSB7XG4gICAgICB2YXIgaHRtbFRlbXBsYXRlID0gbmV3IHQoXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdqcy0nICsgbmFtZSArICctdGVtcGxhdGUnKS5pbm5lckhUTUxcbiAgICAgIClcbiAgICAgIHJldHVybiBodG1sVGVtcGxhdGUucmVuZGVyKGRhdGEpXG4gICAgfVxuICB9XG5cbiAgLy9cbiAgLy8gSWZyYW1lIHNpbmdsZXRvblxuXG4gIHZhciBpZnJhbWUgPSB7XG4gICAgX2xvYWRpbmc6IGZhbHNlLFxuICAgIGxvYWQ6IGZ1bmN0aW9uIChhdHRycywgcGFyZW50KSB7XG4gICAgICBpZiAoaWZyYW1lLl9sb2FkaW5nKSB7XG4gICAgICAgIHNldFRpbWVvdXQoaWZyYW1lLmxvYWQuYmluZChpZnJhbWUsIGF0dHJzLCBwYXJlbnQpLCAxMDAwKVxuICAgICAgICByZXR1cm5cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmcmFtZS5fbG9hZGluZyA9IHRydWVcbiAgICAgIH1cblxuICAgICAgdmFyICRpZnJhbWUgPSBqUXVlcnkoJzxpZnJhbWU+Jywge1xuICAgICAgICBzcmMgICA6IGF0dHJzLnNyYyxcbiAgICAgICAgd2lkdGggOiBhdHRycy53aWR0aCxcbiAgICAgICAgaGVpZ2h0OiBhdHRycy5oZWlnaHRcbiAgICAgIH0pXG4gICAgICAuY3NzKCdkaXNwbGF5JywgJ25vbmUnKVxuXG4gICAgICB2YXIgJHBsYWNlaG9sZGVyID0galF1ZXJ5KHBhcmVudCkuZmluZCgnLnBsYWNlaG9sZGVyLmxvYWRpbmcnKVxuXG4gICAgICAkcGxhY2Vob2xkZXIuY2hpbGRyZW4oKS5yZXBsYWNlV2l0aCgkaWZyYW1lKVxuXG4gICAgICAkaWZyYW1lLmxvYWQoZnVuY3Rpb24gKCkge1xuICAgICAgICAkcGxhY2Vob2xkZXIucmVtb3ZlQ2xhc3MoJ3BsYWNlaG9sZGVyIGxvYWRpbmcnKVxuICAgICAgICAkaWZyYW1lLnNsaWRlRG93bigpXG4gICAgICAgIGlmcmFtZS5fbG9hZGluZyA9IGZhbHNlXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG5cbiAgLy9cbiAgLy8gSGVscHMgYnVpbGRpbmcgdGhlIGVsZW1lbnQgdGhhdCBjb250YWlucyB0aGUgZGF0YVxuXG4gIHZhciBIdG1sQ29udGFpbmVyID0gZnVuY3Rpb24gKHR5cGUpIHtcbiAgICB0aGlzLnR5cGUgPSB0eXBlXG4gICAgdGhpcy5pZCA9ICdqcy0nICsgdGhpcy50eXBlICsgJy1pdGVtcydcbiAgICB0aGlzLmVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5pZClcbiAgfVxuXG4gIEh0bWxDb250YWluZXIucHJvdG90eXBlID0ge1xuICAgIGFwcGVuZEltYWdlczogZnVuY3Rpb24oaW1hZ2VzKSB7XG4gICAgICBpbWFnZXMuZm9yRWFjaCh0aGlzLmFwcGVuZEltYWdlLmJpbmQodGhpcykpXG4gICAgfSxcblxuICAgIGFwcGVuZEltYWdlOiBmdW5jdGlvbihhdHRycykge1xuICAgICAgdmFyIGltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpXG4gICAgICBpbWcuc3JjID0gYXR0cnMuc3JjXG4gICAgICBpbWcuY2xhc3NOYW1lID0gJ2ltZy1yZXNwb25zaXZlJ1xuXG4gICAgICB2YXIgJGEgPSBqUXVlcnkoJzxhPicsIHtcbiAgICAgICAgJ2hyZWYnOiBhdHRycy5zcmMsXG4gICAgICAgICdkYXRhLWxpZ2h0Ym94JzogdGhpcy50eXBlXG4gICAgICB9KS5hcHBlbmQoaW1nKVxuXG4gICAgICBqUXVlcnkoJzxkaXY+JywgeyAnY2xhc3MnOiAnY29sLXhzLTEyIGNvbC1zbS02IGNvbC1tZC00JyB9KVxuICAgICAgICAuYXBwZW5kKCRhKVxuICAgICAgICAuYXBwZW5kVG8odGhpcy5lbClcbiAgICB9LFxuXG4gICAgcGxhY2Vob2xkZXI6IGZ1bmN0aW9uIChjaGlsZCkge1xuICAgICAgalF1ZXJ5KCc8ZGl2PicsIHsgJ2NsYXNzJzogJ2NvbC14cy0xMiBwbGFjZWhvbGRlcicgfSlcbiAgICAgICAgLmFwcGVuZChjaGlsZClcbiAgICAgICAgLmFwcGVuZFRvKHRoaXMuZWwpXG4gICAgfSxcblxuICAgIGlmcmFtZTogZnVuY3Rpb24gKGF0dHJzKSB7XG4gICAgICBpZnJhbWUubG9hZChhdHRycywgdGhpcy5lbClcbiAgICB9LFxuXG4gICAgbG9hZGluZzogZnVuY3Rpb24gKCkge1xuICAgICAgalF1ZXJ5KHRoaXMuZWwpLmZpbmQoJy5wbGFjZWhvbGRlcicpLmFkZENsYXNzKCdsb2FkaW5nJylcbiAgICB9XG4gIH1cblxuICAvL1xuICAvLyBVc2VzIHRoZSBvdGhlciBvYmplY3RzIHRvIHNob3cgc3VwZXJtYXJrZXQgZGF0YSBvbiB0aGUgRE9NXG5cbiAgZnVuY3Rpb24gU3VwZXJtYXJrZXQoYXR0cnMpIHtcbiAgICB2YXIgQ2xpZW50ICA9IGF0dHJzLmpzb25wID8gSlNPTlAgOiBZUUxcbiAgICB0aGlzLmF0dHJzICA9IGF0dHJzXG4gICAgdGhpcy5jbGllbnQgPSBuZXcgQ2xpZW50KGF0dHJzLmxpbmspXG4gIH1cblxuICBTdXBlcm1hcmtldC5wcm90b3R5cGUgPSB7XG4gICAgcmVuZGVyOiBmdW5jdGlvbiAoKSB7XG4gICAgICBqUXVlcnkoJyNqcy1tYWluJykuYXBwZW5kKFxuICAgICAgICB0ZW1wbGF0ZS5yZW5kZXIoJ3N1cGVybWFya2V0JywgdGhpcy5hdHRycylcbiAgICAgIClcbiAgICAgIHJldHVybiB0aGlzLmxvYWQoKVxuICAgIH0sXG5cbiAgICBsb2FkOiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5jbGllbnRcbiAgICAgICAgLnNlbGVjdCh7IHhwYXRoOiB0aGlzLmF0dHJzLnNlbGVjdCB9KVxuICAgICAgICAuZG9uZSh0aGlzLmFwcGVuZEZyb21SZXN1bHRzLmJpbmQodGhpcykpXG4gICAgICAgIC5mYWlsKHRoaXMuYXBwZW5kRmFsbGJhY2tJZnJhbWUuYmluZCh0aGlzKSlcbiAgICB9LFxuXG4gICAgYXBwZW5kRnJvbVJlc3VsdHM6IGZ1bmN0aW9uIChyZXN1bHRzKSB7XG4gICAgICB2YXIgaW1hZ2VzID0gdGhpcy5hdHRycy5leHRyYWN0T2ZmZXJzKHJlc3VsdHMpXG4gICAgICBuZXcgSHRtbENvbnRhaW5lcih0aGlzLmF0dHJzLmtleSkuYXBwZW5kSW1hZ2VzKGltYWdlcylcbiAgICB9LFxuXG4gICAgYXBwZW5kRmFsbGJhY2tJZnJhbWU6IGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgdmFyIGxpbmsgPSB0aGlzLmF0dHJzLmxpbmtcbiAgICAgIHZhciBjb250YWluZXIgPSBuZXcgSHRtbENvbnRhaW5lcih0aGlzLmF0dHJzLmtleSlcbiAgICAgIHZhciBub3RpY2VIVE1MID0gdGVtcGxhdGUucmVuZGVyKCdub3RpY2UnLCB7IGxpbms6IGxpbmsgfSlcbiAgICAgIFxuICAgICAgaWYgKGlzU2FmYXJpKCkpIHtcbiAgICAgICAgY29udGFpbmVyLnBsYWNlaG9sZGVyKG5vdGljZUhUTUwpXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICB2YXIgcGxhY2Vob2xkZXJDaGlsZCA9IGpRdWVyeSgnPHNwYW4+Jywge1xuICAgICAgICBcImNsYXNzXCI6ICdqcy1pZnJhbWUtbm90aWNlJyxcbiAgICAgICAgXCJodG1sXCI6IG5vdGljZUhUTUwgKyAnIG8gJ1xuICAgICAgfSlcblxuICAgICAgdmFyIGxvYWRJZnJhbWVMaW5rID0galF1ZXJ5KCc8YT4nLCB7XG4gICAgICAgICAgaHJlZjogbGluayxcbiAgICAgICAgICB0ZXh0OiAnY2FyZ2FybG8gYXF1w60nXG4gICAgICAgIH0pLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBjb250YWluZXIubG9hZGluZygpXG4gICAgICAgICAgY29udGFpbmVyLmlmcmFtZSh7XG4gICAgICAgICAgICBzcmMgICA6IGxpbmssXG4gICAgICAgICAgICB3aWR0aCA6ICcxMDAlJyxcbiAgICAgICAgICAgIGhlaWdodDogJzEwMDAnXG4gICAgICAgICAgfSlcbiAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgfSlcbiAgICAgICAgLmFwcGVuZFRvKHBsYWNlaG9sZGVyQ2hpbGQpXG5cbiAgICAgIGNvbnRhaW5lci5wbGFjZWhvbGRlcihwbGFjZWhvbGRlckNoaWxkKVxuICAgIH1cbiAgfVxuXG4gIC8vXG4gIC8vIEZldGNoIGFuZCByZW5kZXJcblxuICB2YXIgU1VQRVJNQVJLRVRTID0gW1xuICAgIHtcbiAgICAgIGtleSAgIDogJ2NhcnJlZm91cicsXG4gICAgICBuYW1lICA6ICdDYXJyZWZvdXInLFxuICAgICAgbGluayAgOiAnaHR0cDovL3d3dy5jYXJyZWZvdXIuY29tLmFyL3Byb21vY2lvbmVzJyxcbiAgICAgIHNlbGVjdDogJy8vZGl2W2NvbnRhaW5zKEBjbGFzcywgXCJwcm9tby1sYW5kaW5nLWNvbnRlbnQtcHJpbmNpcGFsLWltYWdlXCIpXS9pbWcnLFxuICAgICAgZXh0cmFjdE9mZmVyczogZnVuY3Rpb24gKHJlc3VsdHMpIHsgcmV0dXJuIHJlc3VsdHMuaW1nLmxlbmd0aCA/IHJlc3VsdHMuaW1nIDogW3Jlc3VsdHMuaW1nXSB9XG4gICAgfSxcbiAgICB7XG4gICAgICBrZXkgICA6ICdjb3RvJyxcbiAgICAgIG5hbWUgIDogJ0NvdG8nLFxuICAgICAgbGluayAgOiAnaHR0cDovL3d3dy5jb3RvLmNvbS5hci9vZmVydGFzL3NlbWFuYWwvaWUuaHRtbCcsXG4gICAgICBzZWxlY3Q6ICcvL2Rpdltjb250YWlucyhAY2xhc3MsIFwibGlzdF9pbWFnZXNcIildL2ltZycsXG4gICAgICBleHRyYWN0T2ZmZXJzOiBmdW5jdGlvbiAocmVzdWx0cykge1xuICAgICAgICByZXR1cm4gcmVzdWx0cy5pbWcubWFwKGZ1bmN0aW9uIChpbWcpIHtcbiAgICAgICAgICByZXR1cm4geyBzcmM6ICdodHRwOi8vd3d3LmNvdG8uY29tLmFyL29mZXJ0YXMvc2VtYW5hbC8nICsgaW1nLnNyYyB9XG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICBrZXkgICA6ICdjb3RvbWFyY2FsaWRlcicsXG4gICAgICBuYW1lICA6ICdDb3RvIChNYXJjYSBsw61kZXIpJyxcbiAgICAgIGxpbmsgIDogJ2h0dHA6Ly93d3cuY290by5jb20uYXIvb2ZlcnRhcy9tYXJjYS1saWRlci9pZS5odG1sJyxcbiAgICAgIHNlbGVjdDogJy8vZGl2W2NvbnRhaW5zKEBjbGFzcywgXCJsaXN0X2ltYWdlc1wiKV0vaW1nJyxcbiAgICAgIGV4dHJhY3RPZmZlcnM6IGZ1bmN0aW9uIChyZXN1bHRzKSB7XG4gICAgICAgIHJldHVybiByZXN1bHRzLmltZy5tYXAoZnVuY3Rpb24gKGltZykge1xuICAgICAgICAgIHJldHVybiB7IHNyYzogJ2h0dHA6Ly93d3cuY290by5jb20uYXIvb2ZlcnRhcy9tYXJjYS1saWRlci8nICsgaW1nLnNyYyB9XG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICBrZXkgICA6ICdkaWEnLFxuICAgICAgbmFtZSAgOiAnRGlhJyxcbiAgICAgIGxpbmsgIDogJ2h0dHBzOi8vd3d3LnN1cGVybWVyY2Fkb3NkaWEuY29tLmFyL2Fob3JyYW1lc2RpYS8nLFxuICAgICAgc2VsZWN0OiAnaW1nLmFsaWduY2VudGVyJyxcbiAgICAgIGpzb25wIDogdHJ1ZSxcbiAgICAgIGV4dHJhY3RPZmZlcnM6IGZ1bmN0aW9uIChyZXN1bHRzKSB7XG4gICAgICAgIHJldHVybiByZXN1bHRzLm1hcChmdW5jdGlvbihpbmRleCwgaW1nKSB7XG4gICAgICAgICAgcmV0dXJuIHsgc3JjOiBpbWcuc3JjIH1cbiAgICAgICAgfSkudG9BcnJheSgpXG4gICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICBrZXkgICA6ICdqdW1ibycsXG4gICAgICBuYW1lICA6ICdKdW1ibycsXG4gICAgICBsaW5rICA6ICdodHRwczovL3d3dy5qdW1iby5jb20uYXIvQ29tcHJhci9Ib21lLmFzcHgjX2F0Q2F0ZWdvcnk9dHJ1ZSZfYXRHcmlsbGE9ZmFsc2UmX2lkPTUnLFxuICAgICAgc2VsZWN0OiAnLy9kaXZbQGNsYXNzPVwib3dsLWl0ZW1cIl0vaW1nW0BjbGFzcz1cImRlc2t0b3BcIl0nLFxuICAgICAgZXh0cmFjdE9mZmVyczogZnVuY3Rpb24gKHJlc3VsdHMpIHsgcmV0dXJuIHJlc3VsdHMuaW1nIH1cbiAgICB9LFxuICAgIHtcbiAgICAgIGtleSAgIDogJ2Rpc2NvJyxcbiAgICAgIG5hbWUgIDogJ0Rpc2NvJyxcbiAgICAgIGxpbmsgIDogJ2h0dHBzOi8vd3d3LmRpc2NvLmNvbS5hci9Db21wcmFyL0hvbWUuYXNweCNfYXRDYXRlZ29yeT10cnVlJl9hdEdyaWxsYT1mYWxzZSZfaWQ9NzUnLFxuICAgICAgc2VsZWN0OiAnLy9kaXZbQGNsYXNzPVwib3dsLWl0ZW1cIl0vaW1nW0BjbGFzcz1cImRlc2t0b3BcIl0nLFxuICAgICAgZXh0cmFjdE9mZmVyczogZnVuY3Rpb24gKHJlc3VsdHMpIHsgcmV0dXJuIHJlc3VsdHMuaW1nIH1cbiAgICB9LFxuICBdXG5cbiAgdmFyIHByb21pc2VzID0gU1VQRVJNQVJLRVRTLm1hcChmdW5jdGlvbiAoYXR0cmlidXRlcykge1xuICAgIHJldHVybiBuZXcgU3VwZXJtYXJrZXQoYXR0cmlidXRlcykucmVuZGVyKClcbiAgfSlcblxuICBqUXVlcnkud2hlbi5hcHBseShqUXVlcnksIHByb21pc2VzKS5hbHdheXMoZnVuY3Rpb24gKCkge1xuICAgIHdpbmRvdy5zY3JvbGxUbygwLCAwKVxuICAgIGpRdWVyeSgnYm9keScpLnNjcm9sbHNweSh7IHRhcmdldDogJyNuYXZiYXItc3VwZXJtYXJrZXRzJywgb2Zmc2V0OiA2MCB9KVxuXG4gICAgaW1hZ2VzTG9hZGVkKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwianMtbWFpblwiKSwgZnVuY3Rpb24gKCkge1xuICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGpRdWVyeShcIiNqcy1zb2NpYWwtYnV0dG9uc1wiKS50cmlnZ2VyKCdtb3VzZW92ZXInKVxuICAgICAgfSwgMTAwMClcblxuICAgICAgalF1ZXJ5KCcjanMtbG9hZGluZycpLmZhZGVPdXQoJ2Zhc3QnKVxuICAgICAgalF1ZXJ5KCcjanMtZm9vdGVyJykucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpXG4gICAgfSlcbiAgfSlcblxuICAvL1xuICAvLyBBbmltYXRlIHNjcm9sbCBuYXZpZ2F0aW9uXG5cbiAgalF1ZXJ5KFwiLmpzLXN1cGVybWFya2V0LW5hdlwiKS5vbignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgdmFyIGhhc2ggPSB0aGlzLmhhc2hcbiAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcblxuICAgIGpRdWVyeSgnaHRtbCwgYm9keScpLmFuaW1hdGUoe1xuICAgICAgc2Nyb2xsVG9wOiBqUXVlcnkoaGFzaCkub2Zmc2V0KCkudG9wXG4gICAgfSwgMzAwLCBmdW5jdGlvbigpe1xuICAgICAgIHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gaGFzaFxuICAgIH0pXG4gIH0pXG5cbiAgLy9cbiAgLy8gQWN0aW9ucyB0byB0aGUgcmlnaHQsIHNob3cvaGlkZSBjb250ZW50XG5cbiAgalF1ZXJ5KFwiI2pzLW1haW5cIilcbiAgICAub24oJ2NsaWNrJywgJy5qcy1zdXBlcm1hcmtldC1oaWRlJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgIHZhciBzZWxlY3RvciA9IGpRdWVyeSh0aGlzKS5kYXRhKCdzZWxlY3RvcicpXG5cbiAgICAgIHRoaXMuaW5uZXJUZXh0ID0ge1xuICAgICAgICAnT2N1bHRhciDihpEnOiAnTW9zdHJhciDihpMnLFxuICAgICAgICAnTW9zdHJhciDihpMnOiAnT2N1bHRhciDihpEnXG4gICAgICB9W3RoaXMuaW5uZXJUZXh0XVxuXG4gICAgICBqUXVlcnkoc2VsZWN0b3IpLnRvZ2dsZUNsYXNzKCdjb2xsYXBzZScpXG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgfSlcbiAgICAub24oJ2NsaWNrJywgJy5qcy1jYXB0aW9uLWxpbmsnLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgdmFyIHNlbGVjdG9yID0galF1ZXJ5KHRoaXMpLmRhdGEoJ3NlbGVjdG9yJylcbiAgICAgIGpRdWVyeShzZWxlY3RvcikuY2xpY2soKVxuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIH0pXG5cbiAgLy9cbiAgLy8gU2hhcmUgb24gVFdUL0ZCXG5cbiAgalF1ZXJ5KFwiI2pzLXNvY2lhbC1idXR0b25zXCIpLm9uZSgnbW91c2VvdmVyJywgZnVuY3Rpb24oKSB7XG4gICAgU29jaWFsaXRlLnNldHVwKHtcbiAgICAgIGZhY2Vib29rOiB7IGxhbmc6ICdlc19MQScgfSxcbiAgICAgIHR3aXR0ZXIgOiB7IGxhbmc6ICdlc19MQScgfVxuICAgIH0pXG4gICAgU29jaWFsaXRlLmxvYWQoKVxuICB9KVxuXG4gIC8vXG4gIC8vIExpZ2h0Ym94XG5cbiAgbGlnaHRib3gub3B0aW9uKHsgYWxidW1MYWJlbDogJyUxIC8gJTInIH0pXG5cbiAgLy9cbiAgLy8gVXRpbHNcblxuICBmdW5jdGlvbiBpc0VsZW1lbnRJblZpZXdwb3J0KGVsKSB7XG4gICAgdmFyIHJlY3QgPSBlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuXG4gICAgcmV0dXJuIChcbiAgICAgIHJlY3QudG9wID49IDAgJiZcbiAgICAgIHJlY3QubGVmdCA+PSAwICYmXG4gICAgICByZWN0LmJvdHRvbSA8PSAod2luZG93LmlubmVySGVpZ2h0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQpICYmXG4gICAgICByZWN0LnJpZ2h0IDw9ICh3aW5kb3cuaW5uZXJXaWR0aCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGgpXG4gICAgKVxuICB9XG5cbiAgZnVuY3Rpb24gaXNTYWZhcmkoKSB7XG4gICAgLy8gVGhpcyBpcyByZWFsbHkgYXdmdWwuXG4gICAgLy8gU2FmYXJpIGNhbid0IGxvYWQgc29tZSBpZnJhbWVzIHByb3Blcmx5IGJlY2F1c2Ugb2YgdGhlIHdheSB0aGV5IGhhbmRsZSByZWRpcmVjdGlvbiB0byBzZXQgY29va2llc1xuICAgIC8vIEluc3RlYWQgb2YganVzdCByZW1vdmluZyB0aGUgaWZyYW1lcyBmb3IgYWxsIGJyb3dzZXJzLCB0cnkgdG8gZGV0ZWN0IFNhZmFyaSBhbmQgYnJlYWsgZWFybHlcbiAgICByZXR1cm4gbmF2aWdhdG9yLnZlbmRvciAmJiBuYXZpZ2F0b3IudmVuZG9yLmluZGV4T2YoJ0FwcGxlJykgPiAtMSAmJlxuICAgICAgICAgICBuYXZpZ2F0b3IudXNlckFnZW50ICYmICFuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKCdDcmlPUycpXG4gIH1cbn0pKClcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
